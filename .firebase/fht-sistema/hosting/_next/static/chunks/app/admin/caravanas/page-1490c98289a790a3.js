(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6716],{80319:function(e,t,a){Promise.resolve().then(a.bind(a,66697))},66697:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return _}});var s=a(57437),n=a(2265),r=a(99376),d=a(17293),i=a(5978),o=a(46413),l=a(35153),c=a(62869),u=a(66070),x=a(73578),m=a(26110),f=a(95186),h=a(26815),p=a(57054),j=a(1098),v=a(51817),y=a(26937),N=a(76858),g=a(31047),b=a(52255),w=a(94508);function _(){let e=(0,r.useRouter)(),{user:t}=(0,o.a)(),{toast:a}=(0,l.pm)(),[_,C]=(0,n.useState)([]),[S,E]=(0,n.useState)(!0),[D,M]=(0,n.useState)(!1),[k,z]=(0,n.useState)(""),[O,Z]=(0,n.useState)(),[R,P]=(0,n.useState)(),[A,F]=(0,n.useState)(""),[I,J]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=(0,i.IO)((0,i.hJ)(d.db,"caravanEvents"),(0,i.Xo)("startDate","desc")),t=(0,i.cf)(e,e=>{C(e.docs.map(e=>({id:e.id,...e.data()}))),E(!1)},e=>{console.error("Erro de permiss\xe3o no snapshot:",e),E(!1)});return()=>t()},[]);let W=async()=>{if(!k||!O||!R||!A){a({title:"Campos Incompletos",description:"Todos os campos s\xe3o obrigat\xf3rios.",variant:"destructive"});return}if(R<O){a({title:"Datas Inv\xe1lidas",description:"A data final deve ser igual ou posterior \xe0 data inicial.",variant:"destructive"});return}J(!0);try{let e={eventName:k,startDate:i.EK.fromDate(O),endDate:i.EK.fromDate(R),location:A,status:"PLANEJAMENTO",createdAt:(0,i.Bt)()};await (0,i.ET)((0,i.hJ)(d.db,"caravanEvents"),e),a({title:"Sucesso!",description:"O novo evento de multir\xe3o foi criado.",className:"bg-green-600 text-white"}),M(!1),z(""),Z(void 0),P(void 0),F("")}catch(e){console.error("Erro ao criar evento:",e),a({title:"Erro",description:"N\xe3o foi poss\xedvel criar o evento.",variant:"destructive"})}finally{J(!1)}};return S?(0,s.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,s.jsx)(v.Z,{className:"h-12 w-12 animate-spin text-blue-600"})}):(0,s.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Gest\xe3o Multir\xe3o"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Crie e gerencie os eventos de sa\xfade."})]}),(0,s.jsxs)(c.z,{onClick:()=>M(!0),children:[(0,s.jsx)(y.Z,{className:"mr-2 h-4 w-4"}),"Criar Novo Evento"]})]}),(0,s.jsxs)(u.Zb,{children:[(0,s.jsx)(u.Ol,{children:(0,s.jsx)(u.ll,{children:"Eventos Cadastrados"})}),(0,s.jsx)(u.aY,{children:(0,s.jsxs)(x.iA,{children:[(0,s.jsx)(x.xD,{children:(0,s.jsxs)(x.SC,{children:[(0,s.jsx)(x.ss,{children:"Nome do Evento"}),(0,s.jsx)(x.ss,{children:"Per\xedodo"}),(0,s.jsx)(x.ss,{children:"Local"}),(0,s.jsx)(x.ss,{children:"Status"}),(0,s.jsx)(x.ss,{children:"A\xe7\xf5es"})]})}),(0,s.jsx)(x.RM,{children:_.length>0?_.map(t=>(0,s.jsxs)(x.SC,{children:[(0,s.jsx)(x.pj,{className:"font-medium",children:t.eventName}),(0,s.jsx)(x.pj,{children:"".concat((0,b.WU)(t.startDate.toDate(),"dd/MM/yy")," - ").concat((0,b.WU)(t.endDate.toDate(),"dd/MM/yy"))}),(0,s.jsx)(x.pj,{children:t.location}),(0,s.jsx)(x.pj,{children:(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:t.status})}),(0,s.jsx)(x.pj,{children:(0,s.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>e.push("/admin/caravanas/".concat(t.id)),children:["Gerenciar ",(0,s.jsx)(N.Z,{className:"ml-2 h-4 w-4"})]})})]},t.id)):(0,s.jsx)(x.SC,{children:(0,s.jsx)(x.pj,{colSpan:5,className:"h-24 text-center",children:"Nenhum evento de Multir\xe3o encontrado."})})})]})})]}),(0,s.jsx)(m.Vq,{open:D,onOpenChange:M,children:(0,s.jsxs)(m.cZ,{children:[(0,s.jsxs)(m.fK,{children:[(0,s.jsx)(m.$N,{children:"Criar Novo Evento de Caravana"}),(0,s.jsx)(m.Be,{children:"Preencha os detalhes abaixo para criar um novo projeto."})]}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(h._,{htmlFor:"eventName",children:"Nome do Evento"}),(0,s.jsx)(f.I,{id:"eventName",value:k,onChange:e=>z(e.target.value),placeholder:"Ex: Multir\xe3o da Sa\xfade - S\xe3o Paulo"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(h._,{children:"Data de In\xedcio"}),(0,s.jsxs)(p.J2,{children:[(0,s.jsx)(p.xo,{asChild:!0,children:(0,s.jsxs)(c.z,{variant:"outline",className:(0,w.cn)("w-full justify-start text-left font-normal",!O&&"text-muted-foreground"),children:[(0,s.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),O?(0,b.WU)(O,"dd/MM/yyyy"):(0,s.jsx)("span",{children:"Selecione a data"})]})}),(0,s.jsx)(p.yk,{className:"w-auto p-0",children:(0,s.jsx)(j.f,{mode:"single",selected:O,onSelect:Z,initialFocus:!0})})]})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(h._,{children:"Data Final"}),(0,s.jsxs)(p.J2,{children:[(0,s.jsx)(p.xo,{asChild:!0,children:(0,s.jsxs)(c.z,{variant:"outline",className:(0,w.cn)("w-full justify-start text-left font-normal",!R&&"text-muted-foreground"),children:[(0,s.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),R?(0,b.WU)(R,"dd/MM/yyyy"):(0,s.jsx)("span",{children:"Selecione a data"})]})}),(0,s.jsx)(p.yk,{className:"w-auto p-0",children:(0,s.jsx)(j.f,{mode:"single",selected:R,onSelect:P,initialFocus:!0})})]})]})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(h._,{htmlFor:"location",children:"Localiza\xe7\xe3o"}),(0,s.jsx)(f.I,{id:"location",value:A,onChange:e=>F(e.target.value),placeholder:"Ex: S\xe3o Paulo, SP"})]})]}),(0,s.jsx)(m.cN,{children:(0,s.jsxs)(c.z,{onClick:W,disabled:I,children:[I&&(0,s.jsx)(v.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvar Evento"]})})]})})]})}},1098:function(e,t,a){"use strict";a.d(t,{f:function(){return i}});var s=a(57437);a(2265);var n=a(21770),r=a(94508),d=a(62869);function i(e){let{className:t,classNames:a,showOutsideDays:i=!0,...o}=e;return(0,s.jsx)(n._,{showOutsideDays:i,className:(0,r.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,r.cn)((0,d.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,r.cn)((0,d.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-red-500 text-white hover:bg-red-600 focus:bg-red-500 font-bold opacity-100",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},...o})}i.displayName="Calendar"},66070:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},SZ:function(){return l},Zb:function(){return d},aY:function(){return c},eW:function(){return u},ll:function(){return o}});var s=a(57437),n=a(2265),r=a(94508);let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...n})});d.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...n})});i.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...n})});o.displayName="CardTitle";let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",a),...n})});l.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",a),...n})});c.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",a),...n})});u.displayName="CardFooter"},57054:function(e,t,a){"use strict";a.d(t,{J2:function(){return i},xo:function(){return o},yk:function(){return l}});var s=a(57437),n=a(2265),r=a(27312),d=a(94508);let i=r.fC,o=r.xz,l=n.forwardRef((e,t)=>{let{className:a,align:n="center",sideOffset:i=4,...o}=e;return(0,s.jsx)(r.h_,{children:(0,s.jsx)(r.VY,{ref:t,align:n,sideOffset:i,className:(0,d.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...o})})});l.displayName=r.VY.displayName}},function(e){e.O(0,[4358,9990,6137,9084,9733,6838,6008,4084,7988,3294,5640,3464,2971,2117,1744],function(){return e(e.s=80319)}),_N_E=e.O()}]);