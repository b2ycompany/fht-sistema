(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3761],{11257:function(e,t,r){Promise.resolve().then(r.bind(r,40072))},40072:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return F}});var a=r(57437),s=r(2265),i=r(51817),n=r(43044),o=r(92369),c=r(60044),l=r(99388),d=r(41671),u=r(44743);let f=(0,r(79205).Z)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var m=r(76865),h=r(84286),p=r(69076),x=r(5978),v=r(17293),g=r(35153),b=r(94508),j=r(46413),y=r(62869),N=r(66070),C=r(95186),w=r(26815),E=r(76818),R=r(12339),k=r(19060),S=r(35974),I=r(6596),A=r(79083),M=r(92651);let D=s.memo(e=>{let{message:t="Carregando..."}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-10 min-h-[150px] w-full",children:[(0,a.jsx)(i.Z,{className:"h-8 w-8 animate-spin text-blue-600"}),(0,a.jsx)("p",{className:"mt-3 text-sm text-gray-600",children:t})]})}),z=s.memo(e=>{let{title:t,message:r}=e;return(0,a.jsxs)("div",{className:"text-center text-sm text-gray-500 py-10 min-h-[150px] flex flex-col items-center justify-center bg-gray-50/70 rounded-md border border-dashed",children:[(0,a.jsx)(n.Z,{className:"w-12 h-12 text-gray-400 mb-4"}),(0,a.jsx)("p",{className:"font-medium text-gray-600 mb-1",children:t}),(0,a.jsx)("p",{children:r})]})}),Z=e=>{let{user:t,onAction:r}=e,[n,u]=(0,s.useState)(t.adminVerificationNotes||""),[f,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)({}),x={personalRg:"RG Pessoal",personalCpf:"CPF Pessoal",professionalCrm:"CRM",photo3x4:"Foto 3x4",addressProof:"Comprov. Endere\xe7o",graduationCertificate:"Cert. Gradua\xe7\xe3o",criminalRecordCert:"Cert. Neg. Criminal",ethicalCert:"Cert. Neg. \xc9tica",debtCert:"Cert. Neg. D\xe9bitos CRM",cv:"Curr\xedculo Vitae",rqe:"RQE",postGradCert:"Cert. P\xf3s/Resid\xeancia",specialistTitle:"T\xedtulo Especialista",recommendationLetter:"Carta Recomenda\xe7\xe3o",socialContract:"Contrato Social",cnpjCard:"Cart\xe3o CNPJ",companyAddressProof:"Comprovante Endere\xe7o Empresa",repRg:"RG do Respons\xe1vel",repCpf:"CPF do Respons\xe1vel",repAddressProof:"Comprovante Endere\xe7o Respons\xe1vel"},v="doctor"===t.role?{...t.documents||{},...t.specialistDocuments||{}}:"hospital"===t.role?{...t.hospitalDocs||{},...t.legalRepDocuments||{}}:{},g=(e,t)=>{p(r=>({...r,[e]:{...r[e],selected:t}}))},b=(e,t)=>{p(r=>({...r,[e]:{...r[e],reason:t}}))},j=async e=>{m(!0);let a={};if("REJECTED_NEEDS_RESUBMISSION"===e&&(Object.entries(h).forEach(e=>{var t;let[r,s]=e;s.selected&&(null===(t=s.reason)||void 0===t?void 0:t.trim())&&(a[r]=s.reason.trim())}),0===Object.keys(a).length)){alert("Para solicitar corre\xe7\xf5es, selecione pelo menos um documento e escreva o motivo."),m(!1);return}try{await r(t.uid,e,n,a)}finally{m(!1)}};return(0,a.jsxs)(N.Zb,{className:"border-l-4 border-yellow-500",children:[(0,a.jsx)(N.Ol,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(N.ll,{className:"flex items-center gap-2",children:["doctor"===t.role?(0,a.jsx)(o.Z,{size:20}):(0,a.jsx)(c.Z,{size:20})," ",t.displayName]}),(0,a.jsxs)(N.SZ,{children:["doctor"===t.role?"M\xe9dico(a)":"Hospital"," - ",t.email]})]}),(0,a.jsx)(S.C,{variant:"outline",children:"Pendente de Revis\xe3o"})]})}),(0,a.jsxs)(N.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-sm mb-2",children:"Selecione os docs para corre\xe7\xf5es"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-2",children:Object.entries(v).map(e=>{var t,r;let[s,i]=e;if(!i)return null;let n=null===(t=h[s])||void 0===t?void 0:t.selected;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(k.X,{id:s,checked:n,onCheckedChange:e=>g(s,e)}),(0,a.jsx)("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm flex items-center gap-2",children:x[s]||s})]}),n&&(0,a.jsx)(E.g,{placeholder:"Motivo...",value:(null===(r=h[s])||void 0===r?void 0:r.reason)||"",onChange:e=>b(s,e.target.value),className:"h-20"})]},s)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(w._,{htmlFor:"notes-".concat(t.uid),children:"Observa\xe7\xf5es Gerais"}),(0,a.jsx)(E.g,{id:"notes-".concat(t.uid),value:n,onChange:e=>u(e.target.value),disabled:f})]})]}),(0,a.jsxs)(N.eW,{className:"flex justify-end gap-3",children:[(0,a.jsxs)(y.z,{variant:"destructive",onClick:()=>j("REJECTED_NEEDS_RESUBMISSION"),disabled:f,children:[f?(0,a.jsx)(i.Z,{className:"animate-spin"}):(0,a.jsx)(l.Z,{}),"Pedir Corre\xe7\xe3o"]}),(0,a.jsxs)(y.z,{onClick:()=>j("APPROVED"),disabled:f,children:[f?(0,a.jsx)(i.Z,{className:"animate-spin"}):(0,a.jsx)(d.Z,{}),"Aprovar Cadastro"]})]})]})},P=e=>{let{matchId:t,target:r}=e,{user:n}=(0,j.a)(),[o,c]=(0,s.useState)([]),[l,d]=(0,s.useState)(""),[f,m]=(0,s.useState)(!1),h=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(!t)return;let e=(0,A.Ay)(t,r,c);return()=>e()},[t,r]),(0,s.useEffect)(()=>{var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[o]);let p=async e=>{if(e.preventDefault(),l.trim()&&n){m(!0);try{await (0,A.D_)(t,l,r),d("")}catch(e){console.error("Erro ao enviar mensagem para ".concat(r,":"),e)}finally{m(!1)}}};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"border bg-slate-50 rounded-lg p-2 h-56 overflow-y-auto flex flex-col gap-2",children:[0===o.length&&(0,a.jsx)("p",{className:"text-center text-xs text-gray-500 p-4",children:"Nenhuma mensagem neste canal."}),o.map(e=>(0,a.jsx)("div",{className:(0,b.cn)("flex flex-col w-full",e.senderId===(null==n?void 0:n.uid)?"items-end":"items-start"),children:(0,a.jsxs)("div",{className:(0,b.cn)("p-2 rounded-lg max-w-[85%]","admin"===e.senderRole?"bg-blue-600 text-white":"bg-gray-200 text-gray-800"),children:[(0,a.jsxs)("p",{className:"text-xs font-bold",children:[e.senderName," (",e.senderRole,")"]}),(0,a.jsx)("p",{className:"text-sm break-words",children:e.text})]})},e.id)),(0,a.jsx)("div",{ref:h})]}),(0,a.jsxs)("form",{onSubmit:p,className:"flex gap-2 mt-2",children:[(0,a.jsx)(C.I,{value:l,onChange:e=>d(e.target.value),placeholder:"Digite sua mensagem...",disabled:f}),(0,a.jsx)(y.z,{type:"submit",disabled:f||!l.trim(),size:"icon",children:f?(0,a.jsx)(i.Z,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(u.Z,{size:16})})]})]})},O=e=>{var t,r,n,o,c,u;let{match:h,onApproveMatch:p,onRejectMatch:v}=e,[g,j]=(0,s.useState)(""),[k,A]=(0,s.useState)(!1),[M,D]=(0,s.useState)(String(h.doctorDesiredRate)),[z,Z]=(0,s.useState)(String(h.offeredRateByHospital)),O=async()=>{A(!0);try{let e=parseFloat(M),t=parseFloat(z);await p(h.id,e,t,10,g)}finally{A(!1)}},F=async()=>{if(!g.trim()){alert("Para rejeitar, preencha as observa\xe7\xf5es como motivo.");return}A(!0);try{await v(h.id,g)}finally{A(!1)}},_=h.matchedDate instanceof x.EK?h.matchedDate.toDate().toLocaleDateString("pt-BR"):"Data inv\xe1lida",V="".concat((null===(t=h.shiftCities)||void 0===t?void 0:t.join(", "))||"Cidade?",", ").concat(h.shiftState||"Estado?"),T=h.doctorDesiredRate>h.offeredRateByHospital,B=T?"border-red-500":(c=null!==(r=h.matchScore)&&void 0!==r?r:0)>=10?"border-green-500":c>=6?"border-blue-500":"border-gray-300";return(0,a.jsxs)(N.Zb,{className:(0,b.cn)("border-l-4 transition-all duration-300",B),children:[(0,a.jsx)(N.Ol,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start flex-wrap gap-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(N.ll,{className:"text-lg",children:["Match: ",h.shiftRequirementSpecialties.join(", ")]}),(0,a.jsxs)(N.SZ,{children:[h.hospitalName," â†” ",h.doctorName]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(S.C,{variant:(u=null!==(n=h.matchScore)&&void 0!==n?n:0)>=10?"default":u>=6?"secondary":"destructive",className:"flex items-center gap-1.5 text-sm py-1 px-3",children:[(0,a.jsx)(f,{size:14}),(0,a.jsxs)("span",{children:["Score: ",null!==(o=h.matchScore)&&void 0!==o?o:0]})]}),T&&(0,a.jsxs)(S.C,{variant:"destructive",className:"flex items-center gap-1.5",children:[(0,a.jsx)(m.Z,{size:14}),"Negocia\xe7\xe3o Recomendada"]})]})]})}),(0,a.jsx)(N.aY,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"space-y-2 p-3 bg-gray-50 rounded-md",children:[(0,a.jsx)("h4",{className:"font-bold",children:"Demanda do Hospital"}),(0,a.jsxs)("p",{children:["Local: ",V]}),(0,a.jsxs)("p",{children:["Data: ",_]}),(0,a.jsxs)("p",{children:["Oferecido: ",(0,a.jsxs)("strong",{children:[(0,b.xG)(h.offeredRateByHospital),"/h"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2 p-3 bg-gray-50 rounded-md",children:[(0,a.jsx)("h4",{className:"font-bold",children:"Disponibilidade do M\xe9dico"}),(0,a.jsxs)("p",{children:["Local: ",V]}),(0,a.jsxs)("p",{children:["Data: ",_]}),(0,a.jsxs)("p",{children:["Desejado: ",(0,a.jsxs)("strong",{children:[(0,b.xG)(h.doctorDesiredRate),"/h"]})]})]})]})}),(0,a.jsx)(I.UQ,{type:"single",collapsible:!0,className:"w-full px-6",children:(0,a.jsxs)(I.Qd,{value:"negotiation-tools",children:[(0,a.jsx)(I.o4,{children:"Abrir Ferramentas de Gest\xe3o e Chat"}),(0,a.jsxs)(I.vF,{className:"pt-4 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(w._,{children:"Valor Final / Hora (Hospital)"}),(0,a.jsx)(C.I,{type:"number",value:z,onChange:e=>Z(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(w._,{children:"Valor Final / Hora (M\xe9dico)"}),(0,a.jsx)(C.I,{type:"number",value:M,onChange:e=>D(e.target.value)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(w._,{children:"Observa\xe7\xf5es / Motivo da Rejei\xe7\xe3o"}),(0,a.jsx)(E.g,{value:g,onChange:e=>j(e.target.value)})]}),(0,a.jsxs)("div",{className:"border-t mt-4 pt-4",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2 text-sm",children:"Canais de Negocia\xe7\xe3o"}),(0,a.jsxs)(R.mQ,{defaultValue:"doctor",children:[(0,a.jsxs)(R.dr,{className:"grid w-full grid-cols-2",children:[(0,a.jsx)(R.SP,{value:"doctor",children:"Chat com M\xe9dico"}),(0,a.jsx)(R.SP,{value:"hospital",children:"Chat com Hospital"})]}),(0,a.jsx)(R.nU,{value:"doctor",className:"mt-2",children:(0,a.jsx)(P,{matchId:h.id,target:"doctor"})}),(0,a.jsx)(R.nU,{value:"hospital",className:"mt-2",children:(0,a.jsx)(P,{matchId:h.id,target:"hospital"})})]})]})]})]})}),(0,a.jsxs)(N.eW,{className:"flex justify-end items-center gap-3 pt-6",children:[(0,a.jsxs)(y.z,{variant:"destructive",onClick:F,disabled:k,children:[k?(0,a.jsx)(i.Z,{className:"animate-spin"}):(0,a.jsx)(l.Z,{})," Rejeitar Match"]}),(0,a.jsxs)(y.z,{className:"bg-green-600 hover:bg-green-700",onClick:O,disabled:k,children:[k?(0,a.jsx)(i.Z,{className:"animate-spin"}):(0,a.jsx)(d.Z,{})," Aprovar Match"]})]})]})};function F(){let{toast:e}=(0,g.pm)(),[t,r]=(0,s.useState)("matches"),[i,n]=(0,s.useState)([]),[o,c]=(0,s.useState)([]),[l,d]=(0,s.useState)([]),[u,f]=(0,s.useState)(!0),[m,j]=(0,s.useState)(!0),[C,w]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let t=(0,x.cf)((0,x.IO)((0,x.hJ)(v.db,"users"),(0,x.ar)("documentVerificationStatus","==","PENDING_REVIEW")),e=>{n(e.docs.map(e=>({uid:e.id,...e.data()}))),f(!1)}),r=(0,x.IO)((0,x.hJ)(v.db,"potentialMatches"),(0,x.ar)("status","==","PENDING_BACKOFFICE_REVIEW"),(0,x.Xo)("matchScore","desc"),(0,x.Xo)("createdAt","desc")),a=(0,x.cf)(r,e=>{c(e.docs.map(e=>({id:e.id,...e.data()}))),j(!1)},t=>{console.error("Erro ao buscar matches (verifique o \xedndice do Firestore):",t),e({title:"Erro de Consulta",description:"Falha ao buscar matches. Pode ser necess\xe1rio criar um \xedndice no Firestore. Verifique o console para o link.",variant:"destructive",duration:1e4}),j(!1)}),s=(0,x.cf)((0,x.IO)((0,x.hJ)(v.db,"contracts"),(0,x.Xo)("createdAt","desc")),e=>{d(e.docs.map(e=>({id:e.id,...e.data()}))),w(!1)});return()=>{t(),a(),s()}},[e]);let E=async(t,r,a,s)=>{try{await (0,M.hc)(t,r,a,s),e({title:"Cadastro Atualizado!"})}catch(t){e({title:"Erro",description:t.message,variant:"destructive"})}},k=async(t,r,a,s,i)=>{try{await (0,A.tk)(t,r,a,s,i),e({title:"Match Aprovado!",description:"Contrato enviado ao m\xe9dico."})}catch(t){e({title:"Erro ao Aprovar Match",description:t.message,variant:"destructive"})}},I=async(t,r)=>{try{await (0,A.XS)(t,r),e({title:"Match Rejeitado"})}catch(t){e({title:"Erro",description:t.message,variant:"destructive"})}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight text-gray-800 flex items-center gap-2",children:[(0,a.jsx)(h.Z,{size:28})," Painel de Controlo"]}),(0,a.jsxs)(y.z,{variant:"outline",size:"sm",disabled:!0,children:[(0,a.jsx)(p.Z,{className:(0,b.cn)("mr-2 h-4 w-4",(u||m||C)&&"animate-spin")}),"Sincronizado"]})]}),(0,a.jsxs)(R.mQ,{value:t,onValueChange:r,className:"w-full",children:[(0,a.jsxs)(R.dr,{className:"grid w-full grid-cols-3",children:[(0,a.jsxs)(R.SP,{value:"verification",children:["Verifica\xe7\xf5es",(0,a.jsx)(S.C,{variant:"destructive",className:"ml-2",children:u?"...":i.length})]}),(0,a.jsxs)(R.SP,{value:"matches",children:["Revis\xe3o de Matches",(0,a.jsx)(S.C,{variant:"destructive",className:"ml-2",children:m?"...":o.length})]}),(0,a.jsx)(R.SP,{value:"contracts",children:"Gest\xe3o de Contratos"})]}),(0,a.jsx)(R.nU,{value:"verification",className:"mt-4",children:(0,a.jsxs)(N.Zb,{children:[(0,a.jsxs)(N.Ol,{children:[(0,a.jsx)(N.ll,{children:"Cadastros Pendentes"}),(0,a.jsx)(N.SZ,{children:"Aprove ou solicite corre\xe7\xf5es."})]}),(0,a.jsx)(N.aY,{className:"pt-4",children:u?(0,a.jsx)(D,{}):0===i.length?(0,a.jsx)(z,{title:"Nenhum cadastro para verificar",message:"Todos est\xe3o em dia."}):(0,a.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,a.jsx)(Z,{user:e,onAction:E},e.uid))})})]})}),(0,a.jsx)(R.nU,{value:"matches",className:"mt-4",children:(0,a.jsxs)(N.Zb,{children:[(0,a.jsxs)(N.Ol,{children:[(0,a.jsx)(N.ll,{children:"Matches Pendentes para Revis\xe3o"}),(0,a.jsx)(N.SZ,{children:"Aprove, negocie ou rejeite as combina\xe7\xf5es pendentes."})]}),(0,a.jsx)(N.aY,{className:"pt-4 space-y-4",children:m?(0,a.jsx)(D,{}):0===o.length?(0,a.jsx)(z,{title:"Nenhum match aguardando",message:"Novas combina\xe7\xf5es aparecer\xe3o aqui."}):o.map(e=>(0,a.jsx)(O,{match:e,onApproveMatch:k,onRejectMatch:I},e.id))})]})}),(0,a.jsx)(R.nU,{value:"contracts",className:"mt-4",children:(0,a.jsxs)(N.Zb,{children:[(0,a.jsx)(N.Ol,{children:(0,a.jsx)(N.ll,{children:"A ser implementado"})}),(0,a.jsx)(N.aY,{children:(0,a.jsx)(z,{title:"Gest\xe3o de Contratos",message:"Esta \xe1rea mostrar\xe1 o hist\xf3rico de todos os contratos gerados."})})]})})]})]})}},6596:function(e,t,r){"use strict";r.d(t,{Qd:function(){return l},UQ:function(){return c},o4:function(){return d},vF:function(){return u}});var a=r(57437),s=r(2265),i=r(13134),n=r(40875),o=r(94508);let c=i.fC,l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(i.ck,{ref:t,className:(0,o.cn)("border-b",r),...s})});l.displayName="AccordionItem";let d=s.forwardRef((e,t)=>{let{className:r,children:s,...c}=e;return(0,a.jsx)(i.h4,{className:"flex",children:(0,a.jsxs)(i.xz,{ref:t,className:(0,o.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",r),...c,children:[s,(0,a.jsx)(n.Z,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});d.displayName=i.xz.displayName;let u=s.forwardRef((e,t)=>{let{className:r,children:s,...n}=e;return(0,a.jsx)(i.VY,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:(0,a.jsx)("div",{className:(0,o.cn)("pb-4 pt-0",r),children:s})})});u.displayName=i.VY.displayName},35974:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var a=r(57437);r(2265);var s=r(90535),i=r(94508);let n=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)(n({variant:r}),t),...s})}},62869:function(e,t,r){"use strict";r.d(t,{d:function(){return c},z:function(){return l}});var a=r(57437),s=r(2265),i=r(37053),n=r(90535),o=r(94508);let c=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:l=!1,...d}=e,u=l?i.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(c({variant:s,size:n,className:r})),ref:t,...d})});l.displayName="Button"},66070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return l},Zb:function(){return n},aY:function(){return d},eW:function(){return u},ll:function(){return c}});var a=r(57437),s=r(2265),i=r(94508);let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});n.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});c.displayName="CardTitle";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...s})});l.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},19060:function(e,t,r){"use strict";r.d(t,{X:function(){return c}});var a=r(57437),s=r(2265),i=r(9270),n=r(30401),o=r(94508);let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(i.fC,{ref:t,className:(0,o.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...s,children:(0,a.jsx)(i.z$,{className:(0,o.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})})});c.displayName=i.fC.displayName},95186:function(e,t,r){"use strict";r.d(t,{I:function(){return n}});var a=r(57437),s=r(2265),i=r(94508);let n=s.forwardRef((e,t)=>{let{className:r,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});n.displayName="Input"},26815:function(e,t,r){"use strict";r.d(t,{_:function(){return l}});var a=r(57437),s=r(2265),i=r(6394),n=r(90535),o=r(94508);let c=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(i.f,{ref:t,className:(0,o.cn)(c(),r),...s})});l.displayName=i.f.displayName},12339:function(e,t,r){"use strict";r.d(t,{SP:function(){return l},dr:function(){return c},mQ:function(){return o},nU:function(){return d}});var a=r(57437),s=r(2265),i=r(20271),n=r(94508);let o=i.fC,c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(i.aV,{ref:t,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...s})});c.displayName=i.aV.displayName;let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(i.xz,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...s})});l.displayName=i.xz.displayName;let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(i.VY,{ref:t,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...s})});d.displayName=i.VY.displayName},76818:function(e,t,r){"use strict";r.d(t,{g:function(){return n}});var a=r(57437),s=r(2265),i=r(94508);let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...s})});n.displayName="Textarea"},79083:function(e,t,r){"use strict";r.d(t,{tk:function(){return d},Ay:function(){return m},o1:function(){return c},c6:function(){return l},XS:function(){return u},D_:function(){return f}});var a=r(5978),s=r(17293);let i=async e=>{try{await (0,a.ET)((0,a.hJ)(s.db,"mail"),e)}catch(e){console.error("Erro ao solicitar envio de email:",e)}},n=(e,t,r,a)=>{if(!e){console.warn("Tentativa de enviar email sem um destinat\xe1rio.");return}let s={to:e,message:{subject:"Parab\xe9ns, Dr(a). ".concat(t,"! Voc\xea tem um novo contrato para assinar."),html:'\n                <div style="font-family: Arial, sans-serif; line-height: 1.6; color: #333;">\n                    <h2 style="color: #0056b3;">Ol\xe1, Dr(a). '.concat(t,",</h2>\n                    <p>Temos uma excelente not\xedcia! A sua disponibilidade foi aceite pelo hospital <strong>").concat(r,"</strong>.</p>\n                    <p>Um novo contrato (ID: ").concat(a,') est\xe1 aguardando a sua revis\xe3o e assinatura na plataforma FHT Gest\xe3o.</p>\n                    <div style="margin: 30px 0;">\n                        <a \n                            href="').concat("https://www.fhtgestao.com.br/dashboard/contracts",'" \n                            style="padding: 12px 24px; background-color: #28a745; color: white; text-decoration: none; border-radius: 5px; font-size: 16px; font-weight: bold;"\n                        >\n                            Ver Meus Contratos\n                        </a>\n                    </div>\n                    <p>Atenciosamente,<br><strong>Equipa FHT Gest\xe3o</strong></p>\n                    <hr>\n                    <p style="font-size: 12px; color: #777;">Este \xe9 um email autom\xe1tico. Por favor, n\xe3o responda.</p>\n                </div>\n            ')}};console.log("[NotificationService] A preparar para enviar email para: ".concat(e)),i(s)};var o=r(92651);let c=async()=>{let e=s.I8.currentUser;if(!e)return[];try{let t=(0,a.IO)((0,a.hJ)(s.db,"potentialMatches"),(0,a.ar)("doctorId","==",e.uid),(0,a.ar)("status","==","PENDING_BACKOFFICE_REVIEW"),(0,a.Xo)("createdAt","desc"));return(await (0,a.PL)(t)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("[getMatchesForDoctorInNegotiation] Erro:",e),Error("Falha ao carregar as propostas em negocia\xe7\xe3o.")}},l=async()=>{let e=s.I8.currentUser;if(!e)return[];try{let t=(0,a.IO)((0,a.hJ)(s.db,"potentialMatches"),(0,a.ar)("hospitalId","==",e.uid),(0,a.ar)("status","==","PENDING_BACKOFFICE_REVIEW"),(0,a.Xo)("createdAt","desc"));return(await (0,a.PL)(t)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("[getMatchesForHospitalInNegotiation] Erro:",e),Error("Falha ao carregar as propostas em negocia\xe7\xe3o.")}},d=async(e,t,r,i,o)=>{let c=s.I8.currentUser;if(!c)throw Error("Admin n\xe3o logado.");let l=(0,a.JU)(s.db,"potentialMatches",e),d="",u={doctorEmail:"",doctorName:"",hospitalName:""};try{await (0,a.i3)(s.db,async e=>{var n,f;let m=await e.get(l);if(!m.exists())throw Error("Match n\xe3o encontrado.");let h=m.data(),p=(0,a.JU)(s.db,"users",h.doctorId),x=await e.get(p);u={doctorEmail:null===(n=x.data())||void 0===n?void 0:n.email,doctorName:h.doctorName||"N/A",hospitalName:h.hospitalName||"N/A"};let v=r-t;if(v<0)throw Error("O valor final do m\xe9dico n\xe3o pode ser maior que o valor final do hospital.");let g=(0,a.JU)((0,a.hJ)(s.db,"contracts"));d=g.id;let b={shiftRequirementId:h.shiftRequirementId,timeSlotId:h.timeSlotId,doctorId:h.doctorId,hospitalId:h.hospitalId,doctorName:h.doctorName||"N/A",hospitalName:h.hospitalName||"N/A",shiftDates:[h.matchedDate],startTime:h.shiftRequirementStartTime,endTime:h.shiftRequirementEndTime,isOvernight:h.shiftRequirementIsOvernight,serviceType:h.shiftRequirementServiceType,specialties:h.shiftRequirementSpecialties,locationCity:(null===(f=h.shiftCities)||void 0===f?void 0:f[0])||h.shiftCity||"N/A",locationState:h.shiftState||"N/A",hospitalRate:r,doctorRate:t,platformMarginRate:v,platformMarginPercentage:i,status:"PENDING_DOCTOR_SIGNATURE",createdAt:(0,a.Bt)(),updatedAt:(0,a.Bt)()};e.set(g,b),e.update(l,{status:"BACKOFFICE_APPROVED_CONTRACT_CREATED",negotiatedRateForDoctor:t,negotiatedRateForHospital:r,backofficeReviewerId:c.uid,backofficeReviewedAt:(0,a.Bt)(),backofficeNotes:o||"",updatedAt:(0,a.Bt)(),contractId:d})}),u.doctorEmail&&d&&n(u.doctorEmail,u.doctorName,u.hospitalName,d)}catch(e){throw console.error("Falha ao aprovar match:",e),Error("Falha ao aprovar match: ".concat(e.message))}},u=async(e,t)=>{let r=s.I8.currentUser;if(!r)throw Error("Admin n\xe3o est\xe1 logado.");if(!t.trim())throw Error("Justificativa \xe9 obrigat\xf3ria.");let i=(0,a.JU)(s.db,"potentialMatches",e);try{await (0,a.r7)(i,{status:"BACKOFFICE_REJECTED",backofficeReviewerId:r.uid,backofficeReviewedAt:(0,a.Bt)(),backofficeNotes:t,updatedAt:(0,a.Bt)()})}catch(t){throw console.error("Falha ao rejeitar match ".concat(e,":"),t),Error("Falha ao rejeitar match: ".concat(t.message))}},f=async(e,t,r)=>{let i=s.I8.currentUser,n=await (0,o.Ts)();if(!i||!n)throw Error("Utilizador n\xe3o autenticado.");if(!t.trim())throw Error("A mensagem n\xe3o pode estar vazia.");let c=(0,a.hJ)(s.db,"potentialMatches",e,"doctor"===r?"chatWithDoctor":"chatWithHospital");await (0,a.ET)(c,{text:t.trim(),senderId:i.uid,senderName:n.displayName||"Utilizador",senderRole:n.role,createdAt:(0,a.Bt)()})},m=(e,t,r)=>{let i=(0,a.hJ)(s.db,"potentialMatches",e,"doctor"===t?"chatWithDoctor":"chatWithHospital"),n=(0,a.IO)(i,(0,a.Xo)("createdAt","asc"));return(0,a.cf)(n,e=>{r(e.docs.map(e=>({id:e.id,...e.data()})))})}},60044:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},30401:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},41671:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},99388:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},51817:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},84286:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},92369:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9270:function(e,t,r){"use strict";r.d(t,{fC:function(){return y},z$:function(){return C}});var a=r(2265),s=r(98575),i=r(73966),n=r(6741),o=r(80886),c=r(6718),l=r(90420),d=r(71599),u=r(66840),f=r(57437),m="Checkbox",[h,p]=(0,i.b)(m),[x,v]=h(m);function g(e){let{__scopeCheckbox:t,checked:r,children:s,defaultChecked:i,disabled:n,form:c,name:l,onCheckedChange:d,required:u,value:h="on",internal_do_not_use_render:p}=e,[v,g]=(0,o.T)({prop:r,defaultProp:null!=i&&i,onChange:d,caller:m}),[b,j]=a.useState(null),[y,N]=a.useState(null),C=a.useRef(!1),w=!b||!!c||!!b.closest("form"),E={checked:v,disabled:n,setChecked:g,control:b,setControl:j,name:l,form:c,value:h,hasConsumerStoppedPropagationRef:C,required:u,defaultChecked:!R(i)&&i,isFormControl:w,bubbleInput:y,setBubbleInput:N};return(0,f.jsx)(x,{scope:t,...E,children:"function"==typeof p?p(E):s})}var b="CheckboxTrigger",j=a.forwardRef((e,t)=>{let{__scopeCheckbox:r,onKeyDown:i,onClick:o,...c}=e,{control:l,value:d,disabled:m,checked:h,required:p,setControl:x,setChecked:g,hasConsumerStoppedPropagationRef:j,isFormControl:y,bubbleInput:N}=v(b,r),C=(0,s.e)(t,x),w=a.useRef(h);return a.useEffect(()=>{let e=null==l?void 0:l.form;if(e){let t=()=>g(w.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[l,g]),(0,f.jsx)(u.WV.button,{type:"button",role:"checkbox","aria-checked":R(h)?"mixed":h,"aria-required":p,"data-state":k(h),"data-disabled":m?"":void 0,disabled:m,value:d,...c,ref:C,onKeyDown:(0,n.Mj)(i,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,n.Mj)(o,e=>{g(e=>!!R(e)||!e),N&&y&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})})});j.displayName=b;var y=a.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:a,checked:s,defaultChecked:i,required:n,disabled:o,value:c,onCheckedChange:l,form:d,...u}=e;return(0,f.jsx)(g,{__scopeCheckbox:r,checked:s,defaultChecked:i,disabled:o,required:n,onCheckedChange:l,name:a,form:d,value:c,internal_do_not_use_render:e=>{let{isFormControl:a}=e;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(j,{...u,ref:t,__scopeCheckbox:r}),a&&(0,f.jsx)(E,{__scopeCheckbox:r})]})}})});y.displayName=m;var N="CheckboxIndicator",C=a.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:a,...s}=e,i=v(N,r);return(0,f.jsx)(d.z,{present:a||R(i.checked)||!0===i.checked,children:(0,f.jsx)(u.WV.span,{"data-state":k(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});C.displayName=N;var w="CheckboxBubbleInput",E=a.forwardRef((e,t)=>{let{__scopeCheckbox:r,...i}=e,{control:n,hasConsumerStoppedPropagationRef:o,checked:d,defaultChecked:m,required:h,disabled:p,name:x,value:g,form:b,bubbleInput:j,setBubbleInput:y}=v(w,r),N=(0,s.e)(t,y),C=(0,c.D)(d),E=(0,l.t)(n);a.useEffect(()=>{if(!j)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!o.current;if(C!==d&&e){let r=new Event("click",{bubbles:t});j.indeterminate=R(d),e.call(j,!R(d)&&d),j.dispatchEvent(r)}},[j,C,d,o]);let k=a.useRef(!R(d)&&d);return(0,f.jsx)(u.WV.input,{type:"checkbox","aria-hidden":!0,defaultChecked:null!=m?m:k.current,required:h,disabled:p,name:x,value:g,form:b,...i,tabIndex:-1,ref:N,style:{...i.style,...E,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function R(e){return"indeterminate"===e}function k(e){return R(e)?"indeterminate":e?"checked":"unchecked"}E.displayName=w},99255:function(e,t,r){"use strict";r.d(t,{M:function(){return c}});var a,s=r(2265),i=r(61188),n=(a||(a=r.t(s,2)))[" useId ".trim().toString()]||(()=>void 0),o=0;function c(e){let[t,r]=s.useState(n());return(0,i.b)(()=>{e||r(e=>e??String(o++))},[e]),e||(t?`radix-${t}`:"")}},6394:function(e,t,r){"use strict";r.d(t,{f:function(){return o}});var a=r(2265),s=r(66840),i=r(57437),n=a.forwardRef((e,t)=>(0,i.jsx)(s.WV.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var o=n},6718:function(e,t,r){"use strict";r.d(t,{D:function(){return s}});var a=r(2265);function s(e){let t=a.useRef({value:e,previous:e});return a.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}},90420:function(e,t,r){"use strict";r.d(t,{t:function(){return i}});var a=r(2265),s=r(61188);function i(e){let[t,r]=a.useState(void 0);return(0,s.b)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let a,s;if(!Array.isArray(t)||!t.length)return;let i=t[0];if("borderBoxSize"in i){let e=i.borderBoxSize,t=Array.isArray(e)?e[0]:e;a=t.inlineSize,s=t.blockSize}else a=e.offsetWidth,s=e.offsetHeight;r({width:a,height:s})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}}},function(e){e.O(0,[4358,9990,6137,9084,9733,4517,9029,1742,2971,2117,1744],function(){return e(e.s=11257)}),_N_E=e.O()}]);