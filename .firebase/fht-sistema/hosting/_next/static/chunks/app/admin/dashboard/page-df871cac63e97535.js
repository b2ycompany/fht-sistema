(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8427],{66247:function(e,t,r){Promise.resolve().then(r.bind(r,18681))},18681:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return M}});var s=r(57437),a=r(2265),n=r(5978),i=r(17293),o=r(35153),l=r(56739),d=r(38549),c=r(26062),u=r(52255),f=r(66916),h=r(47625),m=r(21156),x=r(56940),p=r(97059),g=r(62994),j=r(8147),v=r(22190),y=r(54061),b=r(77031),N=r(83046),w=r(66070),S=r(51817),$=r(95252),A=r(48736),T=r(95805),I=r(60044),O=r(84286),R=r(94508),_=r(27648),D=r(62869);let E=e=>{let{title:t,value:r,icon:a,description:n,isLoading:i}=e;return(0,s.jsxs)(w.Zb,{children:[(0,s.jsxs)(w.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(w.ll,{className:"text-sm font-medium",children:t}),(0,s.jsx)(a,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(w.aY,{children:[i?(0,s.jsx)(S.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"}):(0,s.jsx)("div",{className:"text-2xl font-bold",children:r}),n&&!i&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:n})]})]})},C=()=>(0,s.jsx)("div",{className:"flex h-[350px] w-full items-center justify-center",children:(0,s.jsx)(S.Z,{className:"h-8 w-8 animate-spin text-primary"})});function M(){let{toast:e}=(0,o.pm)(),[t,r]=(0,a.useState)([]),[S,M]=(0,a.useState)([]),[k,Z]=(0,a.useState)(0),[F,G]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=(0,n.IO)((0,n.hJ)(i.db,"contracts"),(0,n.Xo)("createdAt","desc")),t=(0,n.IO)((0,n.hJ)(i.db,"users")),s=(0,n.IO)((0,n.hJ)(i.db,"potentialMatches"),(0,n.ar)("status","==","PENDING_BACKOFFICE_REVIEW")),a=(0,n.cf)(e,e=>r(e.docs.map(e=>({id:e.id,...e.data()})))),o=(0,n.cf)(t,e=>M(e.docs.map(e=>({uid:e.id,...e.data()})))),l=(0,n.cf)(s,e=>Z(e.size)),d=setTimeout(()=>G(!1),1500);return()=>{a(),o(),l(),clearTimeout(d)}},[]);let z=(0,a.useMemo)(()=>{let e=new Date,r=(0,l.N)(e),s=S.filter(e=>"doctor"===e.role).length,a=S.filter(e=>"hospital"===e.role).length,n=t.filter(e=>e.createdAt.toDate()>=r).reduce((e,t)=>e+(t.hospitalRate-t.doctorRate),0);return{activeDoctors:s,activeHospitals:a,revenueCurrentMonth:n,newContractsCurrentMonth:t.filter(e=>e.createdAt.toDate()>=r).length,monthlyRevenue:Array.from({length:6}).map((r,s)=>{let a=(0,d.W)(e,s),n=(0,l.N)(a),i=(0,c.V)(a),o=t.filter(e=>{let t=e.createdAt.toDate();return t>=n&&t<=i}).reduce((e,t)=>e+(t.hospitalRate-t.doctorRate),0);return{name:(0,u.WU)(a,"MMM/yy",{locale:f.F}),Receita:o}}).reverse(),topHospitals:Object.entries(t.reduce((e,t)=>(e[t.hospitalName]=(e[t.hospitalName]||0)+t.hospitalRate,e),{})).sort((e,t)=>{let[,r]=e,[,s]=t;return s-r}).slice(0,5).map(e=>{let[t,r]=e;return{name:t,"Valor Gasto":r}})}},[t,S]);return(0,s.jsxs)("div",{className:"w-full space-y-6",children:[(0,s.jsx)("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight text-gray-800",children:"Dashboard"}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[(0,s.jsx)(E,{title:"Receita (M\xeas)",value:(0,R.xG)(z.revenueCurrentMonth),icon:$.Z,isLoading:F}),(0,s.jsx)(E,{title:"Novos Contratos (M\xeas)",value:z.newContractsCurrentMonth,icon:A.Z,isLoading:F}),(0,s.jsx)(E,{title:"M\xe9dicos Ativos",value:z.activeDoctors,icon:T.Z,isLoading:F}),(0,s.jsx)(E,{title:"Hospitais Ativos",value:z.activeHospitals,icon:I.Z,isLoading:F}),(0,s.jsxs)(w.Zb,{className:"border-yellow-500 border-2",children:[(0,s.jsxs)(w.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(w.ll,{className:"text-sm font-medium",children:"A\xe7\xf5es Pendentes"}),(0,s.jsx)(O.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(w.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:k}),(0,s.jsx)(_.default,{href:"/admin/matches",children:(0,s.jsx)(D.z,{variant:"link",className:"p-0 h-auto text-xs text-muted-foreground",children:"Ir para o painel de revis\xe3o"})})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4",children:[(0,s.jsxs)(w.Zb,{className:"lg:col-span-3",children:[(0,s.jsxs)(w.Ol,{children:[(0,s.jsx)(w.ll,{children:"Receita Mensal da Plataforma (\xdaltimos 6 meses)"}),(0,s.jsx)(w.SZ,{children:"Evolu\xe7\xe3o da margem de lucro gerada."})]}),(0,s.jsx)(w.aY,{children:F?(0,s.jsx)(C,{}):(0,s.jsx)(h.h,{width:"100%",height:350,children:(0,s.jsxs)(m.w,{data:z.monthlyRevenue,children:[(0,s.jsx)(x.q,{strokeDasharray:"3 3"}),(0,s.jsx)(p.K,{dataKey:"name",stroke:"#888888",fontSize:12}),(0,s.jsx)(g.B,{stroke:"#888888",fontSize:12,tickFormatter:e=>(0,R.xG)(e)}),(0,s.jsx)(j.u,{formatter:e=>(0,R.xG)(e)}),(0,s.jsx)(v.D,{}),(0,s.jsx)(y.x,{type:"monotone",dataKey:"Receita",stroke:"#16a34a",strokeWidth:2})]})})})]}),(0,s.jsxs)(w.Zb,{className:"lg:col-span-2",children:[(0,s.jsxs)(w.Ol,{children:[(0,s.jsx)(w.ll,{children:"Top 5 Hospitais"}),(0,s.jsx)(w.SZ,{children:"Maiores clientes por valor gasto em plant\xf5es."})]}),(0,s.jsx)(w.aY,{children:F?(0,s.jsx)(C,{}):(0,s.jsx)(h.h,{width:"100%",height:350,children:(0,s.jsxs)(b.v,{data:z.topHospitals,layout:"vertical",children:[(0,s.jsx)(x.q,{strokeDasharray:"3 3"}),(0,s.jsx)(p.K,{type:"number",hide:!0}),(0,s.jsx)(g.B,{type:"category",dataKey:"name",width:80,stroke:"#888888",fontSize:12}),(0,s.jsx)(j.u,{formatter:e=>(0,R.xG)(e)}),(0,s.jsx)(v.D,{}),(0,s.jsx)(N.$,{dataKey:"Valor Gasto",fill:"#3b82f6",radius:[4,4,0,0]})]})})})]})]})]})}},62869:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return d}});var s=r(57437),a=r(2265),n=r(37053),i=r(90535),o=r(94508);let l=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,s.jsx)(u,{className:(0,o.cn)(l({variant:a,size:i,className:r})),ref:t,...c})});d.displayName="Button"},66070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},eW:function(){return u},ll:function(){return l}});var s=r(57437),a=r(2265),n=r(94508);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});o.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});l.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},35153:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var s=r(2265);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=o(d,e),l.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=s.useState(d);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},17293:function(e,t,r){"use strict";r.r(t),r.d(t,{app:function(){return l},auth:function(){return d},db:function(){return c},functions:function(){return f},storage:function(){return u}});var s=r(738),a=r(43301),n=r(5978),i=r(60062),o=r(13491);let l=(0,s.C6)().length?(0,s.Mq)():(0,s.ZF)({apiKey:"AIzaSyAyoX1YqAdqHuIvSoj0Yw_FYnhCBv-KfEA",authDomain:"fht-sistema.firebaseapp.com",projectId:"fht-sistema",storageBucket:"fht-sistema.firebasestorage.app",messagingSenderId:"583837273524",appId:"1:583837273524:web:1583addfce581e61ac76e1",measurementId:"G-6FJ2H3G32N"}),d=(0,a.v0)(l),c=(0,n.ad)(l),u=(0,i.cF)(l),f=(0,o.$C)(l,"us-central1")},94508:function(e,t,r){"use strict";r.d(t,{Hq:function(){return d},bx:function(){return l},cn:function(){return n},rl:function(){return o},xG:function(){return i}});var s=r(61994),a=r(53335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,s.W)(t))}let i=e=>null==e||isNaN(e)?"R$ -":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),o=e=>null==e||isNaN(e)?"- %":"".concat(e.toFixed(1),"%"),l=e=>null==e||isNaN(e)?"- h":"".concat(e.toFixed(1)," h"),d=(e,t)=>{if(!e)return e;let r=e.replace(/[^\dX]/gi,"");if("cpf"===t&&11===r.length)return r.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4");if("cnpj"===t&&14===r.length)return r.replace(/^(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})$/,"$1.$2.$3/$4-$5");if("phone"===t)return r.length>10?r.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):r.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3");if("cep"===t&&8===r.length)return r.replace(/(\d{5})(\d{3})/,"$1-$2");if("rg"===t){if(9===r.length)return r.replace(/(\d{2})(\d{3})(\d{3})([\dX])$/,"$1.$2.$3-$4");if(8===r.length)return r.replace(/(\d{1})(\d{3})(\d{3})([\dX])$/,"$1.$2.$3-$4")}return e}}},function(e){e.O(0,[4358,9990,6137,9084,7648,4084,7988,5467,8172,2971,2117,1744],function(){return e(e.s=66247)}),_N_E=e.O()}]);