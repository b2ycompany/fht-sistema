(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8427],{66247:function(e,t,r){Promise.resolve().then(r.bind(r,18681))},18681:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return M}});var s=r(57437),a=r(2265),n=r(5978),o=r(17293),i=r(35153),l=r(56739),c=r(38549),d=r(26062),u=r(52255),f=r(66916),m=r(47625),x=r(21156),h=r(56940),p=r(97059),g=r(62994),j=r(8147),v=r(22190),y=r(54061),N=r(77031),b=r(83046),w=r(66070),S=r(51817),A=r(95252),I=r(48736),O=r(95805),T=r(60044),R=r(84286),_=r(94508),D=r(27648),E=r(62869);let k=e=>{let{title:t,value:r,icon:a,description:n,isLoading:o}=e;return(0,s.jsxs)(w.Zb,{children:[(0,s.jsxs)(w.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(w.ll,{className:"text-sm font-medium",children:t}),(0,s.jsx)(a,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(w.aY,{children:[o?(0,s.jsx)(S.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"}):(0,s.jsx)("div",{className:"text-2xl font-bold",children:r}),n&&!o&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:n})]})]})},C=()=>(0,s.jsx)("div",{className:"flex h-[350px] w-full items-center justify-center",children:(0,s.jsx)(S.Z,{className:"h-8 w-8 animate-spin text-primary"})});function M(){let{toast:e}=(0,i.pm)(),[t,r]=(0,a.useState)([]),[S,M]=(0,a.useState)([]),[Z,F]=(0,a.useState)(0),[G,z]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=(0,n.IO)((0,n.hJ)(o.db,"contracts"),(0,n.Xo)("createdAt","desc")),t=(0,n.IO)((0,n.hJ)(o.db,"users")),s=(0,n.IO)((0,n.hJ)(o.db,"potentialMatches"),(0,n.ar)("status","==","PENDING_BACKOFFICE_REVIEW")),a=(0,n.cf)(e,e=>r(e.docs.map(e=>({id:e.id,...e.data()})))),i=(0,n.cf)(t,e=>M(e.docs.map(e=>({uid:e.id,...e.data()})))),l=(0,n.cf)(s,e=>F(e.size)),c=setTimeout(()=>z(!1),1500);return()=>{a(),i(),l(),clearTimeout(c)}},[]);let K=(0,a.useMemo)(()=>{let e=new Date,r=(0,l.N)(e),s=S.filter(e=>"doctor"===e.role).length,a=S.filter(e=>"hospital"===e.role).length,n=t.filter(e=>e.createdAt.toDate()>=r).reduce((e,t)=>e+(t.hospitalRate-t.doctorRate),0);return{activeDoctors:s,activeHospitals:a,revenueCurrentMonth:n,newContractsCurrentMonth:t.filter(e=>e.createdAt.toDate()>=r).length,monthlyRevenue:Array.from({length:6}).map((r,s)=>{let a=(0,c.W)(e,s),n=(0,l.N)(a),o=(0,d.V)(a),i=t.filter(e=>{let t=e.createdAt.toDate();return t>=n&&t<=o}).reduce((e,t)=>e+(t.hospitalRate-t.doctorRate),0);return{name:(0,u.WU)(a,"MMM/yy",{locale:f.F}),Receita:i}}).reverse(),topHospitals:Object.entries(t.reduce((e,t)=>(e[t.hospitalName]=(e[t.hospitalName]||0)+t.hospitalRate,e),{})).sort((e,t)=>{let[,r]=e,[,s]=t;return s-r}).slice(0,5).map(e=>{let[t,r]=e;return{name:t,"Valor Gasto":r}})}},[t,S]);return(0,s.jsxs)("div",{className:"w-full space-y-6",children:[(0,s.jsx)("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight text-gray-800",children:"Dashboard"}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[(0,s.jsx)(k,{title:"Receita (M\xeas)",value:(0,_.xG)(K.revenueCurrentMonth),icon:A.Z,isLoading:G}),(0,s.jsx)(k,{title:"Novos Contratos (M\xeas)",value:K.newContractsCurrentMonth,icon:I.Z,isLoading:G}),(0,s.jsx)(k,{title:"M\xe9dicos Ativos",value:K.activeDoctors,icon:O.Z,isLoading:G}),(0,s.jsx)(k,{title:"Hospitais Ativos",value:K.activeHospitals,icon:T.Z,isLoading:G}),(0,s.jsxs)(w.Zb,{className:"border-yellow-500 border-2",children:[(0,s.jsxs)(w.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(w.ll,{className:"text-sm font-medium",children:"A\xe7\xf5es Pendentes"}),(0,s.jsx)(R.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(w.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:Z}),(0,s.jsx)(D.default,{href:"/admin/matches",children:(0,s.jsx)(E.z,{variant:"link",className:"p-0 h-auto text-xs text-muted-foreground",children:"Ir para o painel de revis\xe3o"})})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4",children:[(0,s.jsxs)(w.Zb,{className:"lg:col-span-3",children:[(0,s.jsxs)(w.Ol,{children:[(0,s.jsx)(w.ll,{children:"Receita Mensal da Plataforma (\xdaltimos 6 meses)"}),(0,s.jsx)(w.SZ,{children:"Evolu\xe7\xe3o da margem de lucro gerada."})]}),(0,s.jsx)(w.aY,{children:G?(0,s.jsx)(C,{}):(0,s.jsx)(m.h,{width:"100%",height:350,children:(0,s.jsxs)(x.w,{data:K.monthlyRevenue,children:[(0,s.jsx)(h.q,{strokeDasharray:"3 3"}),(0,s.jsx)(p.K,{dataKey:"name",stroke:"#888888",fontSize:12}),(0,s.jsx)(g.B,{stroke:"#888888",fontSize:12,tickFormatter:e=>(0,_.xG)(e)}),(0,s.jsx)(j.u,{formatter:e=>(0,_.xG)(e)}),(0,s.jsx)(v.D,{}),(0,s.jsx)(y.x,{type:"monotone",dataKey:"Receita",stroke:"#16a34a",strokeWidth:2})]})})})]}),(0,s.jsxs)(w.Zb,{className:"lg:col-span-2",children:[(0,s.jsxs)(w.Ol,{children:[(0,s.jsx)(w.ll,{children:"Top 5 Hospitais"}),(0,s.jsx)(w.SZ,{children:"Maiores clientes por valor gasto em plant\xf5es."})]}),(0,s.jsx)(w.aY,{children:G?(0,s.jsx)(C,{}):(0,s.jsx)(m.h,{width:"100%",height:350,children:(0,s.jsxs)(N.v,{data:K.topHospitals,layout:"vertical",children:[(0,s.jsx)(h.q,{strokeDasharray:"3 3"}),(0,s.jsx)(p.K,{type:"number",hide:!0}),(0,s.jsx)(g.B,{type:"category",dataKey:"name",width:80,stroke:"#888888",fontSize:12}),(0,s.jsx)(j.u,{formatter:e=>(0,_.xG)(e)}),(0,s.jsx)(v.D,{}),(0,s.jsx)(b.$,{dataKey:"Valor Gasto",fill:"#3b82f6",radius:[4,4,0,0]})]})})})]})]})]})}},62869:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return c}});var s=r(57437),a=r(2265),n=r(37053),o=r(90535),i=r(94508);let l=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:o,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,s.jsx)(u,{className:(0,i.cn)(l({variant:a,size:o,className:r})),ref:t,...d})});c.displayName="Button"},66070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return o},aY:function(){return d},eW:function(){return u},ll:function(){return l}});var s=r(57437),a=r(2265),n=r(94508);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});o.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});l.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},35153:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var s=r(2265);let a=0,n=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?o(r):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=i(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=s.useState(c);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},17293:function(e,t,r){"use strict";r.d(t,{I8:function(){return c},db:function(){return d},tO:function(){return u},wk:function(){return f}});var s=r(738),a=r(82148),n=r(5978),o=r(96485),i=r(1850);let l=(0,s.C6)().length?(0,s.Mq)():(0,s.ZF)({apiKey:"AIzaSyAyoX1YqAdqHuIvSoj0Yw_FYnhCBv-KfEA",authDomain:"fht-sistema.firebaseapp.com",projectId:"fht-sistema",storageBucket:"fht-sistema.appspot.com",messagingSenderId:"583837273524",appId:"1:583837273524:web:1583addfce581e61ac76e1",measurementId:"G-6FJ2H3G32N"}),c=(0,a.v0)(l),d=(0,n.ad)(l),u=(0,o.cF)(l),f=(0,i.$C)(l,"us-central1")},94508:function(e,t,r){"use strict";r.d(t,{bx:function(){return l},cn:function(){return n},rl:function(){return i},xG:function(){return o}});var s=r(61994),a=r(53335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,s.W)(t))}let o=e=>null==e||isNaN(e)?"R$ -":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),i=e=>null==e||isNaN(e)?"- %":"".concat(e.toFixed(1),"%"),l=e=>null==e||isNaN(e)?"- h":"".concat(e.toFixed(1)," h")}},function(e){e.O(0,[3609,9015,6137,9388,7648,4084,7988,5467,8172,2971,2117,1744],function(){return e(e.s=66247)}),_N_E=e.O()}]);