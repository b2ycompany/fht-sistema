(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3761],{11257:function(e,t,r){Promise.resolve().then(r.bind(r,40072))},40072:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return $}});var a=r(57437),s=r(2265),n=r(51817),i=r(43044),o=r(96362),c=r(60044),l=r(92369),d=r(99388),u=r(41671),h=r(44743);let f=(0,r(79205).Z)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var m=r(76865),p=r(84286),x=r(69076),v=r(5978),g=r(17293),j=r(35153),y=r(94508),b=r(46413),N=r(62869),w=r(66070),C=r(95186),k=r(26815),S=r(76818),E=r(12339),R=r(19060),A=r(35974),D=r(6596),M=r(79083),Z=r(92651);let z=s.memo(e=>{let{message:t="Carregando..."}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-10 min-h-[150px] w-full",children:[(0,a.jsx)(n.Z,{className:"h-8 w-8 animate-spin text-blue-600"}),(0,a.jsx)("p",{className:"mt-3 text-sm text-gray-600",children:t})]})}),I=s.memo(e=>{let{title:t,message:r}=e;return(0,a.jsxs)("div",{className:"text-center text-sm text-gray-500 py-10 min-h-[150px] flex flex-col items-center justify-center bg-gray-50/70 rounded-md border border-dashed",children:[(0,a.jsx)(i.Z,{className:"w-12 h-12 text-gray-400 mb-4"}),(0,a.jsx)("p",{className:"font-medium text-gray-600 mb-1",children:t}),(0,a.jsx)("p",{children:r})]})}),P=e=>{let{user:t,onAction:r}=e,[i,h]=(0,s.useState)(t.adminVerificationNotes||""),[f,m]=(0,s.useState)(!1),[p,x]=(0,s.useState)({}),v={personalRg:"RG Pessoal",personalCpf:"CPF Pessoal",professionalCrm:"CRM",photo3x4:"Foto 3x4",addressProof:"Comprov. Endere\xe7o",graduationCertificate:"Cert. Gradua\xe7\xe3o",criminalRecordCert:"Cert. Neg. Criminal",ethicalCert:"Cert. Neg. \xc9tica",debtCert:"Cert. Neg. D\xe9bitos CRM",cv:"Curr\xedculo Vitae",rqe:"RQE",postGradCert:"Cert. P\xf3s/Resid\xeancia",specialistTitle:"T\xedtulo Especialista",recommendationLetter:"Carta Recomenda\xe7\xe3o",socialContract:"Contrato Social",cnpjCard:"Cart\xe3o CNPJ",companyAddressProof:"Comprovante Endere\xe7o Empresa",repRg:"RG do Respons\xe1vel",repCpf:"CPF do Respons\xe1vel",repAddressProof:"Comprovante Endere\xe7o Respons\xe1vel"},g=(e,t)=>{x(r=>({...r,[e]:{...r[e],selected:t}}))},j=(e,t)=>{x(r=>({...r,[e]:{...r[e],reason:t}}))},y=async e=>{m(!0);let a={};if("REJECTED_NEEDS_RESUBMISSION"===e&&(Object.entries(p).forEach(e=>{var t;let[r,s]=e;s.selected&&(null===(t=s.reason)||void 0===t?void 0:t.trim())&&(a[r]=s.reason.trim())}),0===Object.keys(a).length)){alert("Para solicitar corre\xe7\xf5es, selecione pelo menos um documento e escreva o motivo."),m(!1);return}try{await r(t.uid,e,i,a)}finally{m(!1)}},b=e=>{var t,r;let{docKey:s,url:n}=e;if(!n)return null;let i=null===(t=p[s])||void 0===t?void 0:t.selected;return(0,a.jsxs)("div",{className:"space-y-2 p-2 bg-slate-50 rounded-md border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(R.X,{id:s,checked:i,onCheckedChange:e=>g(s,e)}),(0,a.jsx)(k._,{htmlFor:s,className:"text-sm font-normal",children:v[s]||s})]}),(0,a.jsxs)("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline font-medium text-xs flex items-center gap-1",children:["Ver Documento ",(0,a.jsx)(o.Z,{size:12})]})]}),i&&(0,a.jsx)(S.g,{placeholder:"Motivo da corre\xe7\xe3o para ".concat(v[s]||s,"..."),value:(null===(r=p[s])||void 0===r?void 0:r.reason)||"",onChange:e=>j(s,e.target.value),className:"h-20 mt-2"})]})},C="hospital"===t.userType;return(0,a.jsxs)(w.Zb,{className:"border-l-4 border-yellow-500",children:[(0,a.jsx)(w.Ol,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(w.ll,{className:"flex items-center gap-2",children:[C?(0,a.jsx)(c.Z,{size:20}):(0,a.jsx)(l.Z,{size:20})," ",t.displayName]}),(0,a.jsxs)(w.SZ,{children:[C?"Hospital/Empresa":"M\xe9dico(a)"," - ",t.email]})]}),(0,a.jsx)(A.C,{variant:"outline",children:"Pendente de Revis\xe3o"})]})}),(0,a.jsxs)(w.aY,{className:"space-y-6",children:[(0,a.jsx)(D.UQ,{type:"single",collapsible:!0,className:"w-full",children:(0,a.jsxs)(D.Qd,{value:"documents",children:[(0,a.jsx)(D.o4,{className:"text-base font-semibold",children:"Visualizar e Selecionar Documentos para Corre\xe7\xe3o"}),(0,a.jsxs)(D.vF,{className:"pt-4 space-y-4",children:[C&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-semibold text-sm text-gray-800",children:"Documentos da Empresa"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Object.entries(t.hospitalDocs||{}).map(e=>{let[t,r]=e;return(0,a.jsx)(b,{docKey:t,url:r},t)})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-semibold text-sm text-gray-800",children:"Documentos do Respons\xe1vel Legal"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Object.entries(t.legalRepDocuments||{}).map(e=>{let[t,r]=e;return(0,a.jsx)(b,{docKey:t,url:r},t)})})]})]}),"doctor"===t.userType&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-semibold text-sm",children:"Documentos do M\xe9dico"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Object.entries({...t.documents||{},...t.specialistDocuments||{}}).map(e=>{let[t,r]=e;return(0,a.jsx)(b,{docKey:t,url:r},t)})})]})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(k._,{htmlFor:"notes-".concat(t.uid),children:"Observa\xe7\xf5es Gerais"}),(0,a.jsx)(S.g,{id:"notes-".concat(t.uid),value:i,onChange:e=>h(e.target.value),disabled:f,placeholder:"Adicione observa\xe7\xf5es gerais sobre a aprova\xe7\xe3o ou motivo da rejei\xe7\xe3o..."})]})]}),(0,a.jsxs)(w.eW,{className:"flex justify-end gap-3",children:[(0,a.jsxs)(N.z,{variant:"destructive",onClick:()=>y("REJECTED_NEEDS_RESUBMISSION"),disabled:f,children:[f?(0,a.jsx)(n.Z,{className:"animate-spin"}):(0,a.jsx)(d.Z,{}),"Pedir Corre\xe7\xe3o"]}),(0,a.jsxs)(N.z,{onClick:()=>y("APPROVED"),disabled:f,children:[f?(0,a.jsx)(n.Z,{className:"animate-spin"}):(0,a.jsx)(u.Z,{}),"Aprovar Cadastro"]})]})]})},O=e=>{let{matchId:t,target:r}=e,{user:i}=(0,b.a)(),[o,c]=(0,s.useState)([]),[l,d]=(0,s.useState)(""),[u,f]=(0,s.useState)(!1),m=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(!t)return;let e=(0,M.Ay)(t,r,c);return()=>e()},[t,r]),(0,s.useEffect)(()=>{var e;null===(e=m.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[o]);let p=async e=>{if(e.preventDefault(),l.trim()&&i){f(!0);try{await (0,M.D_)(t,l,r),d("")}catch(e){console.error("Erro ao enviar mensagem para ".concat(r,":"),e)}finally{f(!1)}}};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"border bg-slate-50 rounded-lg p-2 h-56 overflow-y-auto flex flex-col gap-2",children:[0===o.length&&(0,a.jsx)("p",{className:"text-center text-xs text-gray-500 p-4",children:"Nenhuma mensagem neste canal."}),o.map(e=>(0,a.jsx)("div",{className:(0,y.cn)("flex flex-col w-full",e.senderId===(null==i?void 0:i.uid)?"items-end":"items-start"),children:(0,a.jsxs)("div",{className:(0,y.cn)("p-2 rounded-lg max-w-[85%]","admin"===e.senderRole?"bg-blue-600 text-white":"bg-gray-200 text-gray-800"),children:[(0,a.jsxs)("p",{className:"text-xs font-bold",children:[e.senderName," (",e.senderRole,")"]}),(0,a.jsx)("p",{className:"text-sm break-words",children:e.text})]})},e.id)),(0,a.jsx)("div",{ref:m})]}),(0,a.jsxs)("form",{onSubmit:p,className:"flex gap-2 mt-2",children:[(0,a.jsx)(C.I,{value:l,onChange:e=>d(e.target.value),placeholder:"Digite sua mensagem...",disabled:u}),(0,a.jsx)(N.z,{type:"submit",disabled:u||!l.trim(),size:"icon",children:u?(0,a.jsx)(n.Z,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(h.Z,{size:16})})]})]})},V=e=>{var t,r,i,o,c,l;let{match:h,onApproveMatch:p,onRejectMatch:x}=e,[g,j]=(0,s.useState)(""),[b,R]=(0,s.useState)(!1),[M,Z]=(0,s.useState)(String(h.doctorDesiredRate)),[z,I]=(0,s.useState)(String(h.offeredRateByHospital)),P=async()=>{R(!0);try{let e=parseFloat(M),t=parseFloat(z);await p(h.id,e,t,10,g)}finally{R(!1)}},V=async()=>{if(!g.trim()){alert("Para rejeitar, preencha as observa\xe7\xf5es como motivo.");return}R(!0);try{await x(h.id,g)}finally{R(!1)}},$=h.matchedDate instanceof v.EK?h.matchedDate.toDate().toLocaleDateString("pt-BR"):"Data inv\xe1lida",_="".concat((null===(t=h.shiftCities)||void 0===t?void 0:t.join(", "))||"Cidade?",", ").concat(h.shiftState||"Estado?"),F=h.doctorDesiredRate>h.offeredRateByHospital,B=F?"border-red-500":(c=null!==(r=h.matchScore)&&void 0!==r?r:0)>=10?"border-green-500":c>=6?"border-blue-500":"border-gray-300";return(0,a.jsxs)(w.Zb,{className:(0,y.cn)("border-l-4 transition-all duration-300",B),children:[(0,a.jsx)(w.Ol,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start flex-wrap gap-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(w.ll,{className:"text-lg",children:["Match: ",h.shiftRequirementSpecialties.join(", ")]}),(0,a.jsxs)(w.SZ,{children:[h.hospitalName," â†” ",h.doctorName]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(A.C,{variant:(l=null!==(i=h.matchScore)&&void 0!==i?i:0)>=10?"default":l>=6?"secondary":"destructive",className:"flex items-center gap-1.5 text-sm py-1 px-3",children:[(0,a.jsx)(f,{size:14}),(0,a.jsxs)("span",{children:["Score: ",null!==(o=h.matchScore)&&void 0!==o?o:0]})]}),F&&(0,a.jsxs)(A.C,{variant:"destructive",className:"flex items-center gap-1.5",children:[(0,a.jsx)(m.Z,{size:14}),"Negocia\xe7\xe3o Recomendada"]})]})]})}),(0,a.jsx)(w.aY,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"space-y-2 p-3 bg-gray-50 rounded-md",children:[(0,a.jsx)("h4",{className:"font-bold",children:"Demanda do Hospital"}),(0,a.jsxs)("p",{children:["Local: ",_]}),(0,a.jsxs)("p",{children:["Data: ",$]}),(0,a.jsxs)("p",{children:["Oferecido: ",(0,a.jsxs)("strong",{children:[(0,y.xG)(h.offeredRateByHospital),"/h"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2 p-3 bg-gray-50 rounded-md",children:[(0,a.jsx)("h4",{className:"font-bold",children:"Disponibilidade do M\xe9dico"}),(0,a.jsxs)("p",{children:["Local: ",_]}),(0,a.jsxs)("p",{children:["Data: ",$]}),(0,a.jsxs)("p",{children:["Desejado: ",(0,a.jsxs)("strong",{children:[(0,y.xG)(h.doctorDesiredRate),"/h"]})]})]})]})}),(0,a.jsx)(D.UQ,{type:"single",collapsible:!0,className:"w-full px-6",children:(0,a.jsxs)(D.Qd,{value:"negotiation-tools",children:[(0,a.jsx)(D.o4,{children:"Abrir Ferramentas de Gest\xe3o e Chat"}),(0,a.jsxs)(D.vF,{className:"pt-4 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(k._,{children:"Valor Final / Hora (Hospital)"}),(0,a.jsx)(C.I,{type:"number",value:z,onChange:e=>I(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(k._,{children:"Valor Final / Hora (M\xe9dico)"}),(0,a.jsx)(C.I,{type:"number",value:M,onChange:e=>Z(e.target.value)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(k._,{children:"Observa\xe7\xf5es / Motivo da Rejei\xe7\xe3o"}),(0,a.jsx)(S.g,{value:g,onChange:e=>j(e.target.value)})]}),(0,a.jsxs)("div",{className:"border-t mt-4 pt-4",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2 text-sm",children:"Canais de Negocia\xe7\xe3o"}),(0,a.jsxs)(E.mQ,{defaultValue:"doctor",children:[(0,a.jsxs)(E.dr,{className:"grid w-full grid-cols-2",children:[(0,a.jsx)(E.SP,{value:"doctor",children:"Chat com M\xe9dico"}),(0,a.jsx)(E.SP,{value:"hospital",children:"Chat com Hospital"})]}),(0,a.jsx)(E.nU,{value:"doctor",className:"mt-2",children:(0,a.jsx)(O,{matchId:h.id,target:"doctor"})}),(0,a.jsx)(E.nU,{value:"hospital",className:"mt-2",children:(0,a.jsx)(O,{matchId:h.id,target:"hospital"})})]})]})]})]})}),(0,a.jsxs)(w.eW,{className:"flex justify-end items-center gap-3 pt-6",children:[(0,a.jsxs)(N.z,{variant:"destructive",onClick:V,disabled:b,children:[b?(0,a.jsx)(n.Z,{className:"animate-spin"}):(0,a.jsx)(d.Z,{})," Rejeitar Match"]}),(0,a.jsxs)(N.z,{className:"bg-green-600 hover:bg-green-700",onClick:P,disabled:b,children:[b?(0,a.jsx)(n.Z,{className:"animate-spin"}):(0,a.jsx)(u.Z,{})," Aprovar Match"]})]})]})};function $(){let{toast:e}=(0,j.pm)(),[t,r]=(0,s.useState)("verification"),[n,i]=(0,s.useState)([]),[o,c]=(0,s.useState)([]),[l,d]=(0,s.useState)([]),[u,h]=(0,s.useState)(!0),[f,m]=(0,s.useState)(!0),[b,C]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let t=(0,v.cf)((0,v.IO)((0,v.hJ)(g.db,"users"),(0,v.ar)("documentVerificationStatus","==","PENDING_REVIEW")),e=>{i(e.docs.map(e=>({uid:e.id,...e.data()}))),h(!1)}),r=(0,v.IO)((0,v.hJ)(g.db,"potentialMatches"),(0,v.ar)("status","==","PENDING_BACKOFFICE_REVIEW"),(0,v.Xo)("matchScore","desc"),(0,v.Xo)("createdAt","desc")),a=(0,v.cf)(r,e=>{c(e.docs.map(e=>({id:e.id,...e.data()}))),m(!1)},t=>{console.error("Erro ao buscar matches (verifique o \xedndice do Firestore):",t),e({title:"Erro de Consulta",description:"Falha ao buscar matches. Pode ser necess\xe1rio criar um \xedndice no Firestore. Verifique o console para o link.",variant:"destructive",duration:1e4}),m(!1)}),s=(0,v.cf)((0,v.IO)((0,v.hJ)(g.db,"contracts"),(0,v.Xo)("createdAt","desc")),e=>{d(e.docs.map(e=>({id:e.id,...e.data()}))),C(!1)});return()=>{t(),a(),s()}},[e]);let k=async(t,r,a,s)=>{try{await (0,Z.hc)(t,r,a,s),e({title:"Cadastro Atualizado!"})}catch(t){e({title:"Erro",description:t.message,variant:"destructive"})}},S=async(t,r,a,s,n)=>{try{await (0,M.tk)(t,r,a,s,n),e({title:"Match Aprovado!",description:"Contrato enviado ao m\xe9dico."})}catch(t){e({title:"Erro ao Aprovar Match",description:t.message,variant:"destructive"})}},R=async(t,r)=>{try{await (0,M.XS)(t,r),e({title:"Match Rejeitado"})}catch(t){e({title:"Erro",description:t.message,variant:"destructive"})}};return(0,a.jsxs)("div",{className:"space-y-6 p-4 md:p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight text-gray-800 flex items-center gap-2",children:[(0,a.jsx)(p.Z,{size:28})," Painel de Controlo"]}),(0,a.jsxs)(N.z,{variant:"outline",size:"sm",disabled:!0,children:[(0,a.jsx)(x.Z,{className:(0,y.cn)("mr-2 h-4 w-4",(u||f||b)&&"animate-spin")}),"Sincronizado"]})]}),(0,a.jsxs)(E.mQ,{value:t,onValueChange:r,className:"w-full",children:[(0,a.jsxs)(E.dr,{className:"grid w-full grid-cols-3",children:[(0,a.jsxs)(E.SP,{value:"verification",children:["Verifica\xe7\xf5es",(0,a.jsx)(A.C,{variant:n.length>0?"destructive":"secondary",className:"ml-2",children:u?"...":n.length})]}),(0,a.jsxs)(E.SP,{value:"matches",children:["Revis\xe3o de Matches",(0,a.jsx)(A.C,{variant:o.length>0?"destructive":"secondary",className:"ml-2",children:f?"...":o.length})]}),(0,a.jsx)(E.SP,{value:"contracts",children:"Gest\xe3o de Contratos"})]}),(0,a.jsx)(E.nU,{value:"verification",className:"mt-4",children:(0,a.jsxs)(w.Zb,{children:[(0,a.jsxs)(w.Ol,{children:[(0,a.jsx)(w.ll,{children:"Cadastros Pendentes"}),(0,a.jsx)(w.SZ,{children:"Aprove ou solicite corre\xe7\xf5es nos cadastros abaixo."})]}),(0,a.jsx)(w.aY,{className:"pt-4",children:u?(0,a.jsx)(z,{}):0===n.length?(0,a.jsx)(I,{title:"Nenhum cadastro para verificar",message:"Todos est\xe3o em dia."}):(0,a.jsx)("div",{className:"space-y-4",children:n.map(e=>(0,a.jsx)(P,{user:e,onAction:k},e.uid))})})]})}),(0,a.jsx)(E.nU,{value:"matches",className:"mt-4",children:(0,a.jsxs)(w.Zb,{children:[(0,a.jsxs)(w.Ol,{children:[(0,a.jsx)(w.ll,{children:"Matches Pendentes para Revis\xe3o"}),(0,a.jsx)(w.SZ,{children:"Aprove, negocie ou rejeite as combina\xe7\xf5es pendentes."})]}),(0,a.jsx)(w.aY,{className:"pt-4 space-y-4",children:f?(0,a.jsx)(z,{}):0===o.length?(0,a.jsx)(I,{title:"Nenhum match aguardando",message:"Novas combina\xe7\xf5es aparecer\xe3o aqui."}):o.map(e=>(0,a.jsx)(V,{match:e,onApproveMatch:S,onRejectMatch:R},e.id))})]})}),(0,a.jsx)(E.nU,{value:"contracts",className:"mt-4",children:(0,a.jsxs)(w.Zb,{children:[(0,a.jsxs)(w.Ol,{children:[(0,a.jsx)(w.ll,{children:"Gest\xe3o de Contratos"}),(0,a.jsx)(w.SZ,{children:"Esta \xe1rea mostrar\xe1 o hist\xf3rico de todos os contratos gerados."})]}),(0,a.jsx)(w.aY,{children:(0,a.jsx)(I,{title:"A ser implementado",message:"A funcionalidade de gest\xe3o de contratos estar\xe1 dispon\xedvel em breve."})})]})})]})]})}},62869:function(e,t,r){"use strict";r.d(t,{d:function(){return c},z:function(){return l}});var a=r(57437),s=r(2265),n=r(37053),i=r(90535),o=r(94508);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:l=!1,...d}=e,u=l?n.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(c({variant:s,size:i,className:r})),ref:t,...d})});l.displayName="Button"},66070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return l},Zb:function(){return i},aY:function(){return d},eW:function(){return u},ll:function(){return c}});var a=r(57437),s=r(2265),n=r(94508);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});c.displayName="CardTitle";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});l.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},19060:function(e,t,r){"use strict";r.d(t,{X:function(){return c}});var a=r(57437),s=r(2265),n=r(9270),i=r(30401),o=r(94508);let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.fC,{ref:t,className:(0,o.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...s,children:(0,a.jsx)(n.z$,{className:(0,o.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})})});c.displayName=n.fC.displayName},26815:function(e,t,r){"use strict";r.d(t,{_:function(){return l}});var a=r(57437),s=r(2265),n=r(6394),i=r(90535),o=r(94508);let c=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.f,{ref:t,className:(0,o.cn)(c(),r),...s})});l.displayName=n.f.displayName},76818:function(e,t,r){"use strict";r.d(t,{g:function(){return i}});var a=r(57437),s=r(2265),n=r(94508);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...s})});i.displayName="Textarea"},92651:function(e,t,r){"use strict";r.d(t,{CQ:function(){return d},Fl:function(){return x},TX:function(){return h},Ts:function(){return m},XB:function(){return o},bI:function(){return p},c0:function(){return f},hc:function(){return v},l5:function(){return c},pH:function(){return u},q9:function(){return l}});var a=r(43301),s=r(5978),n=r(17293);let i=(0,r(13491).V1)(n.functions,"createStaffUser"),o=async e=>{try{let t=await i(e);if(!t.data.success)throw Error("A fun\xe7\xe3o de backend n\xe3o retornou sucesso.");return t.data.user}catch(e){throw console.error("[AuthService] Erro ao chamar a fun\xe7\xe3o createStaffUser:",e),Error(e.message||"N\xe3o foi poss\xedvel adicionar o membro \xe0 Equipa.")}},c=async e=>{try{let t=(0,s.hJ)(n.db,"users"),r=(0,s.IO)(t,(0,s.ar)("hospitalId","==",e)),a=await (0,s.PL)(r);if(a.empty)return[];return a.docs.map(e=>({uid:e.id,...e.data()})).filter(t=>t.uid!==e)}catch(t){throw console.error("[AuthService] Erro ao buscar a Equipa para o hospital ".concat(e,":"),t),Error("N\xe3o foi poss\xedvel carregar a lista da Equipa.")}},l=async(e,t,r)=>{try{let s=await (0,a.Xb)(n.auth,e,t);return await (0,a.ck)(s.user,{displayName:r}),s.user}catch(e){throw console.error("[AuthService] Erro ao criar usu\xe1rio no Auth:",e),e}},d=async(e,t,r,a,i)=>{let o={};if("doctor"===a){let{documents:e,specialistDocuments:t,invitationToken:r,...a}=i;o={...a,documents:e,specialistDocuments:t,documentVerificationStatus:"PENDING_REVIEW",adminVerificationNotes:"",invitationToken:r||null}}else if("hospital"===a){let{hospitalDocs:e,legalRepDocuments:t,...r}=i;o={companyInfo:{cnpj:r.cnpj,stateRegistration:r.stateRegistration,phone:r.phone,address:r.address},legalRepresentativeInfo:r.legalRepresentativeInfo,hospitalDocs:e,legalRepDocuments:t,documentVerificationStatus:"PENDING_REVIEW",adminVerificationNotes:""}}else if(["receptionist","triage_nurse","caravan_admin","admin","backoffice"].includes(a))o={};else throw Error("Tipo de perfil de registro inv\xe1lido.");let c={uid:e,email:t,displayName:r,userType:a,createdAt:(0,s.Bt)(),updatedAt:(0,s.Bt)(),...o};await (0,s.pl)((0,s.JU)(n.db,"users",e),c),console.log("[AuthService] Perfil ".concat(a," salvo para UID: ").concat(e))},u=async(e,t)=>{try{return(await (0,a.e5)(n.auth,e,t)).user}catch(e){throw console.error("[AuthService] Login error:",e),e}},h=async()=>{try{await (0,a.w7)(n.auth)}catch(e){throw console.error("[AuthService] Logout error:",e),e}},f=async e=>{try{await (0,a.LS)(n.auth,e)}catch(e){throw console.error("[AuthService] Reset error:",e),e}},m=async()=>{let e=n.auth.currentUser;if(!e)return null;try{let t=(0,s.JU)(n.db,"users",e.uid),r=await (0,s.QT)(t);if(r.exists())return{uid:r.id,...r.data()};return null}catch(e){throw console.error("[AuthService] Get current user data error:",e),e}},p=async(e,t)=>{if(!e)throw Error("ID do Doutor n\xe3o fornecido para atualiza\xe7\xe3o.");if(!t||0===Object.keys(t).length){console.warn("[AuthService] Nenhum dado fornecido para atualiza\xe7\xe3o do perfil do doutor.");return}let r=(0,s.JU)(n.db,"users",e),a={};if(Object.keys(t).forEach(e=>{void 0!==t[e]&&("address"===e&&"object"==typeof t.address&&null!==t.address?Object.keys(t.address).forEach(e=>{void 0!==t.address[e]&&(a["address.".concat(e)]=t.address[e])}):a[e]=t[e])}),0===Object.keys(a).length){console.warn("[AuthService] Nenhum dado v\xe1lido para atualizar ap\xf3s filtrar undefined.");return}a.updatedAt=(0,s.Bt)();try{var i;let t=await (0,s.QT)(r);if(!t.exists()||(null===(i=t.data())||void 0===i?void 0:i.userType)!=="doctor")throw Error("Perfil de doutor n\xe3o encontrado ou tipo de usu\xe1rio incorreto para atualiza\xe7\xe3o.");await (0,s.r7)(r,a),console.log("[AuthService] Perfil do doutor ".concat(e," atualizado com sucesso."))}catch(t){throw console.error("[AuthService] Erro ao atualizar perfil do doutor ".concat(e,":"),t),t}},x=async(e,t)=>{try{let r=(0,s.hJ)(n.db,"users"),a=(0,s.IO)(r,(0,s.ar)("userType","==","doctor"),(0,s.ar)("specialties","array-contains",t),(0,s.ar)("healthUnitIds","array-contains",e)),i=await (0,s.PL)(a);if(i.empty)return[];return i.docs.map(e=>({uid:e.id,...e.data()}))}catch(e){throw console.error("[AuthService] Erro ao buscar m\xe9dicos associados por especialidade:",e),Error("N\xe3o foi poss\xedvel carregar a lista de m\xe9dicos para esta unidade.")}},v=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!e)throw Error("ID do usu\xe1rio n\xe3o fornecido.");let i=(0,s.JU)(n.db,"users",e),o={documentVerificationStatus:t,adminVerificationNotes:r,documentRejectionReasons:a,updatedAt:(0,s.Bt)()};"APPROVED"===t&&(o.documentRejectionReasons={},o.adminVerificationNotes="");try{await (0,s.r7)(i,o)}catch(t){throw console.error("Erro ao atualizar status do usu\xe1rio ".concat(e,":"),t),Error("Falha ao atualizar o status do cadastro.")}}},17293:function(e,t,r){"use strict";r.r(t),r.d(t,{app:function(){return c},auth:function(){return l},db:function(){return d},functions:function(){return h},storage:function(){return u}});var a=r(738),s=r(43301),n=r(5978),i=r(60062),o=r(13491);let c=(0,a.C6)().length?(0,a.Mq)():(0,a.ZF)({apiKey:"AIzaSyAyoX1YqAdqHuIvSoj0Yw_FYnhCBv-KfEA",authDomain:"fht-sistema.firebaseapp.com",projectId:"fht-sistema",storageBucket:"fht-sistema.firebasestorage.app",messagingSenderId:"583837273524",appId:"1:583837273524:web:1583addfce581e61ac76e1",measurementId:"G-6FJ2H3G32N"}),l=(0,s.v0)(c),d=(0,n.ad)(c),u=(0,i.cF)(c),h=(0,o.$C)(c,"us-central1")},94508:function(e,t,r){"use strict";r.d(t,{Hq:function(){return l},bx:function(){return c},cn:function(){return n},rl:function(){return o},xG:function(){return i}});var a=r(61994),s=r(53335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}let i=e=>null==e||isNaN(e)?"R$ -":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),o=e=>null==e||isNaN(e)?"- %":"".concat(e.toFixed(1),"%"),c=e=>null==e||isNaN(e)?"- h":"".concat(e.toFixed(1)," h"),l=(e,t)=>{if(!e)return e;let r=e.replace(/[^\dX]/gi,"");if("cpf"===t&&11===r.length)return r.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4");if("cnpj"===t&&14===r.length)return r.replace(/^(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})$/,"$1.$2.$3/$4-$5");if("phone"===t)return r.length>10?r.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):r.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3");if("cep"===t&&8===r.length)return r.replace(/(\d{5})(\d{3})/,"$1-$2");if("rg"===t){if(9===r.length)return r.replace(/(\d{2})(\d{3})(\d{3})([\dX])$/,"$1.$2.$3-$4");if(8===r.length)return r.replace(/(\d{1})(\d{3})(\d{3})([\dX])$/,"$1.$2.$3-$4")}return e}},60044:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},30401:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},41671:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},99388:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},96362:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},51817:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},84286:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},92369:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9270:function(e,t,r){"use strict";r.d(t,{fC:function(){return b},z$:function(){return w}});var a=r(2265),s=r(98575),n=r(73966),i=r(6741),o=r(80886),c=r(6718),l=r(90420),d=r(71599),u=r(66840),h=r(57437),f="Checkbox",[m,p]=(0,n.b)(f),[x,v]=m(f);function g(e){let{__scopeCheckbox:t,checked:r,children:s,defaultChecked:n,disabled:i,form:c,name:l,onCheckedChange:d,required:u,value:m="on",internal_do_not_use_render:p}=e,[v,g]=(0,o.T)({prop:r,defaultProp:null!=n&&n,onChange:d,caller:f}),[j,y]=a.useState(null),[b,N]=a.useState(null),w=a.useRef(!1),C=!j||!!c||!!j.closest("form"),k={checked:v,disabled:i,setChecked:g,control:j,setControl:y,name:l,form:c,value:m,hasConsumerStoppedPropagationRef:w,required:u,defaultChecked:!S(n)&&n,isFormControl:C,bubbleInput:b,setBubbleInput:N};return(0,h.jsx)(x,{scope:t,...k,children:"function"==typeof p?p(k):s})}var j="CheckboxTrigger",y=a.forwardRef((e,t)=>{let{__scopeCheckbox:r,onKeyDown:n,onClick:o,...c}=e,{control:l,value:d,disabled:f,checked:m,required:p,setControl:x,setChecked:g,hasConsumerStoppedPropagationRef:y,isFormControl:b,bubbleInput:N}=v(j,r),w=(0,s.e)(t,x),C=a.useRef(m);return a.useEffect(()=>{let e=null==l?void 0:l.form;if(e){let t=()=>g(C.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[l,g]),(0,h.jsx)(u.WV.button,{type:"button",role:"checkbox","aria-checked":S(m)?"mixed":m,"aria-required":p,"data-state":E(m),"data-disabled":f?"":void 0,disabled:f,value:d,...c,ref:w,onKeyDown:(0,i.Mj)(n,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,i.Mj)(o,e=>{g(e=>!!S(e)||!e),N&&b&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})})});y.displayName=j;var b=a.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:a,checked:s,defaultChecked:n,required:i,disabled:o,value:c,onCheckedChange:l,form:d,...u}=e;return(0,h.jsx)(g,{__scopeCheckbox:r,checked:s,defaultChecked:n,disabled:o,required:i,onCheckedChange:l,name:a,form:d,value:c,internal_do_not_use_render:e=>{let{isFormControl:a}=e;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(y,{...u,ref:t,__scopeCheckbox:r}),a&&(0,h.jsx)(k,{__scopeCheckbox:r})]})}})});b.displayName=f;var N="CheckboxIndicator",w=a.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:a,...s}=e,n=v(N,r);return(0,h.jsx)(d.z,{present:a||S(n.checked)||!0===n.checked,children:(0,h.jsx)(u.WV.span,{"data-state":E(n.checked),"data-disabled":n.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});w.displayName=N;var C="CheckboxBubbleInput",k=a.forwardRef((e,t)=>{let{__scopeCheckbox:r,...n}=e,{control:i,hasConsumerStoppedPropagationRef:o,checked:d,defaultChecked:f,required:m,disabled:p,name:x,value:g,form:j,bubbleInput:y,setBubbleInput:b}=v(C,r),N=(0,s.e)(t,b),w=(0,c.D)(d),k=(0,l.t)(i);a.useEffect(()=>{if(!y)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!o.current;if(w!==d&&e){let r=new Event("click",{bubbles:t});y.indeterminate=S(d),e.call(y,!S(d)&&d),y.dispatchEvent(r)}},[y,w,d,o]);let E=a.useRef(!S(d)&&d);return(0,h.jsx)(u.WV.input,{type:"checkbox","aria-hidden":!0,defaultChecked:null!=f?f:E.current,required:m,disabled:p,name:x,value:g,form:j,...n,tabIndex:-1,ref:N,style:{...n.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function S(e){return"indeterminate"===e}function E(e){return S(e)?"indeterminate":e?"checked":"unchecked"}k.displayName=C},99255:function(e,t,r){"use strict";r.d(t,{M:function(){return c}});var a,s=r(2265),n=r(61188),i=(a||(a=r.t(s,2)))[" useId ".trim().toString()]||(()=>void 0),o=0;function c(e){let[t,r]=s.useState(i());return(0,n.b)(()=>{e||r(e=>e??String(o++))},[e]),e||(t?`radix-${t}`:"")}},6394:function(e,t,r){"use strict";r.d(t,{f:function(){return o}});var a=r(2265),s=r(66840),n=r(57437),i=a.forwardRef((e,t)=>(0,n.jsx)(s.WV.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var o=i},6718:function(e,t,r){"use strict";r.d(t,{D:function(){return s}});var a=r(2265);function s(e){let t=a.useRef({value:e,previous:e});return a.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}},90420:function(e,t,r){"use strict";r.d(t,{t:function(){return n}});var a=r(2265),s=r(61188);function n(e){let[t,r]=a.useState(void 0);return(0,s.b)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let a,s;if(!Array.isArray(t)||!t.length)return;let n=t[0];if("borderBoxSize"in n){let e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;a=t.inlineSize,s=t.blockSize}else a=e.offsetWidth,s=e.offsetHeight;r({width:a,height:s})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}}},function(e){e.O(0,[4358,9990,6137,9084,9733,4517,9029,4533,2971,2117,1744],function(){return e(e.s=11257)}),_N_E=e.O()}]);