(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6716],{80319:function(e,a,t){Promise.resolve().then(t.bind(t,66697))},66697:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return S}});var s=t(57437),r=t(2265),n=t(99376),i=t(17293),d=t(13491),l=t(5978),o=t(46413),c=t(35153),u=t(62869),m=t(66070),x=t(73578),h=t(26110),f=t(95186),p=t(26815),j=t(57054),v=t(1098),y=t(51817),g=t(26937),N=t(76858),b=t(31047),w=t(52255),C=t(94508);let _=()=>{let{toast:e}=(0,c.pm)(),[a,t]=(0,r.useState)(!1),[n,l]=(0,r.useState)("admin@fht.com"),o=async()=>{if(!n){e({title:"Erro",description:"O campo de e-mail n\xe3o pode estar vazio.",variant:"destructive"});return}t(!0);try{let a=(0,d.V1)(i.wk,"setAdminClaim"),t=await a({email:n});e({title:"Sucesso!",description:t.data.message,className:"bg-green-600 text-white"})}catch(a){e({title:"Erro ao definir permiss\xe3o",description:a.message,variant:"destructive"})}finally{t(!1)}};return(0,s.jsxs)(m.Zb,{className:"mb-6 bg-yellow-50 border-yellow-300",children:[(0,s.jsxs)(m.Ol,{children:[(0,s.jsx)(m.ll,{children:"Ferramenta de Administrador: Definir Permiss\xe3o"}),(0,s.jsx)(m.SZ,{children:"Use esta ferramenta uma \xfanica vez para atribuir a permiss\xe3o de 'admin' ao seu utilizador."})]}),(0,s.jsxs)(m.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(p._,{htmlFor:"admin-email",children:"E-mail do Administrador"}),(0,s.jsx)(f.I,{id:"admin-email",value:n,onChange:e=>l(e.target.value)})]}),(0,s.jsxs)(u.z,{onClick:o,disabled:a,children:[a?(0,s.jsx)(y.Z,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Definir Permiss\xe3o de Admin"]})]})]})};function S(){let e=(0,n.useRouter)(),{user:a}=(0,o.a)(),{toast:t}=(0,c.pm)(),[d,S]=(0,r.useState)([]),[E,D]=(0,r.useState)(!0),[z,k]=(0,r.useState)(!1),[M,Z]=(0,r.useState)(""),[O,A]=(0,r.useState)(),[P,R]=(0,r.useState)(),[F,I]=(0,r.useState)(""),[J,U]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=(0,l.IO)((0,l.hJ)(i.db,"caravanEvents"),(0,l.Xo)("startDate","desc")),a=(0,l.cf)(e,e=>{S(e.docs.map(e=>({id:e.id,...e.data()}))),D(!1)},e=>{console.error("Erro de permiss\xe3o no snapshot:",e),D(!1)});return()=>a()},[]);let W=async()=>{if(!M||!O||!P||!F){t({title:"Campos Incompletos",description:"Todos os campos s\xe3o obrigat\xf3rios.",variant:"destructive"});return}if(P<O){t({title:"Datas Inv\xe1lidas",description:"A data final deve ser igual ou posterior \xe0 data inicial.",variant:"destructive"});return}U(!0);try{let e={eventName:M,startDate:l.EK.fromDate(O),endDate:l.EK.fromDate(P),location:F,status:"PLANEJAMENTO",createdAt:(0,l.Bt)()};await (0,l.ET)((0,l.hJ)(i.db,"caravanEvents"),e),t({title:"Sucesso!",description:"O novo evento de multir\xe3o foi criado.",className:"bg-green-600 text-white"}),k(!1),Z(""),A(void 0),R(void 0),I("")}catch(e){console.error("Erro ao criar evento:",e),t({title:"Erro",description:"N\xe3o foi poss\xedvel criar o evento.",variant:"destructive"})}finally{U(!1)}};return E?(0,s.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,s.jsx)(y.Z,{className:"h-12 w-12 animate-spin text-blue-600"})}):(0,s.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:[(0,s.jsx)(_,{}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Gest\xe3o Multir\xe3o"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Crie e gerencie os eventos de sa\xfade."})]}),(0,s.jsxs)(u.z,{onClick:()=>k(!0),children:[(0,s.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),"Criar Novo Evento"]})]}),(0,s.jsxs)(m.Zb,{children:[(0,s.jsx)(m.Ol,{children:(0,s.jsx)(m.ll,{children:"Eventos Cadastrados"})}),(0,s.jsx)(m.aY,{children:(0,s.jsxs)(x.iA,{children:[(0,s.jsx)(x.xD,{children:(0,s.jsxs)(x.SC,{children:[(0,s.jsx)(x.ss,{children:"Nome do Evento"}),(0,s.jsx)(x.ss,{children:"Per\xedodo"}),(0,s.jsx)(x.ss,{children:"Local"}),(0,s.jsx)(x.ss,{children:"Status"}),(0,s.jsx)(x.ss,{children:"A\xe7\xf5es"})]})}),(0,s.jsx)(x.RM,{children:d.length>0?d.map(a=>(0,s.jsxs)(x.SC,{children:[(0,s.jsx)(x.pj,{className:"font-medium",children:a.eventName}),(0,s.jsx)(x.pj,{children:"".concat((0,w.WU)(a.startDate.toDate(),"dd/MM/yy")," - ").concat((0,w.WU)(a.endDate.toDate(),"dd/MM/yy"))}),(0,s.jsx)(x.pj,{children:a.location}),(0,s.jsx)(x.pj,{children:(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:a.status})}),(0,s.jsx)(x.pj,{children:(0,s.jsxs)(u.z,{variant:"outline",size:"sm",onClick:()=>e.push("/admin/caravanas/".concat(a.id)),children:["Gerenciar ",(0,s.jsx)(N.Z,{className:"ml-2 h-4 w-4"})]})})]},a.id)):(0,s.jsx)(x.SC,{children:(0,s.jsx)(x.pj,{colSpan:5,className:"h-24 text-center",children:"Nenhum evento de Multir\xe3o encontrado."})})})]})})]}),(0,s.jsx)(h.Vq,{open:z,onOpenChange:k,children:(0,s.jsxs)(h.cZ,{children:[(0,s.jsxs)(h.fK,{children:[(0,s.jsx)(h.$N,{children:"Criar Novo Evento de Caravana"}),(0,s.jsx)(h.Be,{children:"Preencha os detalhes abaixo para criar um novo projeto."})]}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(p._,{htmlFor:"eventName",children:"Nome do Evento"}),(0,s.jsx)(f.I,{id:"eventName",value:M,onChange:e=>Z(e.target.value),placeholder:"Ex: Multir\xe3o da Sa\xfade - S\xe3o Paulo"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(p._,{children:"Data de In\xedcio"}),(0,s.jsxs)(j.J2,{children:[(0,s.jsx)(j.xo,{asChild:!0,children:(0,s.jsxs)(u.z,{variant:"outline",className:(0,C.cn)("w-full justify-start text-left font-normal",!O&&"text-muted-foreground"),children:[(0,s.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),O?(0,w.WU)(O,"dd/MM/yyyy"):(0,s.jsx)("span",{children:"Selecione a data"})]})}),(0,s.jsx)(j.yk,{className:"w-auto p-0",children:(0,s.jsx)(v.f,{mode:"single",selected:O,onSelect:A,initialFocus:!0})})]})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(p._,{children:"Data Final"}),(0,s.jsxs)(j.J2,{children:[(0,s.jsx)(j.xo,{asChild:!0,children:(0,s.jsxs)(u.z,{variant:"outline",className:(0,C.cn)("w-full justify-start text-left font-normal",!P&&"text-muted-foreground"),children:[(0,s.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),P?(0,w.WU)(P,"dd/MM/yyyy"):(0,s.jsx)("span",{children:"Selecione a data"})]})}),(0,s.jsx)(j.yk,{className:"w-auto p-0",children:(0,s.jsx)(v.f,{mode:"single",selected:P,onSelect:R,initialFocus:!0})})]})]})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(p._,{htmlFor:"location",children:"Localiza\xe7\xe3o"}),(0,s.jsx)(f.I,{id:"location",value:F,onChange:e=>I(e.target.value),placeholder:"Ex: S\xe3o Paulo, SP"})]})]}),(0,s.jsx)(h.cN,{children:(0,s.jsxs)(u.z,{onClick:W,disabled:J,children:[J&&(0,s.jsx)(y.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvar Evento"]})})]})})]})}},1098:function(e,a,t){"use strict";t.d(a,{f:function(){return d}});var s=t(57437);t(2265);var r=t(21770),n=t(94508),i=t(62869);function d(e){let{className:a,classNames:t,showOutsideDays:d=!0,...l}=e;return(0,s.jsx)(r._,{showOutsideDays:d,className:(0,n.cn)("p-3",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,n.cn)((0,i.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,n.cn)((0,i.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-red-500 text-white hover:bg-red-600 focus:bg-red-500 font-bold opacity-100",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},...l})}d.displayName="Calendar"},66070:function(e,a,t){"use strict";t.d(a,{Ol:function(){return d},SZ:function(){return o},Zb:function(){return i},aY:function(){return c},eW:function(){return u},ll:function(){return l}});var s=t(57437),r=t(2265),n=t(94508);let i=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});i.displayName="Card";let d=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...r})});d.displayName="CardHeader";let l=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});l.displayName="CardTitle";let o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});o.displayName="CardDescription";let c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",t),...r})});c.displayName="CardContent";let u=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",t),...r})});u.displayName="CardFooter"},57054:function(e,a,t){"use strict";t.d(a,{J2:function(){return d},xo:function(){return l},yk:function(){return o}});var s=t(57437),r=t(2265),n=t(27312),i=t(94508);let d=n.fC,l=n.xz,o=r.forwardRef((e,a)=>{let{className:t,align:r="center",sideOffset:d=4,...l}=e;return(0,s.jsx)(n.h_,{children:(0,s.jsx)(n.VY,{ref:a,align:r,sideOffset:d,className:(0,i.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})})});o.displayName=n.VY.displayName}},function(e){e.O(0,[4358,9990,6137,9084,9733,6838,6008,4084,7988,3294,5640,3464,2971,2117,1744],function(){return e(e.s=80319)}),_N_E=e.O()}]);