(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3761],{11257:function(e,t,r){Promise.resolve().then(r.bind(r,38951))},38951:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return eo}});var a=r(57437),s=r(2265),i=r(51817),o=r(43044),n=r(92369),l=r(60044),c=r(99388),d=r(41671),u=r(44743),h=r(76865),m=r(84286),f=r(69076),p=r(5978),x=r(17293),v=r(35153),g=r(94508),b=r(46413),j=r(62869),y=r(66070),N=r(95186),C=r(26815),w=r(76818),E=r(12339),R=r(98575),k=r(73966),S=r(6741),A=r(80886),I=r(6718),M=r(90420),D=r(71599),P=r(66840),Z="Checkbox",[O,z]=(0,k.b)(Z),[F,_]=O(Z);function T(e){let{__scopeCheckbox:t,checked:r,children:i,defaultChecked:o,disabled:n,form:l,name:c,onCheckedChange:d,required:u,value:h="on",internal_do_not_use_render:m}=e,[f,p]=(0,A.T)({prop:r,defaultProp:null!=o&&o,onChange:d,caller:Z}),[x,v]=s.useState(null),[g,b]=s.useState(null),j=s.useRef(!1),y=!x||!!l||!!x.closest("form"),N={checked:f,disabled:n,setChecked:p,control:x,setControl:v,name:c,form:l,value:h,hasConsumerStoppedPropagationRef:j,required:u,defaultChecked:!L(o)&&o,isFormControl:y,bubbleInput:g,setBubbleInput:b};return(0,a.jsx)(F,{scope:t,...N,children:"function"==typeof m?m(N):i})}var U="CheckboxTrigger",V=s.forwardRef((e,t)=>{let{__scopeCheckbox:r,onKeyDown:i,onClick:o,...n}=e,{control:l,value:c,disabled:d,checked:u,required:h,setControl:m,setChecked:f,hasConsumerStoppedPropagationRef:p,isFormControl:x,bubbleInput:v}=_(U,r),g=(0,R.e)(t,m),b=s.useRef(u);return s.useEffect(()=>{let e=null==l?void 0:l.form;if(e){let t=()=>f(b.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[l,f]),(0,a.jsx)(P.WV.button,{type:"button",role:"checkbox","aria-checked":L(u)?"mixed":u,"aria-required":h,"data-state":q(u),"data-disabled":d?"":void 0,disabled:d,value:c,...n,ref:g,onKeyDown:(0,S.M)(i,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,S.M)(o,e=>{f(e=>!!L(e)||!e),v&&x&&(p.current=e.isPropagationStopped(),p.current||e.stopPropagation())})})});V.displayName=U;var B=s.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:s,checked:i,defaultChecked:o,required:n,disabled:l,value:c,onCheckedChange:d,form:u,...h}=e;return(0,a.jsx)(T,{__scopeCheckbox:r,checked:i,defaultChecked:o,disabled:l,required:n,onCheckedChange:d,name:s,form:u,value:c,internal_do_not_use_render:e=>{let{isFormControl:s}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(V,{...h,ref:t,__scopeCheckbox:r}),s&&(0,a.jsx)(W,{__scopeCheckbox:r})]})}})});B.displayName=Z;var H="CheckboxIndicator",G=s.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:s,...i}=e,o=_(H,r);return(0,a.jsx)(D.z,{present:s||L(o.checked)||!0===o.checked,children:(0,a.jsx)(P.WV.span,{"data-state":q(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});G.displayName=H;var J="CheckboxBubbleInput",W=s.forwardRef((e,t)=>{let{__scopeCheckbox:r,...i}=e,{control:o,hasConsumerStoppedPropagationRef:n,checked:l,defaultChecked:c,required:d,disabled:u,name:h,value:m,form:f,bubbleInput:p,setBubbleInput:x}=_(J,r),v=(0,R.e)(t,x),g=(0,I.D)(l),b=(0,M.t)(o);s.useEffect(()=>{if(!p)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!n.current;if(g!==l&&e){let r=new Event("click",{bubbles:t});p.indeterminate=L(l),e.call(p,!L(l)&&l),p.dispatchEvent(r)}},[p,g,l,n]);let j=s.useRef(!L(l)&&l);return(0,a.jsx)(P.WV.input,{type:"checkbox","aria-hidden":!0,defaultChecked:null!=c?c:j.current,required:d,disabled:u,name:h,value:m,form:f,...i,tabIndex:-1,ref:v,style:{...i.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function L(e){return"indeterminate"===e}function q(e){return L(e)?"indeterminate":e?"checked":"unchecked"}W.displayName=J;var X=r(30401);let K=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(B,{ref:t,className:(0,g.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...s,children:(0,a.jsx)(G,{className:(0,g.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(X.Z,{className:"h-4 w-4"})})})});K.displayName=B.displayName;var Q=r(35974),Y=r(6596),$=r(79083),ee=r(92651);let et=s.memo(e=>{let{message:t="Carregando..."}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-10 min-h-[150px] w-full",children:[(0,a.jsx)(i.Z,{className:"h-8 w-8 animate-spin text-blue-600"}),(0,a.jsx)("p",{className:"mt-3 text-sm text-gray-600",children:t})]})}),er=s.memo(e=>{let{title:t,message:r}=e;return(0,a.jsxs)("div",{className:"text-center text-sm text-gray-500 py-10 min-h-[150px] flex flex-col items-center justify-center bg-gray-50/70 rounded-md border border-dashed",children:[(0,a.jsx)(o.Z,{className:"w-12 h-12 text-gray-400 mb-4"}),(0,a.jsx)("p",{className:"font-medium text-gray-600 mb-1",children:t}),(0,a.jsx)("p",{children:r})]})}),ea=e=>{let{user:t,onAction:r}=e,[o,u]=(0,s.useState)(t.adminVerificationNotes||""),[h,m]=(0,s.useState)(!1),[f,p]=(0,s.useState)({}),x={personalRg:"RG Pessoal",personalCpf:"CPF Pessoal",professionalCrm:"CRM",photo3x4:"Foto 3x4",addressProof:"Comprov. Endere\xe7o",graduationCertificate:"Cert. Gradua\xe7\xe3o",criminalRecordCert:"Cert. Neg. Criminal",ethicalCert:"Cert. Neg. \xc9tica",debtCert:"Cert. Neg. D\xe9bitos CRM",cv:"Curr\xedculo Vitae",rqe:"RQE",postGradCert:"Cert. P\xf3s/Resid\xeancia",specialistTitle:"T\xedtulo Especialista",recommendationLetter:"Carta Recomenda\xe7\xe3o",socialContract:"Contrato Social",cnpjCard:"Cart\xe3o CNPJ",companyAddressProof:"Comprovante Endere\xe7o Empresa",repRg:"RG do Respons\xe1vel",repCpf:"CPF do Respons\xe1vel",repAddressProof:"Comprovante Endere\xe7o Respons\xe1vel"},v="doctor"===t.role?{...t.documents||{},...t.specialistDocuments||{}}:"hospital"===t.role?{...t.hospitalDocs||{},...t.legalRepDocuments||{}}:{},g=(e,t)=>{p(r=>({...r,[e]:{...r[e],selected:t}}))},b=(e,t)=>{p(r=>({...r,[e]:{...r[e],reason:t}}))},N=async e=>{m(!0);let a={};if("REJECTED_NEEDS_RESUBMISSION"===e&&(Object.entries(f).forEach(e=>{var t;let[r,s]=e;s.selected&&(null===(t=s.reason)||void 0===t?void 0:t.trim())&&(a[r]=s.reason.trim())}),0===Object.keys(a).length)){alert("Para solicitar corre\xe7\xf5es, selecione pelo menos um documento e escreva o motivo."),m(!1);return}try{await r(t.uid,e,o,a)}finally{m(!1)}};return(0,a.jsxs)(y.Zb,{className:"border-l-4 border-yellow-500",children:[(0,a.jsx)(y.Ol,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(y.ll,{className:"flex items-center gap-2",children:["doctor"===t.role?(0,a.jsx)(n.Z,{size:20}):(0,a.jsx)(l.Z,{size:20})," ",t.displayName]}),(0,a.jsxs)(y.SZ,{children:["doctor"===t.role?"M\xe9dico(a)":"Hospital"," - ",t.email]})]}),(0,a.jsx)(Q.C,{variant:"outline",children:"Pendente de Revis\xe3o"})]})}),(0,a.jsxs)(y.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-sm mb-2",children:"Selecione os docs para corre\xe7\xf5es"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-2",children:Object.entries(v).map(e=>{var t,r;let[s,i]=e;if(!i)return null;let o=null===(t=f[s])||void 0===t?void 0:t.selected;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(K,{id:s,checked:o,onCheckedChange:e=>g(s,e)}),(0,a.jsx)("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm flex items-center gap-2",children:x[s]||s})]}),o&&(0,a.jsx)(w.g,{placeholder:"Motivo...",value:(null===(r=f[s])||void 0===r?void 0:r.reason)||"",onChange:e=>b(s,e.target.value),className:"h-20"})]},s)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{htmlFor:"notes-".concat(t.uid),children:"Observa\xe7\xf5es Gerais"}),(0,a.jsx)(w.g,{id:"notes-".concat(t.uid),value:o,onChange:e=>u(e.target.value),disabled:h})]})]}),(0,a.jsxs)(y.eW,{className:"flex justify-end gap-3",children:[(0,a.jsxs)(j.z,{variant:"destructive",onClick:()=>N("REJECTED_NEEDS_RESUBMISSION"),disabled:h,children:[h?(0,a.jsx)(i.Z,{className:"animate-spin"}):(0,a.jsx)(c.Z,{}),"Pedir Corre\xe7\xe3o"]}),(0,a.jsxs)(j.z,{onClick:()=>N("APPROVED"),disabled:h,children:[h?(0,a.jsx)(i.Z,{className:"animate-spin"}):(0,a.jsx)(d.Z,{}),"Aprovar Cadastro"]})]})]})},es=e=>{let{matchId:t,target:r}=e,{user:o}=(0,b.a)(),[n,l]=(0,s.useState)([]),[c,d]=(0,s.useState)(""),[h,m]=(0,s.useState)(!1),f=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(!t)return;let e=(0,$.Ay)(t,r,l);return()=>e()},[t,r]),(0,s.useEffect)(()=>{var e;null===(e=f.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[n]);let p=async e=>{if(e.preventDefault(),c.trim()&&o){m(!0);try{await (0,$.D_)(t,c,r),d("")}catch(e){console.error("Erro ao enviar mensagem para ".concat(r,":"),e)}finally{m(!1)}}};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"border bg-slate-50 rounded-lg p-2 h-56 overflow-y-auto flex flex-col gap-2",children:[0===n.length&&(0,a.jsx)("p",{className:"text-center text-xs text-gray-500 p-4",children:"Nenhuma mensagem neste canal."}),n.map(e=>(0,a.jsx)("div",{className:(0,g.cn)("flex flex-col w-full",e.senderId===(null==o?void 0:o.uid)?"items-end":"items-start"),children:(0,a.jsxs)("div",{className:(0,g.cn)("p-2 rounded-lg max-w-[85%]","admin"===e.senderRole?"bg-blue-600 text-white":"bg-gray-200 text-gray-800"),children:[(0,a.jsxs)("p",{className:"text-xs font-bold",children:[e.senderName," (",e.senderRole,")"]}),(0,a.jsx)("p",{className:"text-sm break-words",children:e.text})]})},e.id)),(0,a.jsx)("div",{ref:f})]}),(0,a.jsxs)("form",{onSubmit:p,className:"flex gap-2 mt-2",children:[(0,a.jsx)(N.I,{value:c,onChange:e=>d(e.target.value),placeholder:"Digite sua mensagem...",disabled:h}),(0,a.jsx)(j.z,{type:"submit",disabled:h||!c.trim(),size:"icon",children:h?(0,a.jsx)(i.Z,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(u.Z,{size:16})})]})]})},ei=e=>{var t;let{match:r,onApproveMatch:o,onRejectMatch:n}=e,[l,u]=(0,s.useState)(""),[m,f]=(0,s.useState)(!1),[x,v]=(0,s.useState)(String(r.doctorDesiredRate)),[b,R]=(0,s.useState)(String(r.offeredRateByHospital)),k=async()=>{f(!0);try{let e=parseFloat(x),t=parseFloat(b);await o(r.id,e,t,10,l)}finally{f(!1)}},S=async()=>{if(!l.trim()){alert("Para rejeitar, preencha as observa\xe7\xf5es como motivo.");return}f(!0);try{await n(r.id,l)}finally{f(!1)}},A=r.matchedDate instanceof p.EK?r.matchedDate.toDate().toLocaleDateString("pt-BR"):"Data inv\xe1lida",I="".concat((null===(t=r.shiftCities)||void 0===t?void 0:t.join(", "))||r.shiftCity||"Cidade?",", ").concat(r.shiftState||"Estado?"),M=r.doctorDesiredRate>r.offeredRateByHospital;return(0,a.jsxs)(y.Zb,{className:(0,g.cn)("border-l-4",M?"border-red-500":"border-blue-500"),children:[(0,a.jsx)(y.Ol,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start flex-wrap gap-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(y.ll,{className:"text-lg",children:["Match: ",r.shiftRequirementSpecialties.join(", ")]}),(0,a.jsxs)(y.SZ,{children:[r.hospitalName," ↔ ",r.doctorName]})]}),M&&(0,a.jsxs)(Q.C,{variant:"destructive",className:"flex items-center gap-1.5",children:[(0,a.jsx)(h.Z,{size:14}),"Negocia\xe7\xe3o Recomendada"]})]})}),(0,a.jsx)(y.aY,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"space-y-2 p-3 bg-gray-50 rounded-md",children:[(0,a.jsx)("h4",{className:"font-bold",children:"Demanda do Hospital"}),(0,a.jsxs)("p",{children:["Local: ",I]}),(0,a.jsxs)("p",{children:["Data: ",A]}),(0,a.jsxs)("p",{children:["Oferecido: ",(0,a.jsxs)("strong",{children:[(0,g.xG)(r.offeredRateByHospital),"/h"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2 p-3 bg-gray-50 rounded-md",children:[(0,a.jsx)("h4",{className:"font-bold",children:"Disponibilidade do M\xe9dico"}),(0,a.jsxs)("p",{children:["Local: ",I]}),(0,a.jsxs)("p",{children:["Data: ",A]}),(0,a.jsxs)("p",{children:["Desejado: ",(0,a.jsxs)("strong",{children:[(0,g.xG)(r.doctorDesiredRate),"/h"]})]})]})]})}),(0,a.jsx)(Y.UQ,{type:"single",collapsible:!0,className:"w-full px-6",children:(0,a.jsxs)(Y.Qd,{value:"negotiation-tools",children:[(0,a.jsx)(Y.o4,{children:"Abrir Ferramentas de Gest\xe3o e Chat"}),(0,a.jsxs)(Y.vF,{className:"pt-4 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{children:"Valor Final / Hora (Hospital)"}),(0,a.jsx)(N.I,{type:"number",value:b,onChange:e=>R(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{children:"Valor Final / Hora (M\xe9dico)"}),(0,a.jsx)(N.I,{type:"number",value:x,onChange:e=>v(e.target.value)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(C._,{children:"Observa\xe7\xf5es / Motivo da Rejei\xe7\xe3o"}),(0,a.jsx)(w.g,{value:l,onChange:e=>u(e.target.value)})]}),(0,a.jsxs)("div",{className:"border-t mt-4 pt-4",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2 text-sm",children:"Canais de Negocia\xe7\xe3o"}),(0,a.jsxs)(E.mQ,{defaultValue:"doctor",children:[(0,a.jsxs)(E.dr,{className:"grid w-full grid-cols-2",children:[(0,a.jsx)(E.SP,{value:"doctor",children:"Chat com M\xe9dico"}),(0,a.jsx)(E.SP,{value:"hospital",children:"Chat com Hospital"})]}),(0,a.jsx)(E.nU,{value:"doctor",className:"mt-2",children:(0,a.jsx)(es,{matchId:r.id,target:"doctor"})}),(0,a.jsx)(E.nU,{value:"hospital",className:"mt-2",children:(0,a.jsx)(es,{matchId:r.id,target:"hospital"})})]})]})]})]})}),(0,a.jsxs)(y.eW,{className:"flex justify-end items-center gap-3 pt-6",children:[(0,a.jsxs)(j.z,{variant:"destructive",onClick:S,disabled:m,children:[m?(0,a.jsx)(i.Z,{className:"animate-spin"}):(0,a.jsx)(c.Z,{})," Rejeitar Match"]}),(0,a.jsxs)(j.z,{className:"bg-green-600 hover:bg-green-700",onClick:k,disabled:m,children:[m?(0,a.jsx)(i.Z,{className:"animate-spin"}):(0,a.jsx)(d.Z,{})," Aprovar Match"]})]})]})};function eo(){let{toast:e}=(0,v.pm)(),[t,r]=(0,s.useState)("matches"),[i,o]=(0,s.useState)([]),[n,l]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[u,h]=(0,s.useState)(!0),[b,N]=(0,s.useState)(!0),[C,w]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=(0,p.cf)((0,p.IO)((0,p.hJ)(x.db,"users"),(0,p.ar)("documentVerificationStatus","==","PENDING_REVIEW")),e=>{o(e.docs.map(e=>({uid:e.id,...e.data()}))),h(!1)}),t=(0,p.cf)((0,p.IO)((0,p.hJ)(x.db,"potentialMatches"),(0,p.ar)("status","==","PENDING_BACKOFFICE_REVIEW"),(0,p.Xo)("createdAt","desc")),e=>{l(e.docs.map(e=>({id:e.id,...e.data()}))),N(!1)}),r=(0,p.cf)((0,p.IO)((0,p.hJ)(x.db,"contracts"),(0,p.Xo)("createdAt","desc")),e=>{d(e.docs.map(e=>({id:e.id,...e.data()}))),w(!1)});return()=>{e(),t(),r()}},[]);let R=async(t,r,a,s)=>{try{await (0,ee.hc)(t,r,a,s),e({title:"Cadastro Atualizado!"})}catch(t){e({title:"Erro",description:t.message,variant:"destructive"})}},k=async(t,r,a,s,i)=>{try{await (0,$.tk)(t,r,a,s,i),e({title:"Match Aprovado!",description:"Contrato enviado ao m\xe9dico."})}catch(t){e({title:"Erro ao Aprovar Match",description:t.message,variant:"destructive"})}},S=async(t,r)=>{try{await (0,$.XS)(t,r),e({title:"Match Rejeitado"})}catch(t){e({title:"Erro",description:t.message,variant:"destructive"})}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight text-gray-800 flex items-center gap-2",children:[(0,a.jsx)(m.Z,{size:28})," Painel de Controlo"]}),(0,a.jsxs)(j.z,{variant:"outline",size:"sm",disabled:!0,children:[(0,a.jsx)(f.Z,{className:(0,g.cn)("mr-2 h-4 w-4",(u||b||C)&&"animate-spin")}),"Sincronizado"]})]}),(0,a.jsxs)(E.mQ,{value:t,onValueChange:r,className:"w-full",children:[(0,a.jsxs)(E.dr,{className:"grid w-full grid-cols-3",children:[(0,a.jsxs)(E.SP,{value:"verification",children:["Verifica\xe7\xf5es",(0,a.jsx)(Q.C,{variant:"destructive",className:"ml-2",children:u?"...":i.length})]}),(0,a.jsxs)(E.SP,{value:"matches",children:["Revis\xe3o de Matches",(0,a.jsx)(Q.C,{variant:"destructive",className:"ml-2",children:b?"...":n.length})]}),(0,a.jsx)(E.SP,{value:"contracts",children:"Gest\xe3o de Contratos"})]}),(0,a.jsx)(E.nU,{value:"verification",className:"mt-4",children:(0,a.jsxs)(y.Zb,{children:[(0,a.jsxs)(y.Ol,{children:[(0,a.jsx)(y.ll,{children:"Cadastros Pendentes"}),(0,a.jsx)(y.SZ,{children:"Aprove ou solicite corre\xe7\xf5es."})]}),(0,a.jsx)(y.aY,{className:"pt-4",children:u?(0,a.jsx)(et,{}):0===i.length?(0,a.jsx)(er,{title:"Nenhum cadastro para verificar",message:"Todos est\xe3o em dia."}):(0,a.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,a.jsx)(ea,{user:e,onAction:R},e.uid))})})]})}),(0,a.jsx)(E.nU,{value:"matches",className:"mt-4",children:(0,a.jsxs)(y.Zb,{children:[(0,a.jsxs)(y.Ol,{children:[(0,a.jsx)(y.ll,{children:"Matches Pendentes para Revis\xe3o"}),(0,a.jsx)(y.SZ,{children:"Aprove, negocie ou rejeite as combina\xe7\xf5es pendentes."})]}),(0,a.jsx)(y.aY,{className:"pt-4 space-y-4",children:b?(0,a.jsx)(et,{}):0===n.length?(0,a.jsx)(er,{title:"Nenhum match aguardando",message:"Novas combina\xe7\xf5es aparecer\xe3o aqui."}):n.map(e=>(0,a.jsx)(ei,{match:e,onApproveMatch:k,onRejectMatch:S},e.id))})]})}),(0,a.jsx)(E.nU,{value:"contracts",className:"mt-4",children:(0,a.jsxs)(y.Zb,{children:[(0,a.jsx)(y.Ol,{children:(0,a.jsx)(y.ll,{children:"A ser implementado"})}),(0,a.jsx)(y.aY,{children:(0,a.jsx)(er,{title:"Gest\xe3o de Contratos",message:"Esta \xe1rea mostrar\xe1 o hist\xf3rico de todos os contratos gerados."})})]})})]})]})}},46413:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return c},a:function(){return d}});var a=r(57437),s=r(2265),i=r(43301),o=r(17293),n=r(92651);let l=(0,s.createContext)(void 0),c=e=>{let{children:t}=e,[r,c]=(0,s.useState)(null),[d,u]=(0,s.useState)(null),[h,m]=(0,s.useState)(!0),[f,p]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{console.log("[AuthProvider] Subscribing to onAuthStateChanged (montagem do provider)");let e=(0,i.Aj)(o.I8,async e=>{if(console.log("[AuthProvider] onAuthStateChanged: User state changed. New Firebase user:",e?e.uid:null),c(e),e){p(!0);try{let e=await (0,n.Ts)();u(e),console.log("[AuthProvider] onAuthStateChanged: Profile fetched after user state change:",e)}catch(e){console.error("[AuthProvider] onAuthStateChanged: Error fetching profile:",e),u(null)}finally{p(!1)}}else u(null),p(!1);m(!1),console.log("[AuthProvider] onAuthStateChanged: Loading set to false.")});return()=>{console.log("[AuthProvider] Unsubscribing from onAuthStateChanged (desmontagem do provider)"),e()}},[]),console.log("[AuthProvider] Context values updated - User:",r?r.uid:null,"Loading:",h,"ProfileLoading:",f),(0,a.jsx)(l.Provider,{value:{user:r,userProfile:d,loading:h,profileLoading:f},children:t})},d=()=>{let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6596:function(e,t,r){"use strict";r.d(t,{Qd:function(){return c},UQ:function(){return l},o4:function(){return d},vF:function(){return u}});var a=r(57437),s=r(2265),i=r(13134),o=r(40875),n=r(94508);let l=i.fC,c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(i.ck,{ref:t,className:(0,n.cn)("border-b",r),...s})});c.displayName="AccordionItem";let d=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,a.jsx)(i.h4,{className:"flex",children:(0,a.jsxs)(i.xz,{ref:t,className:(0,n.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",r),...l,children:[s,(0,a.jsx)(o.Z,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});d.displayName=i.xz.displayName;let u=s.forwardRef((e,t)=>{let{className:r,children:s,...o}=e;return(0,a.jsx)(i.VY,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...o,children:(0,a.jsx)("div",{className:(0,n.cn)("pb-4 pt-0",r),children:s})})});u.displayName=i.VY.displayName},35974:function(e,t,r){"use strict";r.d(t,{C:function(){return n}});var a=r(57437);r(2265);var s=r(90535),i=r(94508);let o=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)(o({variant:r}),t),...s})}},95186:function(e,t,r){"use strict";r.d(t,{I:function(){return o}});var a=r(57437),s=r(2265),i=r(94508);let o=s.forwardRef((e,t)=>{let{className:r,type:s,...o}=e;return(0,a.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...o})});o.displayName="Input"},26815:function(e,t,r){"use strict";r.d(t,{_:function(){return c}});var a=r(57437),s=r(2265),i=r(6394),o=r(90535),n=r(94508);let l=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(i.f,{ref:t,className:(0,n.cn)(l(),r),...s})});c.displayName=i.f.displayName},76818:function(e,t,r){"use strict";r.d(t,{g:function(){return o}});var a=r(57437),s=r(2265),i=r(94508);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...s})});o.displayName="Textarea"},79083:function(e,t,r){"use strict";r.d(t,{tk:function(){return d},Ay:function(){return m},o1:function(){return l},c6:function(){return c},XS:function(){return u},D_:function(){return h}});var a=r(5978),s=r(17293);let i=async e=>{try{await (0,a.ET)((0,a.hJ)(s.db,"mail"),e)}catch(e){console.error("Erro ao solicitar envio de email:",e)}},o=(e,t,r,a)=>{if(!e){console.warn("Tentativa de enviar email sem um destinat\xe1rio.");return}let s={to:e,message:{subject:"Parab\xe9ns, Dr(a). ".concat(t,"! Voc\xea tem um novo contrato para assinar."),html:'\n                <div style="font-family: Arial, sans-serif; line-height: 1.6; color: #333;">\n                    <h2 style="color: #0056b3;">Ol\xe1, Dr(a). '.concat(t,",</h2>\n                    <p>Temos uma excelente not\xedcia! A sua disponibilidade foi aceite pelo hospital <strong>").concat(r,"</strong>.</p>\n                    <p>Um novo contrato (ID: ").concat(a,') est\xe1 aguardando a sua revis\xe3o e assinatura na plataforma FHT Gest\xe3o.</p>\n                    <div style="margin: 30px 0;">\n                        <a \n                            href="').concat("https://www.fhtgestao.com.br/dashboard/contracts",'" \n                            style="padding: 12px 24px; background-color: #28a745; color: white; text-decoration: none; border-radius: 5px; font-size: 16px; font-weight: bold;"\n                        >\n                            Ver Meus Contratos\n                        </a>\n                    </div>\n                    <p>Atenciosamente,<br><strong>Equipa FHT Gest\xe3o</strong></p>\n                    <hr>\n                    <p style="font-size: 12px; color: #777;">Este \xe9 um email autom\xe1tico. Por favor, n\xe3o responda.</p>\n                </div>\n            ')}};console.log("[NotificationService] A preparar para enviar email para: ".concat(e)),i(s)};var n=r(92651);let l=async()=>{let e=s.I8.currentUser;if(!e)return[];try{let t=(0,a.IO)((0,a.hJ)(s.db,"potentialMatches"),(0,a.ar)("doctorId","==",e.uid),(0,a.ar)("status","==","PENDING_BACKOFFICE_REVIEW"),(0,a.Xo)("createdAt","desc"));return(await (0,a.PL)(t)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("[getMatchesForDoctorInNegotiation] Erro:",e),Error("Falha ao carregar as propostas em negocia\xe7\xe3o.")}},c=async()=>{let e=s.I8.currentUser;if(!e)return[];try{let t=(0,a.IO)((0,a.hJ)(s.db,"potentialMatches"),(0,a.ar)("hospitalId","==",e.uid),(0,a.ar)("status","==","PENDING_BACKOFFICE_REVIEW"),(0,a.Xo)("createdAt","desc"));return(await (0,a.PL)(t)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("[getMatchesForHospitalInNegotiation] Erro:",e),Error("Falha ao carregar as propostas em negocia\xe7\xe3o.")}},d=async(e,t,r,i,n)=>{let l=s.I8.currentUser;if(!l)throw Error("Admin n\xe3o logado.");let c=(0,a.JU)(s.db,"potentialMatches",e),d="",u={doctorEmail:"",doctorName:"",hospitalName:""};try{await (0,a.i3)(s.db,async e=>{var o,h;let m=await e.get(c);if(!m.exists())throw Error("Match n\xe3o encontrado.");let f=m.data(),p=(0,a.JU)(s.db,"users",f.doctorId),x=await e.get(p);u={doctorEmail:null===(o=x.data())||void 0===o?void 0:o.email,doctorName:f.doctorName||"N/A",hospitalName:f.hospitalName||"N/A"};let v=r-t;if(v<0)throw Error("O valor final do m\xe9dico n\xe3o pode ser maior que o valor final do hospital.");let g=(0,a.JU)((0,a.hJ)(s.db,"contracts"));d=g.id;let b={shiftRequirementId:f.shiftRequirementId,timeSlotId:f.timeSlotId,doctorId:f.doctorId,hospitalId:f.hospitalId,doctorName:f.doctorName||"N/A",hospitalName:f.hospitalName||"N/A",shiftDates:[f.matchedDate],startTime:f.shiftRequirementStartTime,endTime:f.shiftRequirementEndTime,isOvernight:f.shiftRequirementIsOvernight,serviceType:f.shiftRequirementServiceType,specialties:f.shiftRequirementSpecialties,locationCity:(null===(h=f.shiftCities)||void 0===h?void 0:h[0])||f.shiftCity||"N/A",locationState:f.shiftState||"N/A",hospitalRate:r,doctorRate:t,platformMarginRate:v,platformMarginPercentage:i,status:"PENDING_DOCTOR_SIGNATURE",createdAt:(0,a.Bt)(),updatedAt:(0,a.Bt)()};e.set(g,b),e.update(c,{status:"BACKOFFICE_APPROVED_CONTRACT_CREATED",negotiatedRateForDoctor:t,negotiatedRateForHospital:r,backofficeReviewerId:l.uid,backofficeReviewedAt:(0,a.Bt)(),backofficeNotes:n||"",updatedAt:(0,a.Bt)(),contractId:d})}),u.doctorEmail&&d&&o(u.doctorEmail,u.doctorName,u.hospitalName,d)}catch(e){throw console.error("Falha ao aprovar match:",e),Error("Falha ao aprovar match: ".concat(e.message))}},u=async(e,t)=>{let r=s.I8.currentUser;if(!r)throw Error("Admin n\xe3o est\xe1 logado.");if(!t.trim())throw Error("Justificativa \xe9 obrigat\xf3ria.");let i=(0,a.JU)(s.db,"potentialMatches",e);try{await (0,a.r7)(i,{status:"BACKOFFICE_REJECTED",backofficeReviewerId:r.uid,backofficeReviewedAt:(0,a.Bt)(),backofficeNotes:t,updatedAt:(0,a.Bt)()})}catch(t){throw console.error("Falha ao rejeitar match ".concat(e,":"),t),Error("Falha ao rejeitar match: ".concat(t.message))}},h=async(e,t,r)=>{let i=s.I8.currentUser,o=await (0,n.Ts)();if(!i||!o)throw Error("Utilizador n\xe3o autenticado.");if(!t.trim())throw Error("A mensagem n\xe3o pode estar vazia.");let l=(0,a.hJ)(s.db,"potentialMatches",e,"doctor"===r?"chatWithDoctor":"chatWithHospital");await (0,a.ET)(l,{text:t.trim(),senderId:i.uid,senderName:o.displayName||"Utilizador",senderRole:o.role,createdAt:(0,a.Bt)()})},m=(e,t,r)=>{let i=(0,a.hJ)(s.db,"potentialMatches",e,"doctor"===t?"chatWithDoctor":"chatWithHospital"),o=(0,a.IO)(i,(0,a.Xo)("createdAt","asc"));return(0,a.cf)(o,e=>{r(e.docs.map(e=>({id:e.id,...e.data()})))})}},60044:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},30401:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},41671:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},99388:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},51817:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},84286:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},92369:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},99255:function(e,t,r){"use strict";r.d(t,{M:function(){return l}});var a,s=r(2265),i=r(61188),o=(a||(a=r.t(s,2)))[" useId ".trim().toString()]||(()=>void 0),n=0;function l(e){let[t,r]=s.useState(o());return(0,i.b)(()=>{e||r(e=>e??String(n++))},[e]),e||(t?`radix-${t}`:"")}},6394:function(e,t,r){"use strict";r.d(t,{f:function(){return n}});var a=r(2265),s=r(66840),i=r(57437),o=a.forwardRef((e,t)=>(0,i.jsx)(s.WV.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));o.displayName="Label";var n=o},6718:function(e,t,r){"use strict";r.d(t,{D:function(){return s}});var a=r(2265);function s(e){let t=a.useRef({value:e,previous:e});return a.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}},90420:function(e,t,r){"use strict";r.d(t,{t:function(){return i}});var a=r(2265),s=r(61188);function i(e){let[t,r]=a.useState(void 0);return(0,s.b)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let a,s;if(!Array.isArray(t)||!t.length)return;let i=t[0];if("borderBoxSize"in i){let e=i.borderBoxSize,t=Array.isArray(e)?e[0]:e;a=t.inlineSize,s=t.blockSize}else a=e.offsetWidth,s=e.offsetHeight;r({width:a,height:s})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}}},function(e){e.O(0,[4358,9990,6137,9084,1543,8398,9029,8621,2971,2117,1744],function(){return e(e.s=11257)}),_N_E=e.O()}]);