(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[497],{7668:function(e,s,a){Promise.resolve().then(a.bind(a,30075))},30075:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return es}});var t=a(57437),i=a(2265),l=a(99376),r=a(62869),n=a(66070),d=a(12339),c=a(26110),o=a(1098),m=a(53647),x=a(26815),u=a(95186),h=a(76818),f=a(35153),p=a(35974),g=a(57054),j=a(23518),v=a(51888),N=a(94508),b=a(17293),y=a(5978),w=a(33569),C=a(49505),E=a(51817),S=a(43044),D=a(49322),R=a(69076),P=a(32489),k=a(88501),L=a(91723),O=a(83774),T=a(5005),A=a(95252),Z=a(95805),I=a(33245),_=a(65690),z=a(58896),G=a(88944),M=a(70525),F=a(99397),V=a(53121),B=a(18930),U=a(42208);let H=e=>{let{title:s,value:a,description:i,icon:l,isLoading:r}=e;return(0,t.jsxs)(n.Zb,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium text-gray-600",children:s}),(0,t.jsx)(l,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(n.aY,{children:[r?(0,t.jsx)("div",{className:"h-8 flex items-center",children:(0,t.jsx)(E.Z,{className:"h-5 w-5 animate-spin text-muted-foreground"})}):(0,t.jsxs)("div",{className:(0,N.cn)("font-bold text-gray-900","text-lg md:text-xl lg:text-2xl"),children:[a," "]}),i&&!r&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground pt-1",children:i})]})]})},Y=Array.from({length:48},(e,s)=>"".concat(Math.floor(s/2).toString().padStart(2,"0"),":").concat(s%2==0?"00":"30")),q=["AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"],J={SP:["S\xe3o Paulo","Campinas","Guarulhos","Osasco","Santo Andr\xe9","S\xe3o Bernardo do Campo","Santos","Ribeir\xe3o Preto","Sorocaba","Jundia\xed","Piracicaba","Bauru","Franca","Taubat\xe9","Limeira","Barueri","Cotia","Itapevi","Ara\xe7ariguama"],RJ:["Rio de Janeiro","S\xe3o Gon\xe7alo","Duque de Caxias","Nova Igua\xe7u","Niter\xf3i","Belford Roxo","Campos dos Goytacazes","S\xe3o Jo\xe3o de Meriti","Petr\xf3polis","Volta Redonda"],MG:["Belo Horizonte","Uberl\xe2ndia","Contagem","Juiz de Fora","Betim","Montes Claros","Ribeir\xe3o das Neves","Uberaba","Governador Valadares","Ipatinga"]},Q=Object.entries(C.ku).map(e=>{let[s,a]=e;return{value:s,label:s.split("_").map(e=>e[0].toUpperCase()+e.slice(1)).join(" "),rateExample:a}}),W=i.memo(e=>{let{message:s="Carregando dados..."}=e;return(0,t.jsxs)("div",{className:"flex flex-col justify-center items-center text-center py-10 min-h-[150px] w-full",children:[" ",(0,t.jsx)(E.Z,{className:"h-8 w-8 animate-spin text-blue-600"})," ",(0,t.jsx)("span",{className:"ml-3 text-sm text-gray-600 mt-3",children:s})," "]})});W.displayName="LoadingState";let X=i.memo(e=>{let{message:s,actionButton:a}=e;return(0,t.jsxs)("div",{className:"text-center text-sm text-gray-500 py-10 min-h-[150px] flex flex-col items-center justify-center bg-gray-50/70 rounded-md border border-dashed border-gray-300 w-full",children:[" ",(0,t.jsx)(S.Z,{className:"w-12 h-12 text-gray-400 mb-4"})," ",(0,t.jsx)("p",{className:"font-medium text-gray-600 mb-1",children:"Nada por aqui ainda!"})," ",(0,t.jsx)("p",{className:"max-w-xs",children:s})," ",a&&(0,t.jsx)("div",{className:"mt-4",children:a})," "]})});X.displayName="EmptyState";let K=i.memo(e=>{let{message:s,onRetry:a}=e;return(0,t.jsxs)("div",{className:"text-center text-sm text-red-600 py-10 min-h-[150px] flex flex-col items-center justify-center bg-red-50/70 rounded-md border border-dashed border-red-300 w-full",children:[" ",(0,t.jsx)(D.Z,{className:"w-12 h-12 text-red-400 mb-4"})," ",(0,t.jsx)("p",{className:"font-semibold text-red-700 mb-1 text-base",children:"Oops! Algo deu errado."})," ",(0,t.jsx)("p",{className:"max-w-md text-red-600",children:s||"N\xe3o foi poss\xedvel carregar os dados."})," ",a&&(0,t.jsxs)(r.z,{variant:"destructive",size:"sm",onClick:a,className:"mt-4",children:[" ",(0,t.jsx)(R.Z,{className:"mr-2 h-4 w-4"})," Tentar Novamente "]})," "]})});K.displayName="ErrorState";let $=e=>{var s;let{onShiftSubmitted:a,initialData:l}=e,{toast:n}=(0,f.pm)(),d=!!l&&!!l.id,[D,R]=(0,i.useState)(()=>{var e;return(null==l?void 0:null===(e=l.dates)||void 0===e?void 0:e.map(e=>e.toDate()))||[]}),[_,z]=(0,i.useState)((null==l?void 0:l.startTime)||"07:00"),[G,M]=(0,i.useState)((null==l?void 0:l.endTime)||"19:00"),[F,V]=(0,i.useState)(String((null==l?void 0:l.numberOfVacancies)||"1")),[B,U]=(0,i.useState)((null==l?void 0:l.specialtiesRequired)||[]),[H,W]=(0,i.useState)((null==l?void 0:l.state)||""),[X,K]=(0,i.useState)((null==l?void 0:l.cities)||[]),[$,ee]=(0,i.useState)((null==l?void 0:l.serviceType)||""),[es,ea]=(0,i.useState)(String((null==l?void 0:l.offeredRate)||"")),[et,ei]=(0,i.useState)((null==l?void 0:l.notes)||""),[el,er]=(0,i.useState)(!1),[en,ed]=(0,i.useState)(!1),[ec,eo]=(0,i.useState)(""),[em,ex]=(0,i.useState)(null),[eu,eh]=(0,i.useState)([]),ef=(e,s)=>{z(e),M(s)},ep=(0,i.useCallback)(()=>{R([]),z("07:00"),M("19:00"),V("1"),U([]),eo(""),ex(null),W(""),K([]),eh([]),ee(""),ea(""),ei("")},[]),eg=(0,i.useCallback)((e,s)=>{e&&s&&e===s?ex("In\xedcio n\xe3o pode ser igual ao t\xe9rmino."):ex(null)},[]);(0,i.useEffect)(()=>{eg(_,G)},[_,G,eg]),(0,i.useEffect)(()=>{H?(eh(J[H]||[]),l&&H===l.state||K([])):(eh([]),K([]))},[H,l]);let ej=e=>{B.includes(e)||U(s=>[...s,e]),eo(""),ed(!1)},ev=e=>{U(s=>s.filter(s=>s!==e))},eN=(0,i.useMemo)(()=>C.Gg.filter(e=>"string"==typeof e&&e.toLowerCase().includes(ec.toLowerCase())&&!B.includes(e)),[ec,B]),eb=async()=>{let e=parseFloat(es.replace(",",".")),s=parseInt(F,10);if(0===D.length&&!d){n({title:"Datas s\xe3o obrigat\xf3rias",variant:"destructive"});return}if(em){n({title:"Hor\xe1rio Inv\xe1lido",variant:"destructive"});return}if(!$){n({title:"Tipo de Atendimento Obrigat\xf3rio",variant:"destructive"});return}if(isNaN(e)||e<=0){n({title:"Valor Hora Inv\xe1lido",variant:"destructive"});return}if(isNaN(s)||s<=0){n({title:"N\xba de Profissionais Inv\xe1lido",variant:"destructive"});return}if(!H||0===X.length){n({title:"Localiza\xe7\xe3o Obrigat\xf3ria",description:"Selecione o estado e pelo menos uma cidade.",variant:"destructive"});return}er(!0);let t=b.I8.currentUser;if(!t){n({title:"Usu\xe1rio n\xe3o autenticado",variant:"destructive"}),er(!1);return}let i=_>G,r=et.trim();try{if(d&&(null==l?void 0:l.id)){let a={startTime:_,endTime:G,isOvernight:i,state:H,cities:X,serviceType:$,specialtiesRequired:B,offeredRate:e,numberOfVacancies:s,...r?{notes:r}:{notes:""}};await (0,w.AX)(l.id,a),n({title:"Demanda Atualizada!",variant:"default"})}else{let a=D.map(e=>y.EK.fromDate(e)),l={publishedByUID:t.uid,dates:a,startTime:_,endTime:G,isOvernight:i,state:H,cities:X,serviceType:$,specialtiesRequired:B,offeredRate:e,numberOfVacancies:s,...r&&{notes:r}};await (0,w.xf)(l),n({title:"Demanda Publicada!",variant:"default"}),d||ep()}a()}catch(e){n({title:"Erro ao ".concat(d?"Salvar":"Publicar"),description:e.message,variant:"destructive"})}finally{er(!1)}};return(0,t.jsxs)(c.cZ,{className:"sm:max-w-2xl md:max-w-3xl",children:[" ",(0,t.jsxs)(c.fK,{children:[(0,t.jsx)(c.$N,{className:"text-xl",children:d?"Editar Demanda":"Publicar Nova Demanda"}),(0,t.jsx)(c.Be,{children:d?"Altere os detalhes. Datas n\xe3o s\xe3o edit\xe1veis.":"Defina os crit\xe9rios. Uma demanda ser\xe1 criada para cada data selecionada."})]}),(0,t.jsx)(c.GG,{asChild:!0,children:(0,t.jsxs)(r.z,{variant:"ghost",size:"icon",className:"absolute top-4 right-4",children:[(0,t.jsx)(P.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Fechar"})]})}),(0,t.jsxs)("div",{className:"grid gap-5 py-4 max-h-[70vh] overflow-y-auto px-1 pr-3 md:pr-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(x._,{className:"font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(k.Z,{}),"Data(s)*"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:d?"Original (n\xe3o edit\xe1vel).":"Selecione."}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 items-start",children:[d?(0,t.jsx)(o.f,{mode:"single",selected:D[0],disabled:!0,footer:D[0]?(0,t.jsx)("p",{children:null===(s=D[0])||void 0===s?void 0:s.toLocaleDateString("pt-BR")}):null}):(0,t.jsx)(o.f,{mode:"multiple",selected:D,onSelect:R,disabled:{before:new Date(new Date().setHours(0,0,0,0))},footer:D.length>0?(0,t.jsxs)("p",{children:[D.length," dia(s)"]}):(0,t.jsx)("p",{children:"Nenhum dia"}),modifiers:{selected:D},modifiersStyles:{selected:{backgroundColor:"#2563eb",color:"white",borderRadius:"0.375rem"}}}),D.length>0&&!d&&(0,t.jsxs)(r.z,{variant:"outline",size:"sm",onClick:()=>R([]),children:[(0,t.jsx)(P.Z,{})," Limpar"]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(x._,{className:"font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(L.Z,{}),"Hor\xe1rio*"]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[(0,t.jsx)(r.z,{variant:"outline",size:"sm",onClick:()=>ef("07:00","19:00"),children:"Diurno"}),(0,t.jsx)(r.z,{variant:"outline",size:"sm",onClick:()=>ef("19:00","07:00"),children:"Noturno"}),(0,t.jsx)(r.z,{variant:"outline",size:"sm",onClick:()=>ef("08:00","12:00"),children:"Manh\xe3"}),(0,t.jsx)(r.z,{variant:"outline",size:"sm",onClick:()=>ef("13:00","18:00"),children:"Tarde"}),(0,t.jsx)(r.z,{variant:"outline",size:"sm",onClick:()=>ef("00:00","23:30"),children:"24h"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(x._,{htmlFor:"sTime",children:"In\xedcio*"}),(0,t.jsxs)(m.Ph,{value:_,onValueChange:z,children:[(0,t.jsx)(m.i4,{id:"sTime",className:(0,N.cn)(em&&"border-red-500"),children:(0,t.jsx)(m.ki,{})}),(0,t.jsx)(m.Bw,{children:Y.map(e=>(0,t.jsx)(m.Ql,{value:e,children:e},"s"+e))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x._,{htmlFor:"eTime",children:"T\xe9rmino*"}),(0,t.jsxs)(m.Ph,{value:G,onValueChange:M,children:[(0,t.jsx)(m.i4,{id:"eTime",className:(0,N.cn)(em&&"border-red-500"),children:(0,t.jsx)(m.ki,{})}),(0,t.jsx)(m.Bw,{children:Y.map(e=>(0,t.jsx)(m.Ql,{value:e,children:e},"e"+e))})]})]}),em&&(0,t.jsx)("p",{className:"text-red-600 col-span-2",children:em})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(x._,{htmlFor:"state-m",className:"font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(O.Z,{}),"Estado*"]}),(0,t.jsxs)(m.Ph,{value:H,onValueChange:W,children:[(0,t.jsx)(m.i4,{id:"state-m",children:(0,t.jsx)(m.ki,{placeholder:"UF..."})}),(0,t.jsx)(m.Bw,{children:q.map(e=>(0,t.jsx)(m.Ql,{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x._,{htmlFor:"city-m",className:"font-semibold text-gray-800",children:"Cidades*"}),(0,t.jsx)(v.R,{selectedState:H,availableCities:eu,selectedCities:X,onConfirm:K})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(x._,{htmlFor:"serv-type-m",className:"font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(T.Z,{}),"Tipo*"]}),(0,t.jsxs)(m.Ph,{value:$,onValueChange:ee,children:[(0,t.jsx)(m.i4,{id:"serv-type-m",children:(0,t.jsx)(m.ki,{placeholder:"Selecione..."})}),(0,t.jsx)(m.Bw,{children:Q.map(e=>(0,t.jsxs)(m.Ql,{value:e.value,children:[e.label," ",(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["(",(0,N.xG)(e.rateExample),"/h)"]})]},e.value))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(x._,{htmlFor:"rate-m",className:"font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(A.Z,{}),"Valor/Hora (R$)*"]}),(0,t.jsx)(u.I,{id:"rate-m",type:"number",min:"1",step:"any",placeholder:"150.00",value:es,onChange:e=>ea(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(x._,{htmlFor:"vac-m",className:"font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(Z.Z,{}),"Profissionais*"]}),(0,t.jsx)(u.I,{id:"vac-m",type:"number",min:"1",step:"1",placeholder:"1",value:F,onChange:e=>V(e.target.value)})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(x._,{className:"font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(S.Z,{}),"Especialidades (Opcional)"]}),(0,t.jsxs)(g.J2,{open:en,onOpenChange:ed,children:[(0,t.jsx)(g.xo,{asChild:!0,children:(0,t.jsx)(r.z,{variant:"outline",className:"w-full justify-start font-normal h-9",children:B.length?B.join(", "):"Selecione..."})}),(0,t.jsx)(g.yk,{className:"w-[--radix-popover-trigger-width] p-0",children:(0,t.jsxs)(j.mY,{children:[(0,t.jsx)(j.sZ,{value:ec,onValueChange:eo}),(0,t.jsxs)(j.e8,{children:[(0,t.jsx)(j.rb,{children:"Nenhuma."}),(0,t.jsx)(j.fu,{children:eN.map(e=>(0,t.jsx)(j.di,{value:e,onSelect:()=>ej(e),children:e},e))})]})]})})]}),B.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1.5 mt-2 pt-2 border-t",children:B.map(e=>(0,t.jsxs)(p.C,{variant:"secondary",children:[e,(0,t.jsx)("button",{type:"button",onClick:()=>ev(e),className:"ml-1.5",children:(0,t.jsx)(P.Z,{className:"h-3 w-3"})})]},e))})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsxs)(x._,{htmlFor:"notes-m",className:"font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(I.Z,{}),"Notas (Opcional)"]}),(0,t.jsx)(h.g,{id:"notes-m",placeholder:"Detalhes adicionais...",value:et,onChange:e=>ei(e.target.value)})]})]}),(0,t.jsxs)(c.cN,{className:"mt-2 pt-4 border-t bg-slate-50 -m-6 px-6 pb-4 rounded-b-lg",children:[(0,t.jsx)(c.GG,{asChild:!0,children:(0,t.jsx)(r.z,{type:"button",variant:"outline",disabled:el,children:"Cancelar"})}),(0,t.jsxs)(r.z,{type:"button",onClick:eb,disabled:el||0===D.length&&!d,className:"bg-blue-600 hover:bg-blue-700",children:[el&&(0,t.jsx)(E.Z,{className:"mr-2 h-4 w-4 animate-spin"}),el?d?"Salvando...":"Publicando...":d?"Salvar Altera\xe7\xf5es":"Publicar Demanda (".concat(D.length||0," Dia(s))")]})]})]})};$.displayName="AddShiftDialog";let ee=i.memo(e=>{var s;let a;let{shift:i,actions:l}=e,n=Q.find(e=>e.value===i.serviceType),d=(null==n?void 0:n.label)||i.serviceType,c=(e=>{switch(e){case"OPEN":return{variant:"default",className:"bg-blue-100 text-blue-800 border-blue-300"};case"FULLY_STAFFED":case"CONFIRMED":case"ACTIVE_SIGNED":case"COMPLETED":case"IN_PROGRESS":return{variant:"default",className:"bg-green-100 text-green-800 border-green-300"};case"PARTIALLY_FILLED":return{variant:"default",className:"bg-sky-100 text-sky-800 border-sky-300"};case"PENDING_MATCH_REVIEW":case"PENDING_DOCTOR_ACCEPTANCE":case"PENDING_HOSPITAL_SIGNATURE":case"PENDING_CONTRACT_SIGNATURES":return{variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-yellow-300"};case"CANCELLED_BY_HOSPITAL":case"EXPIRED":return{variant:"destructive",className:""};default:return{variant:"outline",className:"bg-gray-100 text-gray-800 border-gray-300"}}})(i.status);return(0,t.jsxs)("div",{className:(0,N.cn)("flex flex-col sm:flex-row items-start sm:justify-between border rounded-lg p-4 gap-x-4 gap-y-3 transition-all duration-300 bg-white shadow-xs hover:shadow-md"),children:[" ",(0,t.jsxs)("div",{className:"flex-1 space-y-2 min-w-0",children:[" ",(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[" ",(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-800",children:[" ",(0,t.jsx)(k.Z,{className:"h-4 w-4 shrink-0 text-blue-600"})," ",(0,t.jsx)("span",{suppressHydrationWarning:!0,children:(()=>{if(!i.dates||0===i.dates.length)return"Datas n\xe3o especificadas";let e=i.dates[0]instanceof y.EK?i.dates[0].toDate():null,s=e?e.toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"}):"Data inv\xe1lida";return i.dates.length>1&&(s+=" (e +".concat(i.dates.length-1," outro(s) dia(s))")),s})()})," ",(0,t.jsxs)("span",{className:"text-gray-500 font-normal",children:["(",i.startTime," - ",i.endTime,")"]})," "]})," ",(0,t.jsxs)(p.C,{variant:c.variant,className:(0,N.cn)("text-xs capitalize self-start sm:self-center",c.className),children:[" ",(null==(a=i.status)?void 0:a.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()))||"Desconhecido"," "]})," "]})," ",(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-1.5 text-xs text-gray-600 mt-1 pl-1",children:[" ",(0,t.jsxs)("div",{className:"flex items-center gap-1.5 truncate",children:[(0,t.jsx)(O.Z,{className:"h-3.5 w-3.5 shrink-0 text-purple-500"}),(0,t.jsxs)("span",{children:[i.cities.join(", "),", ",i.state]})]})," ",(0,t.jsxs)("div",{className:"flex items-center gap-1.5 truncate",children:[(0,t.jsx)(T.Z,{className:"h-3.5 w-3.5 shrink-0 text-cyan-500"}),(0,t.jsx)("span",{children:d})]})," ",(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-green-600 font-medium",children:[(0,t.jsx)(A.Z,{className:"h-3.5 w-3.5 shrink-0"}),(0,t.jsxs)("span",{children:[(0,N.xG)(i.offeredRate),"/hora"]})]})," ",(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-gray-700 font-medium",children:[(0,t.jsx)(Z.Z,{className:"h-3.5 w-3.5 shrink-0"}),(0,t.jsxs)("span",{children:[null!==(s=i.numberOfVacancies)&&void 0!==s?s:1," profissional(is) por data"]})]})," "]})," ",i.specialtiesRequired&&i.specialtiesRequired.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-1.5 pt-1.5 pl-1",children:[" ",(0,t.jsx)("span",{className:"text-xs text-gray-500 mr-1 font-medium shrink-0",children:"Especialidades:"})," ",i.specialtiesRequired.map(e=>(0,t.jsx)(p.C,{variant:"outline",className:"text-gray-700 text-[11px] px-1.5 py-0.5 font-normal border-blue-200 bg-blue-50",children:e},e))," "]})," ",i.notes&&(0,t.jsxs)("p",{className:"text-xs text-gray-500 pt-1.5 pl-1 italic flex items-start gap-1.5",children:[" ",(0,t.jsx)(I.Z,{className:"inline h-3.5 w-3.5 mr-0.5 shrink-0 relative top-0.5"})," ",(0,t.jsx)("span",{className:"truncate",children:i.notes})," "]})," "]})," ",l&&l.length>0&&(0,t.jsxs)("div",{className:"flex items-center space-x-1 shrink-0 mt-2 sm:mt-0 self-end sm:self-center",children:[" ",l.map(e=>{var s;return(0,t.jsxs)(r.z,{variant:null!==(s=e.variant)&&void 0!==s?s:"ghost",size:"icon",onClick:e.onClick,className:(0,N.cn)("h-8 w-8 p-0",e.className),"aria-label":e.label,disabled:e.disabled,title:e.disabled?"Esta vaga n\xe3o pode ser alterada.":e.label,children:[" ",(0,t.jsx)(e.icon,{className:"h-4 w-4"})," "]},e.label)})," "]})," "]})});function es(){let{toast:e}=(0,f.pm)(),s=(0,l.useRouter)(),[a,o]=(0,i.useState)([]),[m,x]=(0,i.useState)([]),[u,h]=(0,i.useState)([]),[p,g]=(0,i.useState)([]),[j,v]=(0,i.useState)(0),[C,S]=(0,i.useState)(!0),R={isLoading:!0,error:null},[P,O]=(0,i.useState)({open:{...R},pending:{...R},confirmed:{...R},history:{...R}}),[T,A]=(0,i.useState)(!1),[I,Y]=(0,i.useState)("open"),[q,J]=(0,i.useState)(null),Q=(e,s)=>{O(a=>({...a,[e]:{...a[e],...s}}))},es=(0,i.useCallback)(async(e,s,a)=>{Q(a,{isLoading:!0,error:null});let t=b.I8.currentUser;if(!t){Q(a,{isLoading:!1,error:"Usu\xe1rio n\xe3o autenticado."});return}try{let i=(0,y.hJ)(b.db,"shiftRequirements"),l=Array.isArray(e)?(0,y.ar)("status","in",e):(0,y.ar)("status","==",e),r=(0,y.IO)(i,(0,y.ar)("hospitalId","==",t.uid),l,(0,y.Xo)("dates","asc")),n=(await (0,y.PL)(r)).docs.map(e=>({...e.data(),id:e.id}));s(n),Q(a,{isLoading:!1})}catch(e){Q(a,{isLoading:!1,error:e.message||"Erro ao carregar demandas ".concat(a,".")})}},[]),ea=(0,i.useCallback)(()=>{es("OPEN",o,"open"),es(["PENDING_MATCH_REVIEW","PENDING_DOCTOR_ACCEPTANCE"],x,"pending"),es("CONFIRMED",h,"confirmed"),es(["COMPLETED","CANCELLED_BY_HOSPITAL","EXPIRED"],g,"history"),(async()=>{try{S(!0);let e=(0,y.IO)((0,y.hJ)(b.db,"users"),(0,y.ar)("userType","==","doctor")),s=await (0,y.Yp)(e);v(s.data().count)}catch(e){console.error("Erro ao buscar contagem de m\xe9dicos:",e),v(0)}finally{S(!1)}})()},[es]);(0,i.useEffect)(()=>{ea()},[ea]);let et=e=>{J(e),A(!0)},ei=()=>{J(null),A(!0)},el=async s=>{if(s)try{await (0,w.CW)(s),e({title:"Demanda Cancelada"}),ea()}catch(s){e({title:"Erro ao Cancelar",description:s.message,variant:"destructive"})}},er=(0,i.useMemo)(()=>[...a,...m,...u,...p],[a,m,u,p]),en=(0,i.useMemo)(()=>{let e=new Date;e.setDate(e.getDate()-30);let s=er.filter(s=>s.createdAt&&s.createdAt.toDate()>e),a=["FULLY_STAFFED","CONFIRMED","ACTIVE_SIGNED","COMPLETED","IN_PROGRESS"],t=s.filter(e=>e.status&&a.includes(e.status)).length,i=s.length>0?t/s.length:0,l=[...u,...p.filter(e=>"COMPLETED"===e.status)],r=0;l.forEach(s=>{var a;if((null===(a=s.dates[0])||void 0===a?void 0:a.toDate())>e){let[e,a]=s.startTime.split(":").map(Number),[t,i]=s.endTime.split(":").map(Number),l=t+i/60-(e+a/60);(s.isOvernight||l<0)&&(l+=24),r+=l*s.offeredRate*(s.numberOfVacancies||1)*s.dates.length}});let n=s.filter(e=>a.includes(e.status)&&e.createdAt&&e.updatedAt),d=0;n.length>0&&(d=(d=n.reduce((e,s)=>e+(s.updatedAt.toDate().getTime()-s.createdAt.toDate().getTime()),0))/n.length/36e5);let c={};er.forEach(e=>{var s;null===(s=e.specialtiesRequired)||void 0===s||s.forEach(e=>{c[e]=(c[e]||0)+1})});let o=Object.keys(c).length>0?Object.keys(c).reduce((e,s)=>c[e]>c[s]?e:s):"N/A";return{fillRate:i,totalCost:r,avgFillTimeInHours:d,topSpecialty:o}},[er,u,p]);return(0,t.jsxs)("div",{className:"flex flex-col gap-6 md:gap-8 p-1",children:[(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight text-gray-800",children:"Painel de Gerenciamento de Plant\xf5es"}),(0,t.jsxs)("section",{"aria-labelledby":"kpi-heading",children:[" ",(0,t.jsx)("h2",{id:"kpi-heading",className:"sr-only",children:"Vis\xe3o Geral"})," ",(0,t.jsxs)("div",{className:"grid gap-3 sm:gap-4 grid-cols-2 md:grid-cols-4 lg:grid-cols-7",children:[(0,t.jsx)(H,{title:"Demandas Abertas",value:a.length,icon:D.Z,isLoading:P.open.isLoading,description:"Aguardando m\xe9dicos"}),(0,t.jsx)(H,{title:"Pendentes A\xe7\xe3o",value:m.length,icon:_.Z,isLoading:P.pending.isLoading,description:"Matches/contratos"}),(0,t.jsx)(H,{title:"Taxa Preenchim. (30d)",value:(0,N.rl)(en.fillRate),icon:z.Z,isLoading:P.history.isLoading,description:"Efici\xeancia"}),(0,t.jsx)(H,{title:"Custo Estimado (30d)",value:(0,N.xG)(en.totalCost),icon:G.Z,isLoading:P.history.isLoading||P.confirmed.isLoading,description:"Gasto com plant\xf5es"}),(0,t.jsx)(H,{title:"Tempo M\xe9dio Preench.",value:(0,N.bx)(en.avgFillTimeInHours),icon:L.Z,isLoading:P.history.isLoading,description:"Agilidade (horas)"}),(0,t.jsx)(H,{title:"M\xe9dicos na Plataforma",value:j,icon:Z.Z,isLoading:C,description:"Total cadastrados"}),(0,t.jsx)(H,{title:"Top Demanda (Espec.)",value:en.topSpecialty,icon:M.Z,isLoading:P.open.isLoading,description:"Mais requisitada"})]})," "]}),(0,t.jsxs)("section",{"aria-labelledby":"shifts-management-heading",children:[(0,t.jsx)("h2",{id:"shifts-management-heading",className:"text-xl font-semibold mb-4 mt-4 text-gray-700",children:"Gerenciamento Detalhado de Demandas"}),(0,t.jsxs)(d.mQ,{value:I,onValueChange:e=>{Y(e)},className:"w-full",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-3 mb-4 border-b pb-3",children:[(0,t.jsxs)(d.dr,{className:"grid w-full grid-cols-2 md:grid-cols-4 sm:w-auto shrink-0",children:[(0,t.jsxs)(d.SP,{value:"open",children:["Abertas ",P.open.isLoading?(0,t.jsx)(E.Z,{className:"h-3 w-3 animate-spin ml-1.5"}):"(".concat(a.length,")")]}),(0,t.jsxs)(d.SP,{value:"pending",children:["Pendentes ",P.pending.isLoading?(0,t.jsx)(E.Z,{className:"h-3 w-3 animate-spin ml-1.5"}):"(".concat(m.length,")")]}),(0,t.jsxs)(d.SP,{value:"confirmed",children:["Confirmados ",P.confirmed.isLoading?(0,t.jsx)(E.Z,{className:"h-3 w-3 animate-spin ml-1.5"}):"(".concat(u.length,")")]}),(0,t.jsxs)(d.SP,{value:"history",children:["Hist\xf3rico ",P.history.isLoading?(0,t.jsx)(E.Z,{className:"h-3 w-3 animate-spin ml-1.5"}):"(".concat(p.length,")")]})]}),(0,t.jsxs)(c.Vq,{open:T,onOpenChange:e=>{A(e),e||J(null)},children:[(0,t.jsxs)(c.hg,{onClick:ei,className:(0,N.cn)((0,r.d)({variant:"default",size:"sm"}),"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white flex items-center"),children:[(0,t.jsx)(F.Z,{className:"mr-1.5 h-4 w-4"})," Publicar Nova Demanda"]}),(0,t.jsx)($,{onShiftSubmitted:()=>{A(!1),J(null),Y("open"),ea()},initialData:q},q?"edit-".concat(q.id):"new-shift")]})]}),(0,t.jsxs)(d.nU,{value:"open",children:[" ",(0,t.jsxs)(n.Zb,{children:[" ",(0,t.jsx)(n.Ol,{children:(0,t.jsx)(n.ll,{children:"Demandas em Aberto"})})," ",(0,t.jsxs)(n.aY,{children:[" ",P.open.isLoading?(0,t.jsx)(W,{}):P.open.error?(0,t.jsx)(K,{message:P.open.error,onRetry:()=>es("OPEN",o,"open")}):0===a.length?(0,t.jsx)(X,{message:"Nenhuma demanda aberta.",actionButton:(0,t.jsx)(r.z,{size:"sm",onClick:ei,className:"bg-blue-600 hover:bg-blue-700",children:"Publicar Demanda"})}):(0,t.jsx)("div",{className:"space-y-3",children:a.map(e=>(0,t.jsx)(ee,{shift:e,actions:[{label:"Editar",icon:V.Z,onClick:()=>et(e),disabled:"OPEN"!==e.status},{label:"Cancelar",icon:B.Z,onClick:()=>el(e.id),disabled:"OPEN"!==e.status}]},e.id))})," "]})," "]})," "]}),(0,t.jsxs)(d.nU,{value:"pending",children:[" ",(0,t.jsxs)(n.Zb,{children:[" ",(0,t.jsx)(n.Ol,{children:(0,t.jsx)(n.ll,{children:"Demandas Pendentes"})})," ",(0,t.jsxs)(n.aY,{children:[" ",P.pending.isLoading?(0,t.jsx)(W,{}):P.pending.error?(0,t.jsx)(K,{message:P.pending.error,onRetry:()=>es(["PENDING_MATCH_REVIEW"],x,"pending")}):0===m.length?(0,t.jsx)(X,{message:"Nenhuma demanda com pend\xeancias."}):(0,t.jsx)("div",{className:"space-y-3",children:m.map(e=>(0,t.jsx)(ee,{shift:e,actions:[{label:"Ver",icon:U.Z,onClick:()=>{}}]},e.id))})," "]})," "]})," "]}),(0,t.jsxs)(d.nU,{value:"confirmed",children:[" ",(0,t.jsxs)(n.Zb,{children:[" ",(0,t.jsx)(n.Ol,{children:(0,t.jsx)(n.ll,{children:"Demandas Confirmadas"})})," ",(0,t.jsxs)(n.aY,{children:[" ",P.confirmed.isLoading?(0,t.jsx)(W,{}):P.confirmed.error?(0,t.jsx)(K,{message:P.confirmed.error,onRetry:()=>es("CONFIRMED",h,"confirmed")}):0===u.length?(0,t.jsx)(X,{message:"Nenhuma demanda confirmada."}):(0,t.jsx)("div",{className:"space-y-3",children:u.map(e=>(0,t.jsx)(ee,{shift:e,actions:[{label:"Ir para Agenda",icon:k.Z,onClick:()=>s.push("/hospital/schedule"),className:"bg-blue-100 text-blue-700 hover:bg-blue-200"}]},e.id))})," "]})," "]})," "]}),(0,t.jsxs)(d.nU,{value:"history",children:[" ",(0,t.jsxs)(n.Zb,{children:[" ",(0,t.jsx)(n.Ol,{children:(0,t.jsx)(n.ll,{children:"Hist\xf3rico de Demandas"})})," ",(0,t.jsxs)(n.aY,{children:[" ",P.history.isLoading?(0,t.jsx)(W,{}):P.history.error?(0,t.jsx)(K,{message:P.history.error,onRetry:()=>es(["COMPLETED"],g,"history")}):0===p.length?(0,t.jsx)(X,{message:"Nenhum hist\xf3rico."}):(0,t.jsx)("div",{className:"space-y-3",children:p.map(e=>(0,t.jsx)(ee,{shift:e},e.id))})," "]})," "]})," "]})]})]})]})}ee.displayName="ShiftListItem"},66070:function(e,s,a){"use strict";a.d(s,{Ol:function(){return n},SZ:function(){return c},Zb:function(){return r},aY:function(){return o},eW:function(){return m},ll:function(){return d}});var t=a(57437),i=a(2265),l=a(94508);let r=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...i})});r.displayName="Card";let n=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...i})});n.displayName="CardHeader";let d=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...i})});d.displayName="CardTitle";let c=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",a),...i})});c.displayName="CardDescription";let o=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",a),...i})});o.displayName="CardContent";let m=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",a),...i})});m.displayName="CardFooter"},51888:function(e,s,a){"use strict";a.d(s,{R:function(){return D}});var t=a(57437),i=a(2265),l=a(62869),r=a(4216),n=a(94508);let d=e=>{let{shouldScaleBackground:s=!0,...a}=e;return(0,t.jsx)(r.dy.Root,{shouldScaleBackground:s,...a})};d.displayName="Drawer";let c=r.dy.Trigger,o=r.dy.Portal,m=r.dy.Close,x=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(r.dy.Overlay,{ref:s,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80",a),...i})});x.displayName=r.dy.Overlay.displayName;let u=i.forwardRef((e,s)=>{let{className:a,children:i,...l}=e;return(0,t.jsxs)(o,{children:[(0,t.jsx)(x,{}),(0,t.jsxs)(r.dy.Content,{ref:s,className:(0,n.cn)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",a),...l,children:[(0,t.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),i]})]})});u.displayName="DrawerContent";let h=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,n.cn)("grid gap-1.5 p-4 text-center sm:text-left",s),...a})};h.displayName="DrawerHeader";let f=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,n.cn)("mt-auto flex flex-col gap-2 p-4",s),...a})};f.displayName="DrawerFooter";let p=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(r.dy.Title,{ref:s,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",a),...i})});p.displayName=r.dy.Title.displayName;let g=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(r.dy.Description,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a),...i})});g.displayName=r.dy.Description.displayName;var j=a(57054),v=a(23518),N=a(43643);let b=i.forwardRef((e,s)=>{let{className:a,children:i,...l}=e;return(0,t.jsxs)(N.fC,{ref:s,className:(0,n.cn)("relative overflow-hidden",a),...l,children:[(0,t.jsx)(N.l_,{className:"h-full w-full rounded-[inherit]",children:i}),(0,t.jsx)(y,{}),(0,t.jsx)(N.Ns,{})]})});b.displayName=N.fC.displayName;let y=i.forwardRef((e,s)=>{let{className:a,orientation:i="vertical",...l}=e;return(0,t.jsx)(N.gb,{ref:s,orientation:i,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===i&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===i&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...l,children:(0,t.jsx)(N.q4,{className:"relative flex-1 rounded-full bg-border"})})});y.displayName=N.gb.displayName;var w=a(30401),C=a(24156);let E=e=>{let[s,a]=i.useState(!1);return i.useEffect(()=>{let s=window.matchMedia(e);a(s.matches);let t=e=>a(e.matches);return s.addEventListener("change",t),()=>s.removeEventListener("change",t)},[e]),s},S=()=>E("(max-width: 768px)");function D(e){let{selectedState:s,availableCities:a,selectedCities:r,onConfirm:o,className:x}=e,[N,y]=i.useState(!1),[E,D]=i.useState(!1),R=S();i.useEffect(()=>{D(!0)},[]);let[P,k]=i.useState(r);i.useEffect(()=>{k(r)},[r]),i.useEffect(()=>{N&&k(r)},[N,r]),i.useEffect(()=>{k([]),o([])},[s,o]);let L=e=>{k(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},O=()=>{o(P),y(!1)},T=e=>{e||k(r),y(e)},A=!s||0===a.length,Z=r.length>0?"".concat(r.length," cidade(s) selecionada(s)"):A?"Selecione um estado":"Selecione as cidades...",I=()=>(0,t.jsxs)(v.mY,{children:[(0,t.jsx)(v.sZ,{placeholder:"Buscar cidade..."}),(0,t.jsxs)(v.e8,{children:[(0,t.jsx)(v.rb,{children:"Nenhuma cidade encontrada."}),(0,t.jsx)(v.fu,{children:(0,t.jsx)(b,{className:"h-[250px]",children:a.map(e=>(0,t.jsxs)(v.di,{value:e,onSelect:s=>{L(e)},className:"cursor-pointer",children:[(0,t.jsx)(w.Z,{className:(0,n.cn)("mr-2 h-4 w-4",P.includes(e)?"opacity-100":"opacity-0")}),(0,t.jsx)("span",{children:e})]},e))})})]})]});return E?R?(0,t.jsxs)(d,{open:N,onOpenChange:T,children:[(0,t.jsx)(c,{asChild:!0,children:(0,t.jsxs)(l.z,{variant:"outline",role:"combobox",disabled:A,"aria-expanded":N,className:(0,n.cn)("w-full justify-between font-normal h-9",x),children:[Z,(0,t.jsx)(C.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,t.jsxs)(u,{className:"flex flex-col max-h-[90vh]",children:[(0,t.jsxs)(h,{className:"flex-shrink-0 text-left",children:[(0,t.jsx)(p,{children:"Selecione as Cidades"}),(0,t.jsx)(g,{children:"Escolha uma ou mais cidades de atua\xe7\xe3o."})]}),(0,t.jsx)("div",{className:"flex-grow overflow-y-auto px-2",children:(0,t.jsx)(I,{})}),(0,t.jsxs)(f,{className:"pt-4 flex-shrink-0 border-t bg-gray-50",children:[(0,t.jsxs)(l.z,{onClick:O,className:"bg-blue-600 hover:bg-blue-700",children:["Confirmar (",P.length,")"]}),(0,t.jsx)(m,{asChild:!0,children:(0,t.jsx)(l.z,{variant:"outline",children:"Cancelar"})})]})]})]}):(0,t.jsxs)(j.J2,{open:N,onOpenChange:T,children:[(0,t.jsx)(j.xo,{asChild:!0,children:(0,t.jsxs)(l.z,{variant:"outline",role:"combobox",disabled:A,"aria-expanded":N,className:(0,n.cn)("w-full justify-between font-normal h-9",x),children:[Z,(0,t.jsx)(C.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,t.jsxs)(j.yk,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",children:[(0,t.jsx)(I,{}),(0,t.jsxs)("div",{className:"p-2 border-t flex items-center justify-end gap-2 bg-gray-50",children:[(0,t.jsx)(l.z,{variant:"ghost",size:"sm",onClick:()=>k([]),children:"Limpar"}),(0,t.jsxs)(l.z,{size:"sm",onClick:O,className:"bg-blue-600 hover:bg-blue-700",children:["Confirmar (",P.length,")"]})]})]})]}):(0,t.jsx)(l.z,{variant:"outline",disabled:!0,className:(0,n.cn)("w-full justify-between font-normal h-9",x),children:"Carregando..."})}},12339:function(e,s,a){"use strict";a.d(s,{SP:function(){return c},dr:function(){return d},mQ:function(){return n},nU:function(){return o}});var t=a(57437),i=a(2265),l=a(20271),r=a(94508);let n=l.fC,d=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(l.aV,{ref:s,className:(0,r.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...i})});d.displayName=l.aV.displayName;let c=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(l.xz,{ref:s,className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...i})});c.displayName=l.xz.displayName;let o=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(l.VY,{ref:s,className:(0,r.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...i})});o.displayName=l.VY.displayName}},function(e){e.O(0,[4358,9990,6137,9084,9733,6838,4517,6008,9315,4084,7988,3294,2592,7956,2247,8197,3569,2971,2117,1744],function(){return e(e.s=7668)}),_N_E=e.O()}]);