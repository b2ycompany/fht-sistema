(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5328],{85938:function(e,a,t){Promise.resolve().then(t.bind(t,46616))},46616:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return O}});var r=t(57437),s=t(2265),i=t(62869),n=t(35153),o=t(26110),l=t(99397),c=t(18930),d=t(33569),u=t(35974),h=t(94508),m=t(49505),p=t(88501),x=t(83774),f=t(5005),y=t(95252),v=t(33245);let g=Object.entries(m.ku).map(e=>{let[a,t]=e;return{value:a,label:a.split("_").map(e=>e[0].toUpperCase()+e.slice(1)).join(" ")}}),j=e=>{var a;let{shift:t,actions:s}=e,n=(null===(a=g.find(e=>e.value===t.serviceType))||void 0===a?void 0:a.label)||t.serviceType;return(0,r.jsxs)("div",{className:(0,h.cn)("flex flex-col sm:flex-row items-start sm:items-center justify-between border rounded-lg p-4 gap-3 transition-opacity duration-300 bg-white shadow-xs hover:shadow-sm"),children:[(0,r.jsxs)("div",{className:"flex-1 space-y-1.5 pr-2",children:[t.status&&"open"!==t.status&&(0,r.jsx)(u.C,{variant:"filled"===t.status?"secondary":"destructive",className:"text-xs mb-1 capitalize",children:t.status}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-800",children:[" ",(0,r.jsx)(p.Z,{className:"h-4 w-4 shrink-0 text-blue-600"})," ",(0,r.jsx)("span",{suppressHydrationWarning:!0,children:t.date?t.date.toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"}):"Inv\xe1lida"})," ",(0,r.jsxs)("span",{className:"text-gray-500 font-normal",children:["(",t.startTime," - ",t.endTime,")"]})," "]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs text-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1.5 ",children:[(0,r.jsx)(x.Z,{className:"h-3.5 w-3.5 shrink-0 text-purple-600"}),(0,r.jsxs)("span",{children:[t.city,", ",t.state]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5 ",children:[(0,r.jsx)(f.Z,{className:"h-3.5 w-3.5 shrink-0 text-cyan-600"}),(0,r.jsx)("span",{children:n})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5 text-green-700 font-medium col-span-2",children:[(0,r.jsx)(y.Z,{className:"h-3.5 w-3.5 shrink-0"}),(0,r.jsxs)("span",{children:[(0,h.xG)(t.offeredRate),"/hora"]})]})]}),t.specialtiesRequired&&t.specialtiesRequired.length>0&&(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-1 pt-1.5",children:[" ",(0,r.jsx)("span",{className:"text-xs text-gray-500 mr-1 font-medium",children:"Requer:"})," ",t.specialtiesRequired.map(e=>(0,r.jsx)(u.C,{variant:"outline",className:"text-gray-700 text-xs px-1.5 py-0.5 font-normal border-blue-200 bg-blue-50",children:e},e))," "]}),t.notes&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 pt-1.5 italic",children:[(0,r.jsx)(v.Z,{className:"inline h-3 w-3 mr-1 align-middle"}),t.notes]})]}),s&&s.length>0&&(0,r.jsx)("div",{className:"flex items-center space-x-1 shrink-0 mt-2 sm:mt-0 self-end sm:self-center",children:s.map(e=>{var a;return(0,r.jsxs)(i.z,{variant:null!==(a=e.variant)&&void 0!==a?a:"ghost",size:"icon",onClick:e.onClick,className:(0,h.cn)("h-8 w-8",e.className),"aria-label":e.label,children:[" ",(0,r.jsx)(e.icon,{className:"h-4 w-4"})," "]},e.label)})})]})};var N=t(1098),w=t(53647),b=t(26815),E=t(95186),S=t(76818),k=t(57054),C=t(23518),I=t(43044),R=t(32489),A=t(51817);let P=Array.from({length:48},(e,a)=>"".concat(Math.floor(a/2).toString().padStart(2,"0"),":").concat(a%2==0?"00":"30")),V=["SP","RJ","MG","BA","AC","AL","AP","AM","CE","DF","ES","GO","MA","MT","MS","PA","PB","PR","PE","PI","RN","RS","RO","RR","SC","SE","TO"],M={SP:["S\xe3o Paulo","Campinas","Santos","Ara\xe7ariguama","Guarulhos","Osasco"],RJ:["Rio de Janeiro","Niter\xf3i"]},Z=Object.entries(m.ku).map(e=>{let[a,t]=e;return{value:a,label:a.split("_").map(e=>e[0].toUpperCase()+e.slice(1)).join(" ")}}),D=e=>{let{onShiftAdded:a}=e,{toast:t}=(0,n.pm)(),[l,c]=(0,s.useState)([]),[p,x]=(0,s.useState)("07:00"),[f,y]=(0,s.useState)("19:00"),[v,g]=(0,s.useState)(!1),[j,D]=(0,s.useState)(!1),[T,O]=(0,s.useState)([]),[U,z]=(0,s.useState)(""),[B,q]=(0,s.useState)(null),[_,F]=(0,s.useState)(""),[G,J]=(0,s.useState)(""),[L,H]=(0,s.useState)([]),[Q,X]=(0,s.useState)(""),[W,$]=(0,s.useState)(""),[K,Y]=(0,s.useState)(""),ee=(0,s.useCallback)((e,a)=>{if(e&&a&&e===a)q("Hor\xe1rios de in\xedcio e t\xe9rmino n\xe3o podem ser iguais.");else if(e&&a&&e>a){let t=parseInt(e.split(":")[0],10);parseInt(a.split(":")[0],10)>=t?q("In\xedcio deve ser anterior ao t\xe9rmino para hor\xe1rios no mesmo dia."):q(null)}else q(null)},[]);(0,s.useEffect)(()=>{ee(p,f)},[p,f,ee]),(0,s.useEffect)(()=>{_?H(M[_]||[]):H([]),J("")},[_]);let ea=e=>{T.includes(e)||O([...T,e]),z(""),D(!1)},et=e=>{O(a=>a.filter(a=>a!==e))},er=(0,s.useMemo)(()=>m.Gg.filter(e=>"string"==typeof e&&e.toLowerCase().includes(U.toLowerCase())&&!T.includes(e)),[U,T]),es=async()=>{let e=parseFloat(W.replace(",","."));if(0===l.length){t({title:"Selecione data(s)",variant:"destructive"});return}if(B){t({title:"Hor\xe1rio inv\xe1lido",description:B,variant:"destructive"});return}if(!Q){t({title:"Selecione tipo",variant:"destructive"});return}if(isNaN(e)||e<=0){t({title:"Valor hora inv\xe1lido (>0)",variant:"destructive"});return}if(!_||!G){t({title:"Selecione local",variant:"destructive"});return}g(!0);let r=0,s=0,i=l.map(async a=>{try{await (0,d.xf)({date:a,startTime:p,endTime:f,specialtiesRequired:T,serviceType:Q,offeredRate:e,city:G,state:_,notes:K}),r++}catch(e){s++,console.error("Failed add shift ".concat(a.toLocaleDateString(),":"),e),t({title:"Erro ao Salvar Data ".concat(a.toLocaleDateString()),description:e.message||"Erro desconhecido",variant:"destructive"})}});await Promise.all(i),g(!1),r>0&&(t({title:"Opera\xe7\xe3o Conclu\xedda",description:"".concat(r," vaga(s) publicada(s). ").concat(s>0?"".concat(s," falharam."):""),variant:"default"}),a())};return(0,r.jsxs)(o.cZ,{className:"sm:max-w-2xl",children:[(0,r.jsxs)(o.fK,{children:[(0,r.jsx)(o.$N,{children:"Publicar Nova Vaga de Plant\xe3o"}),(0,r.jsx)(o.Be,{children:"Preencha os detalhes da vaga. Selecione m\xfaltiplos dias no calend\xe1rio para criar vagas id\xeanticas para cada dia."})]}),(0,r.jsxs)("div",{className:"grid gap-4 py-4 max-h-[70vh] overflow-y-auto px-2 pr-5",children:[" ",(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(b._,{className:"font-medium text-gray-800",children:"Data(s)*"}),(0,r.jsx)(N.f,{mode:"multiple",selected:l,onSelect:e=>c(e||[]),disabled:{before:new Date(new Date().setHours(0,0,0,0))},className:"p-0 border rounded-md w-auto inline-block shadow-sm",footer:l.length>0?(0,r.jsxs)("p",{className:"text-xs text-blue-700 pt-1",children:[l.length," dia(s) selecionado(s)."]}):null})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(b._,{htmlFor:"start-time-modal",className:"font-medium text-gray-800",children:"In\xedcio*"}),(0,r.jsxs)(w.Ph,{value:p,onValueChange:x,children:[(0,r.jsx)(w.i4,{id:"start-time-modal",className:(0,h.cn)("h-9",B&&"border-red-500"),children:(0,r.jsx)(w.ki,{})}),(0,r.jsx)(w.Bw,{children:P.map(e=>(0,r.jsx)(w.Ql,{value:e,children:e},"st"+e))})]})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(b._,{htmlFor:"end-time-modal",className:"font-medium text-gray-800",children:"T\xe9rmino*"}),(0,r.jsxs)(w.Ph,{value:f,onValueChange:y,children:[(0,r.jsx)(w.i4,{id:"end-time-modal",className:(0,h.cn)("h-9",B&&"border-red-500"),children:(0,r.jsx)(w.ki,{})}),(0,r.jsx)(w.Bw,{children:P.map(e=>(0,r.jsx)(w.Ql,{value:e,children:e},"et"+e))})]})]}),B&&(0,r.jsx)("p",{className:"text-red-600 text-xs col-span-2 pt-1",children:B})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(b._,{htmlFor:"state-modal",className:"font-medium text-gray-800",children:"Estado*"}),(0,r.jsxs)(w.Ph,{value:_,onValueChange:F,children:[(0,r.jsx)(w.i4,{id:"state-modal",className:"h-9",children:(0,r.jsx)(w.ki,{placeholder:"UF..."})}),(0,r.jsx)(w.Bw,{children:V.map(e=>(0,r.jsx)(w.Ql,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(b._,{htmlFor:"city-modal",className:"font-medium text-gray-800",children:"Cidade*"}),(0,r.jsxs)(w.Ph,{value:G,onValueChange:J,disabled:!_||!L.length,children:[(0,r.jsx)(w.i4,{id:"city-modal",className:"h-9",children:(0,r.jsx)(w.ki,{placeholder:_?L.length?"Selecione...":"Sem cidades":"Selec. Estado"})}),(0,r.jsx)(w.Bw,{children:L.map(e=>(0,r.jsx)(w.Ql,{value:e,children:e},e))})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(b._,{htmlFor:"service-type-modal",className:"font-medium text-gray-800",children:"Tipo Atend.*"}),(0,r.jsxs)(w.Ph,{value:Q,onValueChange:X,children:[(0,r.jsx)(w.i4,{id:"service-type-modal",className:"h-9",children:(0,r.jsx)(w.ki,{placeholder:"Selecione..."})}),(0,r.jsx)(w.Bw,{children:Z.map(e=>(0,r.jsx)(w.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(b._,{htmlFor:"offered-rate-modal",className:"font-medium text-gray-800",children:"Valor Hora (R$)*"}),(0,r.jsx)(E.I,{id:"offered-rate-modal",type:"number",min:"0.01",step:"0.01",placeholder:"150.00",value:W,onChange:e=>$(e.target.value),className:"h-9"})]})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsxs)(b._,{className:"flex items-center gap-1.5 font-medium text-gray-800",children:[(0,r.jsx)(I.Z,{className:"h-4 w-4"}),"Especialidades Requeridas (Opcional)"]}),(0,r.jsxs)(k.J2,{open:j,onOpenChange:D,children:[(0,r.jsx)(k.xo,{asChild:!0,children:(0,r.jsx)(i.z,{variant:"outline",className:"w-full justify-start font-normal text-muted-foreground h-9",children:T.length>0?T.join(", "):"Nenhuma (clique p/ adicionar)"})}),(0,r.jsx)(k.yk,{className:"w-[--radix-popover-trigger-width] p-0",children:(0,r.jsxs)(C.mY,{children:[(0,r.jsx)(C.sZ,{placeholder:"Buscar...",value:U,onValueChange:z}),(0,r.jsxs)(C.e8,{children:[(0,r.jsx)(C.rb,{children:"Nenhuma especialidade encontrada."}),(0,r.jsx)(C.fu,{children:er.map(e=>(0,r.jsx)(C.di,{value:e,onSelect:()=>ea(e),className:"cursor-pointer",children:e},e))})]})]})})]}),T.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:T.map(e=>(0,r.jsxs)(u.C,{variant:"secondary",className:"bg-gray-100 hover:bg-gray-200",children:[e,(0,r.jsx)("button",{type:"button",onClick:()=>et(e),className:"ml-1.5 p-0.5 rounded-full outline-none focus:ring-1 focus:ring-ring hover:bg-gray-300",children:(0,r.jsx)(R.Z,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})})]},e))})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(b._,{htmlFor:"notes-modal",className:"font-medium text-gray-800",children:"Notas Adicionais"}),(0,r.jsx)(S.g,{id:"notes-modal",placeholder:"Ex: Entrada pela Portaria B, procurar por Enfermeira Maria...",value:K,onChange:e=>Y(e.target.value)})]})]}),(0,r.jsxs)(o.cN,{className:"mt-2 pt-4 border-t",children:[" ",(0,r.jsx)(o.GG,{asChild:!0,children:(0,r.jsx)(i.z,{type:"button",variant:"outline",disabled:v,children:"Cancelar"})}),(0,r.jsxs)(i.z,{type:"button",onClick:es,disabled:v,children:[v&&(0,r.jsx)(A.Z,{className:"mr-2 h-4 w-4 animate-spin"})," Publicar Vaga(s)"]})]})]})};var T=t(2385);function O(){let{toast:e}=(0,n.pm)(),[a,t]=(0,s.useState)([]),[u,h]=(0,s.useState)(!0),[m,p]=(0,s.useState)(null),[x,f]=(0,s.useState)(!1),y=(0,s.useCallback)(async()=>{h(!0),p(null);try{let e=await (0,d.G2)();t(e.sort((e,a)=>e.date.getTime()-a.date.getTime()||e.startTime.localeCompare(a.startTime)))}catch(a){console.error("Error fetching open shifts:",a),p(a.message||"Erro ao buscar vagas."),e({title:"Erro ao Buscar Vagas",description:a.message,variant:"destructive"})}finally{h(!1)}},[e]);(0,s.useEffect)(()=>{y()},[y]);let v=async a=>{if(a)try{await (0,d.CW)(a),e({title:"Vaga Cancelada",variant:"default"}),y()}catch(a){e({title:"Erro ao Cancelar",description:a.message||"Falha",variant:"destructive"})}};return(0,r.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold",children:"Vagas em Aberto"}),(0,r.jsxs)(o.Vq,{open:x,onOpenChange:f,children:[(0,r.jsx)(o.hg,{asChild:!0,children:(0,r.jsxs)(i.z,{size:"sm",children:[(0,r.jsx)(l.Z,{className:"mr-2 h-4 w-4"})," Publicar Nova Vaga"]})}),(0,r.jsx)(D,{onShiftAdded:()=>{f(!1),y()}})]})]}),u?(0,r.jsx)(T.Gu,{message:"Carregando vagas abertas..."}):m?(0,r.jsx)(T.Te,{message:m,onRetry:y}):0===a.length?(0,r.jsx)(T.ub,{message:"Nenhuma vaga aberta encontrada."}):(0,r.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,r.jsx)(j,{shift:e,actions:[{label:"Cancelar",icon:c.Z,onClick:()=>v(e.id),variant:"ghost",className:"text-red-600 hover:text-red-700 hover:bg-red-50 rounded-full w-8 h-8"}]},e.id))})]})}},2385:function(e,a,t){"use strict";t.d(a,{Gu:function(){return l},Te:function(){return d},ub:function(){return c}});var r=t(57437);t(2265);var s=t(62869),i=t(51817),n=t(43044),o=t(49322);let l=e=>{let{message:a="Carregando..."}=e;return(0,r.jsxs)("div",{className:"flex justify-center items-center py-10 min-h-[150px]",children:[(0,r.jsx)(i.Z,{className:"h-6 w-6 animate-spin text-blue-600"}),(0,r.jsx)("span",{className:"ml-3 text-sm text-gray-600",children:a})]})},c=e=>{let{message:a}=e;return(0,r.jsxs)("div",{className:"text-center text-sm text-gray-500 py-10 min-h-[150px] flex flex-col items-center justify-center bg-gray-50/80 rounded-md border border-dashed",children:[(0,r.jsx)(n.Z,{className:"w-10 h-10 text-gray-400 mb-3"}),a]})},d=e=>{let{message:a,onRetry:t}=e;return(0,r.jsxs)("div",{className:"text-center text-sm text-red-600 py-10 min-h-[150px] flex flex-col items-center justify-center bg-red-50 rounded-md border border-red-200",children:[(0,r.jsx)(o.Z,{className:"w-10 h-10 text-red-500 mb-3"}),(0,r.jsx)("p",{className:"font-medium mb-1",children:"Ocorreu um erro"}),(0,r.jsx)("p",{className:"mb-3 px-4",children:a||"N\xe3o foi poss\xedvel carregar os dados."})," ",t&&(0,r.jsx)(s.z,{variant:"destructive",size:"sm",onClick:t,children:"Tentar Novamente"})]})}},92651:function(e,a,t){"use strict";t.d(a,{CQ:function(){return m},DD:function(){return d},Fl:function(){return j},TX:function(){return x},Ts:function(){return y},XB:function(){return c},bI:function(){return g},c0:function(){return f},et:function(){return v},hc:function(){return N},l5:function(){return u},pH:function(){return p},q9:function(){return h}});var r=t(43301),s=t(5978),i=t(17293),n=t(13491);let o=(0,n.V1)(i.wk,"createStaffUser"),l=(0,n.V1)(i.wk,"confirmUserSetup"),c=async e=>{try{let a=await o(e);if(!a.data.success)throw Error("A fun\xe7\xe3o de backend n\xe3o retornou sucesso.");return a.data.user}catch(e){throw console.error("[AuthService] Erro ao chamar a fun\xe7\xe3o createStaffUser:",e),Error(e.message||"N\xe3o foi poss\xedvel adicionar o membro \xe0 Equipa.")}},d=async()=>{try{await l()}catch(e){console.warn("Falha ao tentar confirmar o primeiro login:",e)}},u=async e=>{try{let a=(0,s.hJ)(i.db,"users"),t=(0,s.IO)(a,(0,s.ar)("hospitalId","==",e)),r=await (0,s.PL)(t);if(r.empty)return[];return r.docs.map(e=>({uid:e.id,...e.data()})).filter(a=>a.uid!==e)}catch(a){throw console.error("[AuthService] Erro ao buscar a Equipa para o hospital ".concat(e,":"),a),Error("N\xe3o foi poss\xedvel carregar a lista da Equipa.")}},h=async(e,a,t)=>{try{let s=await (0,r.Xb)(i.I8,e,a);return await (0,r.ck)(s.user,{displayName:t}),s.user}catch(e){throw console.error("[AuthService] Erro ao criar usu\xe1rio no Auth:",e),e}},m=async(e,a,t,r,n)=>{console.log("--- DEBUGGING: DENTRO DE completeUserRegistration ---"),console.log("Tentando criar perfil para o Utilizador ID:",e),console.log("Payload de dados recebido:",n),console.log("-------------------------------------------------");try{let o={};if("doctor"===r){let{documents:e,specialistDocuments:a,invitationToken:t,...r}=n;o={...r,documents:e,specialistDocuments:a,invitationToken:t||null}}else if("hospital"===r){let{hospitalDocs:e,legalRepDocuments:a,...t}=n;o={companyInfo:{cnpj:t.cnpj,stateRegistration:t.stateRegistration,phone:t.phone,address:t.address},legalRepresentativeInfo:t.legalRepresentativeInfo,hospitalDocs:e,legalRepDocuments:a}}else if(["receptionist","triage_nurse","caravan_admin","admin","backoffice"].includes(r))o={};else throw Error("Tipo de perfil de registro inv\xe1lido.");let l={uid:e,email:a,displayName:t,userType:r,createdAt:(0,s.Bt)(),updatedAt:(0,s.Bt)(),documentVerificationStatus:"PENDING_REVIEW",adminVerificationNotes:"",...o},c=(0,s.JU)(i.db,"users",e);await (0,s.pl)(c,l),console.log("[AuthService] Perfil para ".concat(e," criado com SUCESSO no Firestore."))}catch(e){throw console.error("[AuthService] ERRO CR\xcdTICO ao tentar criar o perfil no Firestore:",e),e}},p=async(e,a)=>{try{return(await (0,r.e5)(i.I8,e,a)).user}catch(e){throw console.error("[AuthService] Login error:",e),e}},x=async()=>{try{await (0,r.w7)(i.I8)}catch(e){throw console.error("[AuthService] Logout error:",e),e}},f=async e=>{try{await (0,r.LS)(i.I8,e)}catch(e){throw console.error("[AuthService] Reset error:",e),e}},y=async()=>{let e=i.I8.currentUser;if(!e)return null;try{let a=(0,s.JU)(i.db,"users",e.uid),t=await (0,s.QT)(a);if(t.exists())return{uid:t.id,...t.data()};return null}catch(e){throw console.error("[AuthService] Get current user data error:",e),e}},v=async e=>{if(!e)return null;try{let a=(0,s.JU)(i.db,"users",e),t=await (0,s.QT)(a);if(t.exists())return{uid:t.id,...t.data()};return console.warn("[AuthService] Nenhum perfil encontrado para o ID: ".concat(e)),null}catch(a){throw console.error("[AuthService] Erro ao buscar perfil para o ID ".concat(e,":"),a),Error("N\xe3o foi poss\xedvel buscar o perfil do utilizador.")}},g=async(e,a)=>{if(!e)throw Error("ID do Doutor n\xe3o fornecido para atualiza\xe7\xe3o.");if(!a||0===Object.keys(a).length){console.warn("[AuthService] Nenhum dado fornecido para atualiza\xe7\xe3o do perfil do doutor.");return}let t=(0,s.JU)(i.db,"users",e),r={};if(Object.keys(a).forEach(e=>{void 0!==a[e]&&("address"===e&&"object"==typeof a.address&&null!==a.address?Object.keys(a.address).forEach(e=>{void 0!==a.address[e]&&(r["address.".concat(e)]=a.address[e])}):r[e]=a[e])}),0===Object.keys(r).length){console.warn("[AuthService] Nenhum dado v\xe1lido para atualizar ap\xf3s filtrar undefined.");return}r.updatedAt=(0,s.Bt)();try{var n;let a=await (0,s.QT)(t);if(!a.exists()||(null===(n=a.data())||void 0===n?void 0:n.userType)!=="doctor")throw Error("Perfil de doutor n\xe3o encontrado ou tipo de usu\xe1rio incorreto para atualiza\xe7\xe3o.");await (0,s.r7)(t,r),console.log("[AuthService] Perfil do doutor ".concat(e," atualizado com sucesso."))}catch(a){throw console.error("[AuthService] Erro ao atualizar perfil do doutor ".concat(e,":"),a),a}},j=async(e,a)=>{try{let t=(0,s.hJ)(i.db,"users"),r=(0,s.IO)(t,(0,s.ar)("userType","==","doctor"),(0,s.ar)("specialties","array-contains",a),(0,s.ar)("healthUnitIds","array-contains",e)),n=await (0,s.PL)(r);if(n.empty)return[];return n.docs.map(e=>({uid:e.id,...e.data()}))}catch(e){throw console.error("[AuthService] Erro ao buscar m\xe9dicos associados por especialidade:",e),Error("N\xe3o foi poss\xedvel carregar a lista de m\xe9dicos para esta unidade.")}},N=async function(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!e)throw Error("ID do usu\xe1rio n\xe3o fornecido.");let n=(0,s.JU)(i.db,"users",e),o={documentVerificationStatus:a,adminVerificationNotes:t,documentRejectionReasons:r,updatedAt:(0,s.Bt)()};"APPROVED"===a&&(o.documentRejectionReasons={},o.adminVerificationNotes="");try{await (0,s.r7)(n,o)}catch(a){throw console.error("Erro ao atualizar status do usu\xe1rio ".concat(e,":"),a),Error("Falha ao atualizar o status do cadastro.")}}},33569:function(e,a,t){"use strict";t.d(a,{AX:function(){return o},CW:function(){return c},G2:function(){return l},S$:function(){return d},xf:function(){return n}});var r=t(5978),s=t(17293),i=t(92651);let n=async e=>{let a=s.I8.currentUser;if(!a)throw Error("Usu\xe1rio n\xe3o autenticado.");let t=await (0,i.Ts)();if(!t||"hospital"!==t.role)throw Error("Perfil de hospital n\xe3o encontrado ou inv\xe1lido.");let n={...e,hospitalId:a.uid,hospitalName:t.displayName,publishedByUID:a.uid,publishedByName:a.displayName||t.displayName||void 0,status:"OPEN",createdAt:(0,r.Bt)(),updatedAt:(0,r.Bt)()};try{let e=await (0,r.ET)((0,r.hJ)(s.db,"shiftRequirements"),n);return console.log("[SERVICE] Nova Demanda de Plant\xe3o adicionada com ID: ",e.id),e.id}catch(e){throw console.error("[SERVICE] Erro ao adicionar demanda:",e),e}},o=async(e,a)=>{if(!s.I8.currentUser)throw Error("Usu\xe1rio n\xe3o autenticado.");let t=(0,r.JU)(s.db,"shiftRequirements",e);try{await (0,r.r7)(t,{...a,updatedAt:(0,r.Bt)()}),console.log("[SERVICE] Demanda ID:",e,"atualizada.")}catch(e){throw console.error("[SERVICE] Erro ao atualizar demanda:",e),e}},l=async()=>{let e=s.I8.currentUser;if(!e)return[];try{let a=(0,r.IO)((0,r.hJ)(s.db,"shiftRequirements"),(0,r.ar)("hospitalId","==",e.uid),(0,r.ar)("status","==","OPEN"),(0,r.Xo)("createdAt","desc")),t=await (0,r.PL)(a),i=[];return t.forEach(e=>{i.push({id:e.id,...e.data()})}),console.log("[SERVICE] getHospitalShiftRequirements (OPEN): Encontradas ".concat(i.length," demandas.")),i}catch(e){throw console.error("[SERVICE] Erro getHospitalShiftRequirements:",e),e}},c=async e=>{if(!s.I8.currentUser)throw Error("Usu\xe1rio n\xe3o autenticado.");try{await (0,r.oe)((0,r.JU)(s.db,"shiftRequirements",e)),console.log("[SERVICE] Demanda deletada ID:",e)}catch(e){throw console.error("[SERVICE] Erro ao deletar demanda:",e),e}},d=async e=>{if(!e)throw Error("ID do hospital n\xe3o fornecido.");return{kpis:{},monthlyCosts:[],specialtyDemand:[]}}},5005:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(79205).Z)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},88501:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(79205).Z)("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]])},49322:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(79205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},43044:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(79205).Z)("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]])},95252:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(79205).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},33245:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(79205).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},83774:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(79205).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},99397:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(79205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},18930:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(79205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}},function(e){e.O(0,[4358,9990,6137,9084,9733,6838,4517,6008,9315,4084,7988,3294,2592,8197,2971,2117,1744],function(){return e(e.s=85938)}),_N_E=e.O()}]);