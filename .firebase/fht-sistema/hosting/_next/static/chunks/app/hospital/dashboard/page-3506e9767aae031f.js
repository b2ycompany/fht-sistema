(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7537],{80723:function(e,t,r){Promise.resolve().then(r.bind(r,77920))},77920:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return j}});var n=r(57437),a=r(2265),s=r(46413),i=r(35153),o=r(66070),l=r(51817),u=r(49322),d=r(95805),c=r(43044),f=r(41671),p=r(95337),m=r(17293),h=r(5978);let x=async e=>{if(!e)throw Error("O ID da unidade de sa\xfade \xe9 obrigat\xf3rio.");try{let t=(0,h.hJ)(m.db,"serviceQueue"),r=(0,h.hJ)(m.db,"consultations"),n=(0,h.hJ)(m.db,"users"),a=new Date;a.setHours(0,0,0,0);let s=h.EK.fromDate(a),i=(0,h.IO)(t,(0,h.ar)("unitId","==",e),(0,h.ar)("status","==","Aguardando Triagem")),o=(0,h.IO)(t,(0,h.ar)("unitId","==",e),(0,h.ar)("status","==","Aguardando Atendimento")),l=(0,h.IO)(r,(0,h.ar)("hospitalId","==",e),(0,h.ar)("status","==","COMPLETED"),(0,h.ar)("createdAt",">=",s)),u=(0,h.IO)(n,(0,h.ar)("userType","==","doctor"),(0,h.ar)("healthUnitIds","array-contains",e)),[d,c,f,p]=await Promise.all([(0,h.Yp)(i),(0,h.Yp)(o),(0,h.Yp)(l),(0,h.Yp)(u)]);return{triageQueueCount:d.data().count,consultationQueueCount:c.data().count,completedTodayCount:f.data().count,associatedDoctorsCount:p.data().count}}catch(e){throw console.error("Erro ao buscar dados para o painel do gestor:",e),Error("N\xe3o foi poss\xedvel carregar os indicadores da unidade. Verifique a sua conex\xe3o ou tente novamente mais tarde.")}};var y=r(62869),v=r(27648);let g=e=>{let{title:t,value:r,icon:a,description:s,isLoading:i}=e;return(0,n.jsxs)(o.Zb,{children:[(0,n.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(o.ll,{className:"text-sm font-medium",children:t}),(0,n.jsx)(a,{className:"h-5 w-5 text-muted-foreground"})]}),(0,n.jsxs)(o.aY,{children:[i?(0,n.jsx)(l.Z,{className:"h-7 w-7 animate-spin text-muted-foreground"}):(0,n.jsx)("div",{className:"text-2xl font-bold",children:r}),s&&!i&&(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:s})]})]})};function j(){var e,t,r,m;let{userProfile:h,loading:j}=(0,s.a)(),{toast:b}=(0,i.pm)(),[N,k]=(0,a.useState)(null),[w,C]=(0,a.useState)(!0),[S,T]=(0,a.useState)(null);return((0,a.useEffect)(()=>{h&&"hospital"===h.userType&&(async()=>{C(!0),T(null);try{let e=await x(h.uid);k(e)}catch(e){T(e.message),b({title:"Erro ao Carregar Painel",description:e.message,variant:"destructive"})}finally{C(!1)}})()},[h,b]),j)?(0,n.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,n.jsx)(l.Z,{className:"h-12 w-12 animate-spin text-blue-600"})}):S?(0,n.jsx)("div",{className:"container mx-auto p-6 text-center",children:(0,n.jsxs)(o.Zb,{className:"max-w-md mx-auto bg-red-50 border-red-300",children:[(0,n.jsx)(o.Ol,{children:(0,n.jsxs)(o.ll,{className:"flex items-center justify-center gap-2 text-red-700",children:[(0,n.jsx)(u.Z,{}),"Falha ao Carregar"]})}),(0,n.jsx)(o.aY,{children:(0,n.jsx)("p",{className:"text-red-600",children:S})})]})}):(0,n.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:[(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Painel da Unidade"}),(0,n.jsxs)("p",{className:"text-muted-foreground",children:["Vis\xe3o geral da opera\xe7\xe3o de hoje em ",null==h?void 0:h.displayName,"."]})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(y.z,{asChild:!0,variant:"outline",children:(0,n.jsxs)(v.default,{href:"/hospital/dashboard/equipe",children:[(0,n.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),"Gerir Equipa"]})}),(0,n.jsx)(y.z,{asChild:!0,children:(0,n.jsxs)(v.default,{href:"/hospital/shifts",children:[(0,n.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Gerir Plant\xf5es"]})})]})]}),(0,n.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,n.jsx)(g,{title:"Pacientes na Fila de Triagem",value:null!==(e=null==N?void 0:N.triageQueueCount)&&void 0!==e?e:0,icon:d.Z,description:"Aguardando o primeiro atendimento.",isLoading:w}),(0,n.jsx)(g,{title:"Pacientes na Fila de Atendimento",value:null!==(t=null==N?void 0:N.consultationQueueCount)&&void 0!==t?t:0,icon:d.Z,description:"Triados e aguardando o m\xe9dico.",isLoading:w}),(0,n.jsx)(g,{title:"Atendimentos Finalizados Hoje",value:null!==(r=null==N?void 0:N.completedTodayCount)&&void 0!==r?r:0,icon:f.Z,description:"Total de consultas conclu\xeddas.",isLoading:w}),(0,n.jsx)(g,{title:"M\xe9dicos Associados",value:null!==(m=null==N?void 0:N.associatedDoctorsCount)&&void 0!==m?m:0,icon:p.Z,description:"Profissionais vinculados a esta unidade.",isLoading:w})]})]})}},62869:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return u}});var n=r(57437),a=r(2265),s=r(37053),i=r(90535),o=r(94508);let l=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:u=!1,...d}=e,c=u?s.g7:"button";return(0,n.jsx)(c,{className:(0,o.cn)(l({variant:a,size:i,className:r})),ref:t,...d})});u.displayName="Button"},66070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return u},Zb:function(){return i},aY:function(){return d},eW:function(){return c},ll:function(){return l}});var n=r(57437),a=r(2265),s=r(94508);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...a})});o.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});l.displayName="CardTitle";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...a})});u.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...a})});c.displayName="CardFooter"},35153:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var n=r(2265);let a=0,s=new Map,i=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],u={toasts:[]};function d(e){u=o(u,e),l.forEach(e=>{e(u)})}function c(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||n()}}}),{id:r,dismiss:n,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=n.useState(u);return n.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},49322:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},41671:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},43044:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]])},51817:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},95337:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]])},95805:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},99376:function(e,t,r){"use strict";var n=r(35475);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},98575:function(e,t,r){"use strict";r.d(t,{F:function(){return s},e:function(){return i}});var n=r(2265);function a(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function s(...e){return t=>{let r=!1,n=e.map(e=>{let n=a(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():a(e[t],null)}}}}function i(...e){return n.useCallback(s(...e),e)}},37053:function(e,t,r){"use strict";r.d(t,{Z8:function(){return i},g7:function(){return o},sA:function(){return u}});var n=r(2265),a=r(98575),s=r(57437);function i(e){let t=function(e){let t=n.forwardRef((e,t)=>{let{children:r,...s}=e;if(n.isValidElement(r)){let e,i;let o=(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.props.ref:r.props.ref||r.ref,l=function(e,t){let r={...t};for(let n in t){let a=e[n],s=t[n];/^on[A-Z]/.test(n)?a&&s?r[n]=(...e)=>{let t=s(...e);return a(...e),t}:a&&(r[n]=a):"style"===n?r[n]={...a,...s}:"className"===n&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props);return r.type!==n.Fragment&&(l.ref=t?(0,a.F)(t,o):o),n.cloneElement(r,l)}return n.Children.count(r)>1?n.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=n.forwardRef((e,r)=>{let{children:a,...i}=e,o=n.Children.toArray(a),l=o.find(d);if(l){let e=l.props.children,a=o.map(t=>t!==l?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,s.jsx)(t,{...i,ref:r,children:n.isValidElement(e)?n.cloneElement(e,void 0,a):null})}return(0,s.jsx)(t,{...i,ref:r,children:a})});return r.displayName=`${e}.Slot`,r}var o=i("Slot"),l=Symbol("radix.slottable");function u(e){let t=({children:e})=>(0,s.jsx)(s.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=l,t}function d(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===l}},90535:function(e,t,r){"use strict";r.d(t,{j:function(){return i}});var n=r(61994);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,s=n.W,i=(e,t)=>r=>{var n;if((null==t?void 0:t.variants)==null)return s(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:i,defaultVariants:o}=t,l=Object.keys(i).map(e=>{let t=null==r?void 0:r[e],n=null==o?void 0:o[e];if(null===t)return null;let s=a(t)||a(n);return i[e][s]}),u=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return s(e,l,null==t?void 0:null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:r,className:n,...a}=t;return Object.entries(a).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...o,...u}[t]):({...o,...u})[t]===r})?[...e,r,n]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}},function(e){e.O(0,[3609,9015,6137,9388,7648,3073,2971,2117,1744],function(){return e(e.s=80723)}),_N_E=e.O()}]);