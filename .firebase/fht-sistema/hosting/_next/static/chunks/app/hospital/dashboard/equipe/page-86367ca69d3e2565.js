(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7901],{43413:function(e,t,r){Promise.resolve().then(r.bind(r,52520))},52520:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var n=r(57437),a=r(2265),s=r(17293),i=r(5978),l=r(13491),o=r(46413),d=r(35153),c=r(62869),u=r(66070),f=r(73578),p=r(26110),m=r(95186),x=r(26815),h=r(53647),j=r(51817),g=r(26937),v=r(95805);let y=e=>{let{hospitalId:t,onStaffAdded:r}=e,{toast:i}=(0,d.pm)(),[o,u]=(0,a.useState)(""),[f,g]=(0,a.useState)(""),[v,y]=(0,a.useState)(""),[N,w]=(0,a.useState)(!1),b=async()=>{if(!o||!f||!v){i({title:"Campos obrigat\xf3rios",description:"Por favor, preencha nome, email e o papel do profissional.",variant:"destructive"});return}w(!0);try{let e=(0,l.V1)(s.wk,"createStaffUser");await e({hospitalId:t,name:o,email:f,userType:v}),i({title:"Sucesso!",description:"Um convite foi enviado para ".concat(o,"."),className:"bg-green-600 text-white"}),r()}catch(e){console.error("Erro ao criar profissional:",e),i({title:"Erro ao criar profissional",description:e.message,variant:"destructive"})}finally{w(!1)}};return(0,n.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,n.jsxs)("div",{className:"space-y-1.5",children:[(0,n.jsx)(x._,{htmlFor:"name",children:"Nome Completo"}),(0,n.jsx)(m.I,{id:"name",value:o,onChange:e=>u(e.target.value)})]}),(0,n.jsxs)("div",{className:"space-y-1.5",children:[(0,n.jsx)(x._,{htmlFor:"email",children:"Email"}),(0,n.jsx)(m.I,{id:"email",type:"email",value:f,onChange:e=>g(e.target.value)})]}),(0,n.jsxs)("div",{className:"space-y-1.5",children:[(0,n.jsx)(x._,{htmlFor:"userType",children:"Papel / Fun\xe7\xe3o"}),(0,n.jsxs)(h.Ph,{value:v,onValueChange:e=>y(e),children:[(0,n.jsx)(h.i4,{children:(0,n.jsx)(h.ki,{placeholder:"Selecione um papel..."})}),(0,n.jsxs)(h.Bw,{children:[(0,n.jsx)(h.Ql,{value:"receptionist",children:"Recepcionista"}),(0,n.jsx)(h.Ql,{value:"triage_nurse",children:"Enfermeiro(a) de Triagem"}),(0,n.jsx)(h.Ql,{value:"caravan_admin",children:"Administrativo do Multir\xe3o"})]})]})]}),(0,n.jsx)(p.cN,{children:(0,n.jsxs)(c.z,{onClick:b,disabled:N,children:[N&&(0,n.jsx)(j.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Adicionar e Enviar Convite"]})})]})};function N(){let{user:e}=(0,o.a)(),[t,r]=(0,a.useState)([]),[l,d]=(0,a.useState)(!0),[m,x]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{if(!e)return;let t=(0,i.IO)((0,i.hJ)(s.db,"users"),(0,i.ar)("hospitalId","==",e.uid)),n=(0,i.cf)(t,e=>{r(e.docs.map(e=>{let t=e.data();return{uid:e.id,displayName:t.displayName||"Nome n\xe3o informado",email:t.email||"Email n\xe3o informado",userType:t.userType||"N\xe3o definido",createdAt:t.createdAt,updatedAt:t.updatedAt,hospitalId:t.hospitalId}})),d(!1)});return()=>n()},[e]),l)?(0,n.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,n.jsx)(j.Z,{className:"h-12 w-12 animate-spin text-blue-600"})}):(0,n.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Gest\xe3o de Equipa"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Adicione e gerencie os profissionais da sua unidade."})]}),(0,n.jsxs)(c.z,{onClick:()=>x(!0),children:[(0,n.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),"Adicionar Membro da Equipa"]})]}),(0,n.jsxs)(u.Zb,{children:[(0,n.jsx)(u.Ol,{children:(0,n.jsxs)(u.ll,{className:"flex items-center gap-2",children:[(0,n.jsx)(v.Z,{})," Profissionais Cadastrados"]})}),(0,n.jsx)(u.aY,{children:(0,n.jsxs)(f.iA,{children:[(0,n.jsx)(f.xD,{children:(0,n.jsxs)(f.SC,{children:[(0,n.jsx)(f.ss,{children:"Nome"}),(0,n.jsx)(f.ss,{children:"Email"}),(0,n.jsx)(f.ss,{children:"Papel"})]})}),(0,n.jsx)(f.RM,{children:t.length>0?t.map(e=>{var t;return(0,n.jsxs)(f.SC,{children:[(0,n.jsx)(f.pj,{className:"font-medium",children:e.displayName}),(0,n.jsx)(f.pj,{children:e.email}),(0,n.jsx)(f.pj,{className:"capitalize",children:(null===(t=e.userType)||void 0===t?void 0:t.replace(/_/g," "))||"N/A"})]},e.uid)}):(0,n.jsx)(f.SC,{children:(0,n.jsx)(f.pj,{colSpan:3,className:"h-24 text-center",children:"Nenhum profissional cadastrado ainda."})})})]})})]}),(0,n.jsx)(p.Vq,{open:m,onOpenChange:x,children:(0,n.jsxs)(p.cZ,{children:[(0,n.jsxs)(p.fK,{children:[(0,n.jsx)(p.$N,{children:"Adicionar Novo Profissional"}),(0,n.jsx)(p.Be,{children:"Um convite por e-mail ser\xe1 enviado para que o profissional defina sua senha e acesse a plataforma."})]}),e&&(0,n.jsx)(y,{hospitalId:e.uid,onStaffAdded:()=>x(!1)})]})})]})}},66070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},eW:function(){return u},ll:function(){return o}});var n=r(57437),a=r(2265),s=r(94508);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});o.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},53647:function(e,t,r){"use strict";r.d(t,{Bw:function(){return x},Ph:function(){return c},Ql:function(){return h},i4:function(){return f},ki:function(){return u}});var n=r(57437),a=r(2265),s=r(56873),i=r(40875),l=r(22135),o=r(30401),d=r(94508);let c=s.fC;s.ZA;let u=s.B4,f=a.forwardRef((e,t)=>{let{className:r,children:a,...l}=e;return(0,n.jsxs)(s.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...l,children:[a,(0,n.jsx)(s.JO,{asChild:!0,children:(0,n.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=s.xz.displayName;let p=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,n.jsx)(l.Z,{className:"h-4 w-4"})})});p.displayName=s.u_.displayName;let m=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,n.jsx)(i.Z,{className:"h-4 w-4"})})});m.displayName=s.$G.displayName;let x=a.forwardRef((e,t)=>{let{className:r,children:a,position:i="popper",...l}=e;return(0,n.jsx)(s.h_,{children:(0,n.jsxs)(s.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...l,children:[(0,n.jsx)(p,{}),(0,n.jsx)(s.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,n.jsx)(m,{})]})})});x.displayName=s.VY.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...a})}).displayName=s.__.displayName;let h=a.forwardRef((e,t)=>{let{className:r,children:a,...i}=e;return(0,n.jsxs)(s.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(s.wU,{children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,n.jsx)(s.eT,{children:a})]})});h.displayName=s.ck.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",r),...a})}).displayName=s.Z0.displayName},26937:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},95805:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},32489:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},49027:function(e,t,r){"use strict";r.d(t,{Dx:function(){return en},VY:function(){return er},aV:function(){return et},dk:function(){return ea},fC:function(){return X},h_:function(){return ee},jm:function(){return H},p8:function(){return N},x8:function(){return es},xz:function(){return L}});var n=r(2265),a=r(6741),s=r(98575),i=r(73966),l=r(99255),o=r(80886),d=r(15278),c=r(99103),u=r(83832),f=r(71599),p=r(66840),m=r(86097),x=r(87922),h=r(5478),j=r(37053),g=r(57437),v="Dialog",[y,N]=(0,i.b)(v),[w,b]=y(v),C=e=>{let{__scopeDialog:t,children:r,open:a,defaultOpen:s,onOpenChange:i,modal:d=!0}=e,c=n.useRef(null),u=n.useRef(null),[f,p]=(0,o.T)({prop:a,defaultProp:null!=s&&s,onChange:i,caller:v});return(0,g.jsx)(w,{scope:t,triggerRef:c,contentRef:u,contentId:(0,l.M)(),titleId:(0,l.M)(),descriptionId:(0,l.M)(),open:f,onOpenChange:p,onOpenToggle:n.useCallback(()=>p(e=>!e),[p]),modal:d,children:r})};C.displayName=v;var R="DialogTrigger",k=n.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,i=b(R,r),l=(0,s.e)(t,i.triggerRef);return(0,g.jsx)(p.WV.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Q(i.open),...n,ref:l,onClick:(0,a.Mj)(e.onClick,i.onOpenToggle)})});k.displayName=R;var _="DialogPortal",[D,E]=y(_,{forceMount:void 0}),I=e=>{let{__scopeDialog:t,forceMount:r,children:a,container:s}=e,i=b(_,t);return(0,g.jsx)(D,{scope:t,forceMount:r,children:n.Children.map(a,e=>(0,g.jsx)(f.z,{present:r||i.open,children:(0,g.jsx)(u.h,{asChild:!0,container:s,children:e})}))})};I.displayName=_;var Z="DialogOverlay",M=n.forwardRef((e,t)=>{let r=E(Z,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,s=b(Z,e.__scopeDialog);return s.modal?(0,g.jsx)(f.z,{present:n||s.open,children:(0,g.jsx)(A,{...a,ref:t})}):null});M.displayName=Z;var O=(0,j.Z8)("DialogOverlay.RemoveScroll"),A=n.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,a=b(Z,r);return(0,g.jsx)(x.Z,{as:O,allowPinchZoom:!0,shards:[a.contentRef],children:(0,g.jsx)(p.WV.div,{"data-state":Q(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),S="DialogContent",F=n.forwardRef((e,t)=>{let r=E(S,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,s=b(S,e.__scopeDialog);return(0,g.jsx)(f.z,{present:n||s.open,children:s.modal?(0,g.jsx)(P,{...a,ref:t}):(0,g.jsx)(T,{...a,ref:t})})});F.displayName=S;var P=n.forwardRef((e,t)=>{let r=b(S,e.__scopeDialog),i=n.useRef(null),l=(0,s.e)(t,r.contentRef,i);return n.useEffect(()=>{let e=i.current;if(e)return(0,h.Ry)(e)},[]),(0,g.jsx)(V,{...e,ref:l,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,a.Mj)(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null===(t=r.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:(0,a.Mj)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:(0,a.Mj)(e.onFocusOutside,e=>e.preventDefault())})}),T=n.forwardRef((e,t)=>{let r=b(S,e.__scopeDialog),a=n.useRef(!1),s=n.useRef(!1);return(0,g.jsx)(V,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var n,i;null===(n=e.onCloseAutoFocus)||void 0===n||n.call(e,t),t.defaultPrevented||(a.current||null===(i=r.triggerRef.current)||void 0===i||i.focus(),t.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:t=>{var n,i;null===(n=e.onInteractOutside)||void 0===n||n.call(e,t),t.defaultPrevented||(a.current=!0,"pointerdown"!==t.detail.originalEvent.type||(s.current=!0));let l=t.target;(null===(i=r.triggerRef.current)||void 0===i?void 0:i.contains(l))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})}),V=n.forwardRef((e,t)=>{let{__scopeDialog:r,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:l,...o}=e,u=b(S,r),f=n.useRef(null),p=(0,s.e)(t,f);return(0,m.EW)(),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.M,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:i,onUnmountAutoFocus:l,children:(0,g.jsx)(d.XB,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Q(u.open),...o,ref:p,onDismiss:()=>u.onOpenChange(!1)})}),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(J,{titleId:u.titleId}),(0,g.jsx)(K,{contentRef:f,descriptionId:u.descriptionId})]})]})}),z="DialogTitle",W=n.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,a=b(z,r);return(0,g.jsx)(p.WV.h2,{id:a.titleId,...n,ref:t})});W.displayName=z;var B="DialogDescription",q=n.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,a=b(B,r);return(0,g.jsx)(p.WV.p,{id:a.descriptionId,...n,ref:t})});q.displayName=B;var U="DialogClose",Y=n.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,s=b(U,r);return(0,g.jsx)(p.WV.button,{type:"button",...n,ref:t,onClick:(0,a.Mj)(e.onClick,()=>s.onOpenChange(!1))})});function Q(e){return e?"open":"closed"}Y.displayName=U;var G="DialogTitleWarning",[H,$]=(0,i.k)(G,{contentName:S,titleName:z,docsSlug:"dialog"}),J=e=>{let{titleId:t}=e,r=$(G),a="`".concat(r.contentName,"` requires a `").concat(r.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(r.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(r.docsSlug);return n.useEffect(()=>{t&&!document.getElementById(t)&&console.error(a)},[a,t]),null},K=e=>{let{contentRef:t,descriptionId:r}=e,a=$("DialogDescriptionWarning"),s="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(a.contentName,"}.");return n.useEffect(()=>{var e;let n=null===(e=t.current)||void 0===e?void 0:e.getAttribute("aria-describedby");r&&n&&!document.getElementById(r)&&console.warn(s)},[s,t,r]),null},X=C,L=k,ee=I,et=M,er=F,en=W,ea=q,es=Y}},function(e){e.O(0,[4358,9990,6137,9084,9733,6838,4517,6008,9315,3464,2971,2117,1744],function(){return e(e.s=43413)}),_N_E=e.O()}]);