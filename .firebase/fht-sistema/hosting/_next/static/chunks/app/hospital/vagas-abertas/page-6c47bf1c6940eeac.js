(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5328],{85938:function(e,a,s){Promise.resolve().then(s.bind(s,74770))},74770:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return F}});var t=s(57437),r=s(2265),l=s(62869),i=s(35153),n=s(26110),c=s(99397),d=s(18930),o=s(33569),h=s(35974),m=s(94508),x=s(49505),u=s(88501),p=s(83774),j=s(5005),y=s(95252),g=s(33245);let f=Object.entries(x.ku).map(e=>{let[a,s]=e;return{value:a,label:a.split("_").map(e=>e[0].toUpperCase()+e.slice(1)).join(" ")}}),v=e=>{var a;let{shift:s,actions:r}=e,i=(null===(a=f.find(e=>e.value===s.serviceType))||void 0===a?void 0:a.label)||s.serviceType;return(0,t.jsxs)("div",{className:(0,m.cn)("flex flex-col sm:flex-row items-start sm:items-center justify-between border rounded-lg p-4 gap-3 transition-opacity duration-300 bg-white shadow-xs hover:shadow-sm"),children:[(0,t.jsxs)("div",{className:"flex-1 space-y-1.5 pr-2",children:[s.status&&"open"!==s.status&&(0,t.jsx)(h.C,{variant:"filled"===s.status?"secondary":"destructive",className:"text-xs mb-1 capitalize",children:s.status}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-800",children:[" ",(0,t.jsx)(u.Z,{className:"h-4 w-4 shrink-0 text-blue-600"})," ",(0,t.jsx)("span",{suppressHydrationWarning:!0,children:s.date?s.date.toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"}):"Inv\xe1lida"})," ",(0,t.jsxs)("span",{className:"text-gray-500 font-normal",children:["(",s.startTime," - ",s.endTime,")"]})," "]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs text-gray-600",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 ",children:[(0,t.jsx)(p.Z,{className:"h-3.5 w-3.5 shrink-0 text-purple-600"}),(0,t.jsxs)("span",{children:[s.city,", ",s.state]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 ",children:[(0,t.jsx)(j.Z,{className:"h-3.5 w-3.5 shrink-0 text-cyan-600"}),(0,t.jsx)("span",{children:i})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-green-700 font-medium col-span-2",children:[(0,t.jsx)(y.Z,{className:"h-3.5 w-3.5 shrink-0"}),(0,t.jsxs)("span",{children:[(0,m.xG)(s.offeredRate),"/hora"]})]})]}),s.specialtiesRequired&&s.specialtiesRequired.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-1 pt-1.5",children:[" ",(0,t.jsx)("span",{className:"text-xs text-gray-500 mr-1 font-medium",children:"Requer:"})," ",s.specialtiesRequired.map(e=>(0,t.jsx)(h.C,{variant:"outline",className:"text-gray-700 text-xs px-1.5 py-0.5 font-normal border-blue-200 bg-blue-50",children:e},e))," "]}),s.notes&&(0,t.jsxs)("p",{className:"text-xs text-gray-500 pt-1.5 italic",children:[(0,t.jsx)(g.Z,{className:"inline h-3 w-3 mr-1 align-middle"}),s.notes]})]}),r&&r.length>0&&(0,t.jsx)("div",{className:"flex items-center space-x-1 shrink-0 mt-2 sm:mt-0 self-end sm:self-center",children:r.map(e=>{var a;return(0,t.jsxs)(l.z,{variant:null!==(a=e.variant)&&void 0!==a?a:"ghost",size:"icon",onClick:e.onClick,className:(0,m.cn)("h-8 w-8",e.className),"aria-label":e.label,children:[" ",(0,t.jsx)(e.icon,{className:"h-4 w-4"})," "]},e.label)})})]})};var N=s(1098),b=s(53647),k=s(26815),w=s(95186),C=s(76818),S=s(57054),M=s(23518),Z=s(43044),P=s(32489),E=s(51817);let R=Array.from({length:48},(e,a)=>"".concat(Math.floor(a/2).toString().padStart(2,"0"),":").concat(a%2==0?"00":"30")),V=["SP","RJ","MG","BA","AC","AL","AP","AM","CE","DF","ES","GO","MA","MT","MS","PA","PB","PR","PE","PI","RN","RS","RO","RR","SC","SE","TO"],_={SP:["S\xe3o Paulo","Campinas","Santos","Ara\xe7ariguama","Guarulhos","Osasco"],RJ:["Rio de Janeiro","Niter\xf3i"]},T=Object.entries(x.ku).map(e=>{let[a,s]=e;return{value:a,label:a.split("_").map(e=>e[0].toUpperCase()+e.slice(1)).join(" ")}}),A=e=>{let{onShiftAdded:a}=e,{toast:s}=(0,i.pm)(),[c,d]=(0,r.useState)([]),[u,p]=(0,r.useState)("07:00"),[j,y]=(0,r.useState)("19:00"),[g,f]=(0,r.useState)(!1),[v,A]=(0,r.useState)(!1),[z,B]=(0,r.useState)([]),[O,q]=(0,r.useState)(""),[F,D]=(0,r.useState)(null),[H,G]=(0,r.useState)(""),[I,L]=(0,r.useState)(""),[Q,J]=(0,r.useState)([]),[U,W]=(0,r.useState)(""),[$,K]=(0,r.useState)(""),[Y,X]=(0,r.useState)(""),ee=(0,r.useCallback)((e,a)=>{if(e&&a&&e===a)D("Hor\xe1rios de in\xedcio e t\xe9rmino n\xe3o podem ser iguais.");else if(e&&a&&e>a){let s=parseInt(e.split(":")[0],10);parseInt(a.split(":")[0],10)>=s?D("In\xedcio deve ser anterior ao t\xe9rmino para hor\xe1rios no mesmo dia."):D(null)}else D(null)},[]);(0,r.useEffect)(()=>{ee(u,j)},[u,j,ee]),(0,r.useEffect)(()=>{H?J(_[H]||[]):J([]),L("")},[H]);let ea=e=>{z.includes(e)||B([...z,e]),q(""),A(!1)},es=e=>{B(a=>a.filter(a=>a!==e))},et=(0,r.useMemo)(()=>x.Gg.filter(e=>"string"==typeof e&&e.toLowerCase().includes(O.toLowerCase())&&!z.includes(e)),[O,z]),er=async()=>{let e=parseFloat($.replace(",","."));if(0===c.length){s({title:"Selecione data(s)",variant:"destructive"});return}if(F){s({title:"Hor\xe1rio inv\xe1lido",description:F,variant:"destructive"});return}if(!U){s({title:"Selecione tipo",variant:"destructive"});return}if(isNaN(e)||e<=0){s({title:"Valor hora inv\xe1lido (>0)",variant:"destructive"});return}if(!H||!I){s({title:"Selecione local",variant:"destructive"});return}f(!0);let t=0,r=0,l=c.map(async a=>{try{await (0,o.xf)({date:a,startTime:u,endTime:j,specialtiesRequired:z,serviceType:U,offeredRate:e,city:I,state:H,notes:Y}),t++}catch(e){r++,console.error("Failed add shift ".concat(a.toLocaleDateString(),":"),e),s({title:"Erro ao Salvar Data ".concat(a.toLocaleDateString()),description:e.message||"Erro desconhecido",variant:"destructive"})}});await Promise.all(l),f(!1),t>0&&(s({title:"Opera\xe7\xe3o Conclu\xedda",description:"".concat(t," vaga(s) publicada(s). ").concat(r>0?"".concat(r," falharam."):""),variant:"default"}),a())};return(0,t.jsxs)(n.cZ,{className:"sm:max-w-2xl",children:[(0,t.jsxs)(n.fK,{children:[(0,t.jsx)(n.$N,{children:"Publicar Nova Vaga de Plant\xe3o"}),(0,t.jsx)(n.Be,{children:"Preencha os detalhes da vaga. Selecione m\xfaltiplos dias no calend\xe1rio para criar vagas id\xeanticas para cada dia."})]}),(0,t.jsxs)("div",{className:"grid gap-4 py-4 max-h-[70vh] overflow-y-auto px-2 pr-5",children:[" ",(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(k._,{className:"font-medium text-gray-800",children:"Data(s)*"}),(0,t.jsx)(N.f,{mode:"multiple",selected:c,onSelect:e=>d(e||[]),disabled:{before:new Date(new Date().setHours(0,0,0,0))},className:"p-0 border rounded-md w-auto inline-block shadow-sm",footer:c.length>0?(0,t.jsxs)("p",{className:"text-xs text-blue-700 pt-1",children:[c.length," dia(s) selecionado(s)."]}):null})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(k._,{htmlFor:"start-time-modal",className:"font-medium text-gray-800",children:"In\xedcio*"}),(0,t.jsxs)(b.Ph,{value:u,onValueChange:p,children:[(0,t.jsx)(b.i4,{id:"start-time-modal",className:(0,m.cn)("h-9",F&&"border-red-500"),children:(0,t.jsx)(b.ki,{})}),(0,t.jsx)(b.Bw,{children:R.map(e=>(0,t.jsx)(b.Ql,{value:e,children:e},"st"+e))})]})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(k._,{htmlFor:"end-time-modal",className:"font-medium text-gray-800",children:"T\xe9rmino*"}),(0,t.jsxs)(b.Ph,{value:j,onValueChange:y,children:[(0,t.jsx)(b.i4,{id:"end-time-modal",className:(0,m.cn)("h-9",F&&"border-red-500"),children:(0,t.jsx)(b.ki,{})}),(0,t.jsx)(b.Bw,{children:R.map(e=>(0,t.jsx)(b.Ql,{value:e,children:e},"et"+e))})]})]}),F&&(0,t.jsx)("p",{className:"text-red-600 text-xs col-span-2 pt-1",children:F})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(k._,{htmlFor:"state-modal",className:"font-medium text-gray-800",children:"Estado*"}),(0,t.jsxs)(b.Ph,{value:H,onValueChange:G,children:[(0,t.jsx)(b.i4,{id:"state-modal",className:"h-9",children:(0,t.jsx)(b.ki,{placeholder:"UF..."})}),(0,t.jsx)(b.Bw,{children:V.map(e=>(0,t.jsx)(b.Ql,{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(k._,{htmlFor:"city-modal",className:"font-medium text-gray-800",children:"Cidade*"}),(0,t.jsxs)(b.Ph,{value:I,onValueChange:L,disabled:!H||!Q.length,children:[(0,t.jsx)(b.i4,{id:"city-modal",className:"h-9",children:(0,t.jsx)(b.ki,{placeholder:H?Q.length?"Selecione...":"Sem cidades":"Selec. Estado"})}),(0,t.jsx)(b.Bw,{children:Q.map(e=>(0,t.jsx)(b.Ql,{value:e,children:e},e))})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(k._,{htmlFor:"service-type-modal",className:"font-medium text-gray-800",children:"Tipo Atend.*"}),(0,t.jsxs)(b.Ph,{value:U,onValueChange:W,children:[(0,t.jsx)(b.i4,{id:"service-type-modal",className:"h-9",children:(0,t.jsx)(b.ki,{placeholder:"Selecione..."})}),(0,t.jsx)(b.Bw,{children:T.map(e=>(0,t.jsx)(b.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(k._,{htmlFor:"offered-rate-modal",className:"font-medium text-gray-800",children:"Valor Hora (R$)*"}),(0,t.jsx)(w.I,{id:"offered-rate-modal",type:"number",min:"0.01",step:"0.01",placeholder:"150.00",value:$,onChange:e=>K(e.target.value),className:"h-9"})]})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsxs)(k._,{className:"flex items-center gap-1.5 font-medium text-gray-800",children:[(0,t.jsx)(Z.Z,{className:"h-4 w-4"}),"Especialidades Requeridas (Opcional)"]}),(0,t.jsxs)(S.J2,{open:v,onOpenChange:A,children:[(0,t.jsx)(S.xo,{asChild:!0,children:(0,t.jsx)(l.z,{variant:"outline",className:"w-full justify-start font-normal text-muted-foreground h-9",children:z.length>0?z.join(", "):"Nenhuma (clique p/ adicionar)"})}),(0,t.jsx)(S.yk,{className:"w-[--radix-popover-trigger-width] p-0",children:(0,t.jsxs)(M.mY,{children:[(0,t.jsx)(M.sZ,{placeholder:"Buscar...",value:O,onValueChange:q}),(0,t.jsxs)(M.e8,{children:[(0,t.jsx)(M.rb,{children:"Nenhuma especialidade encontrada."}),(0,t.jsx)(M.fu,{children:et.map(e=>(0,t.jsx)(M.di,{value:e,onSelect:()=>ea(e),className:"cursor-pointer",children:e},e))})]})]})})]}),z.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:z.map(e=>(0,t.jsxs)(h.C,{variant:"secondary",className:"bg-gray-100 hover:bg-gray-200",children:[e,(0,t.jsx)("button",{type:"button",onClick:()=>es(e),className:"ml-1.5 p-0.5 rounded-full outline-none focus:ring-1 focus:ring-ring hover:bg-gray-300",children:(0,t.jsx)(P.Z,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})})]},e))})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(k._,{htmlFor:"notes-modal",className:"font-medium text-gray-800",children:"Notas Adicionais"}),(0,t.jsx)(C.g,{id:"notes-modal",placeholder:"Ex: Entrada pela Portaria B, procurar por Enfermeira Maria...",value:Y,onChange:e=>X(e.target.value)})]})]}),(0,t.jsxs)(n.cN,{className:"mt-2 pt-4 border-t",children:[" ",(0,t.jsx)(n.GG,{asChild:!0,children:(0,t.jsx)(l.z,{type:"button",variant:"outline",disabled:g,children:"Cancelar"})}),(0,t.jsxs)(l.z,{type:"button",onClick:er,disabled:g,children:[g&&(0,t.jsx)(E.Z,{className:"mr-2 h-4 w-4 animate-spin"})," Publicar Vaga(s)"]})]})]})};var z=s(49322);let B=e=>{let{message:a="Carregando..."}=e;return(0,t.jsxs)("div",{className:"flex justify-center items-center py-10 min-h-[150px]",children:[(0,t.jsx)(E.Z,{className:"h-6 w-6 animate-spin text-blue-600"}),(0,t.jsx)("span",{className:"ml-3 text-sm text-gray-600",children:a})]})},O=e=>{let{message:a}=e;return(0,t.jsxs)("div",{className:"text-center text-sm text-gray-500 py-10 min-h-[150px] flex flex-col items-center justify-center bg-gray-50/80 rounded-md border border-dashed",children:[(0,t.jsx)(Z.Z,{className:"w-10 h-10 text-gray-400 mb-3"}),a]})},q=e=>{let{message:a,onRetry:s}=e;return(0,t.jsxs)("div",{className:"text-center text-sm text-red-600 py-10 min-h-[150px] flex flex-col items-center justify-center bg-red-50 rounded-md border border-red-200",children:[(0,t.jsx)(z.Z,{className:"w-10 h-10 text-red-500 mb-3"}),(0,t.jsx)("p",{className:"font-medium mb-1",children:"Ocorreu um erro"}),(0,t.jsx)("p",{className:"mb-3 px-4",children:a||"N\xe3o foi poss\xedvel carregar os dados."})," ",s&&(0,t.jsx)(l.z,{variant:"destructive",size:"sm",onClick:s,children:"Tentar Novamente"})]})};function F(){let{toast:e}=(0,i.pm)(),[a,s]=(0,r.useState)([]),[h,m]=(0,r.useState)(!0),[x,u]=(0,r.useState)(null),[p,j]=(0,r.useState)(!1),y=(0,r.useCallback)(async()=>{m(!0),u(null);try{let e=await (0,o.G2)();s(e.sort((e,a)=>e.date.getTime()-a.date.getTime()||e.startTime.localeCompare(a.startTime)))}catch(a){console.error("Error fetching open shifts:",a),u(a.message||"Erro ao buscar vagas."),e({title:"Erro ao Buscar Vagas",description:a.message,variant:"destructive"})}finally{m(!1)}},[e]);(0,r.useEffect)(()=>{y()},[y]);let g=async a=>{if(a)try{await (0,o.CW)(a),e({title:"Vaga Cancelada",variant:"default"}),y()}catch(a){e({title:"Erro ao Cancelar",description:a.message||"Falha",variant:"destructive"})}};return(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold",children:"Vagas em Aberto"}),(0,t.jsxs)(n.Vq,{open:p,onOpenChange:j,children:[(0,t.jsx)(n.hg,{asChild:!0,children:(0,t.jsxs)(l.z,{size:"sm",children:[(0,t.jsx)(c.Z,{className:"mr-2 h-4 w-4"})," Publicar Nova Vaga"]})}),(0,t.jsx)(A,{onShiftAdded:()=>{j(!1),y()}})]})]}),h?(0,t.jsx)(B,{message:"Carregando vagas abertas..."}):x?(0,t.jsx)(q,{message:x,onRetry:y}):0===a.length?(0,t.jsx)(O,{message:"Nenhuma vaga aberta encontrada."}):(0,t.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,t.jsx)(v,{shift:e,actions:[{label:"Cancelar",icon:d.Z,onClick:()=>g(e.id),variant:"ghost",className:"text-red-600 hover:text-red-700 hover:bg-red-50 rounded-full w-8 h-8"}]},e.id))})]})}},5005:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(79205).Z)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},88501:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(79205).Z)("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]])},49322:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(79205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},43044:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(79205).Z)("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]])},95252:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(79205).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},33245:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(79205).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},83774:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(79205).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},99397:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(79205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},18930:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(79205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}},function(e){e.O(0,[4358,9990,6137,9084,9733,6838,4517,6008,9315,4084,7988,3294,2592,8197,3569,2971,2117,1744],function(){return e(e.s=85938)}),_N_E=e.O()}]);