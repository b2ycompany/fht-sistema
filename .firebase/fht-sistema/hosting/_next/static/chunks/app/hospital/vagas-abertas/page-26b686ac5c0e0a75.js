(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5328],{85938:function(e,t,a){Promise.resolve().then(a.bind(a,46616))},46616:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return $}});var r=a(57437),s=a(2265),n=a(62869),i=a(35153),o=a(26110),c=a(99397),l=a(18930),d=a(33569),u=a(35974),m=a(94508),h=a(49505),p=a(88501),f=a(83774),x=a(5005),g=a(95252),v=a(33245);let y=Object.entries(h.ku).map(e=>{let[t,a]=e;return{value:t,label:t.split("_").map(e=>e[0].toUpperCase()+e.slice(1)).join(" ")}}),j=e=>{var t;let{shift:a,actions:s}=e,i=(null===(t=y.find(e=>e.value===a.serviceType))||void 0===t?void 0:t.label)||a.serviceType;return(0,r.jsxs)("div",{className:(0,m.cn)("flex flex-col sm:flex-row items-start sm:items-center justify-between border rounded-lg p-4 gap-3 transition-opacity duration-300 bg-white shadow-xs hover:shadow-sm"),children:[(0,r.jsxs)("div",{className:"flex-1 space-y-1.5 pr-2",children:[a.status&&"open"!==a.status&&(0,r.jsx)(u.C,{variant:"filled"===a.status?"secondary":"destructive",className:"text-xs mb-1 capitalize",children:a.status}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-800",children:[" ",(0,r.jsx)(p.Z,{className:"h-4 w-4 shrink-0 text-blue-600"})," ",(0,r.jsx)("span",{suppressHydrationWarning:!0,children:a.date?a.date.toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"}):"Inv\xe1lida"})," ",(0,r.jsxs)("span",{className:"text-gray-500 font-normal",children:["(",a.startTime," - ",a.endTime,")"]})," "]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs text-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1.5 ",children:[(0,r.jsx)(f.Z,{className:"h-3.5 w-3.5 shrink-0 text-purple-600"}),(0,r.jsxs)("span",{children:[a.city,", ",a.state]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5 ",children:[(0,r.jsx)(x.Z,{className:"h-3.5 w-3.5 shrink-0 text-cyan-600"}),(0,r.jsx)("span",{children:i})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5 text-green-700 font-medium col-span-2",children:[(0,r.jsx)(g.Z,{className:"h-3.5 w-3.5 shrink-0"}),(0,r.jsxs)("span",{children:[(0,m.xG)(a.offeredRate),"/hora"]})]})]}),a.specialtiesRequired&&a.specialtiesRequired.length>0&&(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-1 pt-1.5",children:[" ",(0,r.jsx)("span",{className:"text-xs text-gray-500 mr-1 font-medium",children:"Requer:"})," ",a.specialtiesRequired.map(e=>(0,r.jsx)(u.C,{variant:"outline",className:"text-gray-700 text-xs px-1.5 py-0.5 font-normal border-blue-200 bg-blue-50",children:e},e))," "]}),a.notes&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 pt-1.5 italic",children:[(0,r.jsx)(v.Z,{className:"inline h-3 w-3 mr-1 align-middle"}),a.notes]})]}),s&&s.length>0&&(0,r.jsx)("div",{className:"flex items-center space-x-1 shrink-0 mt-2 sm:mt-0 self-end sm:self-center",children:s.map(e=>{var t;return(0,r.jsxs)(n.z,{variant:null!==(t=e.variant)&&void 0!==t?t:"ghost",size:"icon",onClick:e.onClick,className:(0,m.cn)("h-8 w-8",e.className),"aria-label":e.label,children:[" ",(0,r.jsx)(e.icon,{className:"h-4 w-4"})," "]},e.label)})})]})};var N=a(1098),b=a(53647),w=a(26815),E=a(95186),S=a(76818),I=a(57054),C=a(23518),A=a(43044),R=a(32489),T=a(51817);let O=Array.from({length:48},(e,t)=>"".concat(Math.floor(t/2).toString().padStart(2,"0"),":").concat(t%2==0?"00":"30")),P=["SP","RJ","MG","BA","AC","AL","AP","AM","CE","DF","ES","GO","MA","MT","MS","PA","PB","PR","PE","PI","RN","RS","RO","RR","SC","SE","TO"],D={SP:["S\xe3o Paulo","Campinas","Santos","Ara\xe7ariguama","Guarulhos","Osasco"],RJ:["Rio de Janeiro","Niter\xf3i"]},V=Object.entries(h.ku).map(e=>{let[t,a]=e;return{value:t,label:t.split("_").map(e=>e[0].toUpperCase()+e.slice(1)).join(" ")}}),_=e=>{let{onShiftAdded:t}=e,{toast:a}=(0,i.pm)(),[c,l]=(0,s.useState)([]),[p,f]=(0,s.useState)("07:00"),[x,g]=(0,s.useState)("19:00"),[v,y]=(0,s.useState)(!1),[j,_]=(0,s.useState)(!1),[k,$]=(0,s.useState)([]),[B,z]=(0,s.useState)(""),[U,F]=(0,s.useState)(null),[M,q]=(0,s.useState)(""),[G,J]=(0,s.useState)(""),[L,Z]=(0,s.useState)([]),[H,X]=(0,s.useState)(""),[Q,W]=(0,s.useState)(""),[Y,K]=(0,s.useState)(""),ee=(0,s.useCallback)((e,t)=>{if(e&&t&&e===t)F("Hor\xe1rios de in\xedcio e t\xe9rmino n\xe3o podem ser iguais.");else if(e&&t&&e>t){let a=parseInt(e.split(":")[0],10);parseInt(t.split(":")[0],10)>=a?F("In\xedcio deve ser anterior ao t\xe9rmino para hor\xe1rios no mesmo dia."):F(null)}else F(null)},[]);(0,s.useEffect)(()=>{ee(p,x)},[p,x,ee]),(0,s.useEffect)(()=>{M?Z(D[M]||[]):Z([]),J("")},[M]);let et=e=>{k.includes(e)||$([...k,e]),z(""),_(!1)},ea=e=>{$(t=>t.filter(t=>t!==e))},er=(0,s.useMemo)(()=>h.Gg.filter(e=>"string"==typeof e&&e.toLowerCase().includes(B.toLowerCase())&&!k.includes(e)),[B,k]),es=async()=>{let e=parseFloat(Q.replace(",","."));if(0===c.length){a({title:"Selecione data(s)",variant:"destructive"});return}if(U){a({title:"Hor\xe1rio inv\xe1lido",description:U,variant:"destructive"});return}if(!H){a({title:"Selecione tipo",variant:"destructive"});return}if(isNaN(e)||e<=0){a({title:"Valor hora inv\xe1lido (>0)",variant:"destructive"});return}if(!M||!G){a({title:"Selecione local",variant:"destructive"});return}y(!0);let r=0,s=0,n=c.map(async t=>{try{await (0,d.xf)({date:t,startTime:p,endTime:x,specialtiesRequired:k,serviceType:H,offeredRate:e,city:G,state:M,notes:Y}),r++}catch(e){s++,console.error("Failed add shift ".concat(t.toLocaleDateString(),":"),e),a({title:"Erro ao Salvar Data ".concat(t.toLocaleDateString()),description:e.message||"Erro desconhecido",variant:"destructive"})}});await Promise.all(n),y(!1),r>0&&(a({title:"Opera\xe7\xe3o Conclu\xedda",description:"".concat(r," vaga(s) publicada(s). ").concat(s>0?"".concat(s," falharam."):""),variant:"default"}),t())};return(0,r.jsxs)(o.cZ,{className:"sm:max-w-2xl",children:[(0,r.jsxs)(o.fK,{children:[(0,r.jsx)(o.$N,{children:"Publicar Nova Vaga de Plant\xe3o"}),(0,r.jsx)(o.Be,{children:"Preencha os detalhes da vaga. Selecione m\xfaltiplos dias no calend\xe1rio para criar vagas id\xeanticas para cada dia."})]}),(0,r.jsxs)("div",{className:"grid gap-4 py-4 max-h-[70vh] overflow-y-auto px-2 pr-5",children:[" ",(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(w._,{className:"font-medium text-gray-800",children:"Data(s)*"}),(0,r.jsx)(N.f,{mode:"multiple",selected:c,onSelect:e=>l(e||[]),disabled:{before:new Date(new Date().setHours(0,0,0,0))},className:"p-0 border rounded-md w-auto inline-block shadow-sm",footer:c.length>0?(0,r.jsxs)("p",{className:"text-xs text-blue-700 pt-1",children:[c.length," dia(s) selecionado(s)."]}):null})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(w._,{htmlFor:"start-time-modal",className:"font-medium text-gray-800",children:"In\xedcio*"}),(0,r.jsxs)(b.Ph,{value:p,onValueChange:f,children:[(0,r.jsx)(b.i4,{id:"start-time-modal",className:(0,m.cn)("h-9",U&&"border-red-500"),children:(0,r.jsx)(b.ki,{})}),(0,r.jsx)(b.Bw,{children:O.map(e=>(0,r.jsx)(b.Ql,{value:e,children:e},"st"+e))})]})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(w._,{htmlFor:"end-time-modal",className:"font-medium text-gray-800",children:"T\xe9rmino*"}),(0,r.jsxs)(b.Ph,{value:x,onValueChange:g,children:[(0,r.jsx)(b.i4,{id:"end-time-modal",className:(0,m.cn)("h-9",U&&"border-red-500"),children:(0,r.jsx)(b.ki,{})}),(0,r.jsx)(b.Bw,{children:O.map(e=>(0,r.jsx)(b.Ql,{value:e,children:e},"et"+e))})]})]}),U&&(0,r.jsx)("p",{className:"text-red-600 text-xs col-span-2 pt-1",children:U})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(w._,{htmlFor:"state-modal",className:"font-medium text-gray-800",children:"Estado*"}),(0,r.jsxs)(b.Ph,{value:M,onValueChange:q,children:[(0,r.jsx)(b.i4,{id:"state-modal",className:"h-9",children:(0,r.jsx)(b.ki,{placeholder:"UF..."})}),(0,r.jsx)(b.Bw,{children:P.map(e=>(0,r.jsx)(b.Ql,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(w._,{htmlFor:"city-modal",className:"font-medium text-gray-800",children:"Cidade*"}),(0,r.jsxs)(b.Ph,{value:G,onValueChange:J,disabled:!M||!L.length,children:[(0,r.jsx)(b.i4,{id:"city-modal",className:"h-9",children:(0,r.jsx)(b.ki,{placeholder:M?L.length?"Selecione...":"Sem cidades":"Selec. Estado"})}),(0,r.jsx)(b.Bw,{children:L.map(e=>(0,r.jsx)(b.Ql,{value:e,children:e},e))})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(w._,{htmlFor:"service-type-modal",className:"font-medium text-gray-800",children:"Tipo Atend.*"}),(0,r.jsxs)(b.Ph,{value:H,onValueChange:X,children:[(0,r.jsx)(b.i4,{id:"service-type-modal",className:"h-9",children:(0,r.jsx)(b.ki,{placeholder:"Selecione..."})}),(0,r.jsx)(b.Bw,{children:V.map(e=>(0,r.jsx)(b.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(w._,{htmlFor:"offered-rate-modal",className:"font-medium text-gray-800",children:"Valor Hora (R$)*"}),(0,r.jsx)(E.I,{id:"offered-rate-modal",type:"number",min:"0.01",step:"0.01",placeholder:"150.00",value:Q,onChange:e=>W(e.target.value),className:"h-9"})]})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsxs)(w._,{className:"flex items-center gap-1.5 font-medium text-gray-800",children:[(0,r.jsx)(A.Z,{className:"h-4 w-4"}),"Especialidades Requeridas (Opcional)"]}),(0,r.jsxs)(I.J2,{open:j,onOpenChange:_,children:[(0,r.jsx)(I.xo,{asChild:!0,children:(0,r.jsx)(n.z,{variant:"outline",className:"w-full justify-start font-normal text-muted-foreground h-9",children:k.length>0?k.join(", "):"Nenhuma (clique p/ adicionar)"})}),(0,r.jsx)(I.yk,{className:"w-[--radix-popover-trigger-width] p-0",children:(0,r.jsxs)(C.mY,{children:[(0,r.jsx)(C.sZ,{placeholder:"Buscar...",value:B,onValueChange:z}),(0,r.jsxs)(C.e8,{children:[(0,r.jsx)(C.rb,{children:"Nenhuma especialidade encontrada."}),(0,r.jsx)(C.fu,{children:er.map(e=>(0,r.jsx)(C.di,{value:e,onSelect:()=>et(e),className:"cursor-pointer",children:e},e))})]})]})})]}),k.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:k.map(e=>(0,r.jsxs)(u.C,{variant:"secondary",className:"bg-gray-100 hover:bg-gray-200",children:[e,(0,r.jsx)("button",{type:"button",onClick:()=>ea(e),className:"ml-1.5 p-0.5 rounded-full outline-none focus:ring-1 focus:ring-ring hover:bg-gray-300",children:(0,r.jsx)(R.Z,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})})]},e))})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(w._,{htmlFor:"notes-modal",className:"font-medium text-gray-800",children:"Notas Adicionais"}),(0,r.jsx)(S.g,{id:"notes-modal",placeholder:"Ex: Entrada pela Portaria B, procurar por Enfermeira Maria...",value:Y,onChange:e=>K(e.target.value)})]})]}),(0,r.jsxs)(o.cN,{className:"mt-2 pt-4 border-t",children:[" ",(0,r.jsx)(o.GG,{asChild:!0,children:(0,r.jsx)(n.z,{type:"button",variant:"outline",disabled:v,children:"Cancelar"})}),(0,r.jsxs)(n.z,{type:"button",onClick:es,disabled:v,children:[v&&(0,r.jsx)(T.Z,{className:"mr-2 h-4 w-4 animate-spin"})," Publicar Vaga(s)"]})]})]})};var k=a(2385);function $(){let{toast:e}=(0,i.pm)(),[t,a]=(0,s.useState)([]),[u,m]=(0,s.useState)(!0),[h,p]=(0,s.useState)(null),[f,x]=(0,s.useState)(!1),g=(0,s.useCallback)(async()=>{m(!0),p(null);try{let e=await (0,d.G2)();a(e.sort((e,t)=>e.date.getTime()-t.date.getTime()||e.startTime.localeCompare(t.startTime)))}catch(t){console.error("Error fetching open shifts:",t),p(t.message||"Erro ao buscar vagas."),e({title:"Erro ao Buscar Vagas",description:t.message,variant:"destructive"})}finally{m(!1)}},[e]);(0,s.useEffect)(()=>{g()},[g]);let v=async t=>{if(t)try{await (0,d.CW)(t),e({title:"Vaga Cancelada",variant:"default"}),g()}catch(t){e({title:"Erro ao Cancelar",description:t.message||"Falha",variant:"destructive"})}};return(0,r.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold",children:"Vagas em Aberto"}),(0,r.jsxs)(o.Vq,{open:f,onOpenChange:x,children:[(0,r.jsx)(o.hg,{asChild:!0,children:(0,r.jsxs)(n.z,{size:"sm",children:[(0,r.jsx)(c.Z,{className:"mr-2 h-4 w-4"})," Publicar Nova Vaga"]})}),(0,r.jsx)(_,{onShiftAdded:()=>{x(!1),g()}})]})]}),u?(0,r.jsx)(k.Gu,{message:"Carregando vagas abertas..."}):h?(0,r.jsx)(k.Te,{message:h,onRetry:g}):0===t.length?(0,r.jsx)(k.ub,{message:"Nenhuma vaga aberta encontrada."}):(0,r.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,r.jsx)(j,{shift:e,actions:[{label:"Cancelar",icon:l.Z,onClick:()=>v(e.id),variant:"ghost",className:"text-red-600 hover:text-red-700 hover:bg-red-50 rounded-full w-8 h-8"}]},e.id))})]})}},62869:function(e,t,a){"use strict";a.d(t,{d:function(){return c},z:function(){return l}});var r=a(57437),s=a(2265),n=a(37053),i=a(90535),o=a(94508);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,t)=>{let{className:a,variant:s,size:i,asChild:l=!1,...d}=e,u=l?n.g7:"button";return(0,r.jsx)(u,{className:(0,o.cn)(c({variant:s,size:i,className:a})),ref:t,...d})});l.displayName="Button"},2385:function(e,t,a){"use strict";a.d(t,{Gu:function(){return c},Te:function(){return d},ub:function(){return l}});var r=a(57437);a(2265);var s=a(62869),n=a(51817),i=a(43044),o=a(49322);let c=e=>{let{message:t="Carregando..."}=e;return(0,r.jsxs)("div",{className:"flex justify-center items-center py-10 min-h-[150px]",children:[(0,r.jsx)(n.Z,{className:"h-6 w-6 animate-spin text-blue-600"}),(0,r.jsx)("span",{className:"ml-3 text-sm text-gray-600",children:t})]})},l=e=>{let{message:t}=e;return(0,r.jsxs)("div",{className:"text-center text-sm text-gray-500 py-10 min-h-[150px] flex flex-col items-center justify-center bg-gray-50/80 rounded-md border border-dashed",children:[(0,r.jsx)(i.Z,{className:"w-10 h-10 text-gray-400 mb-3"}),t]})},d=e=>{let{message:t,onRetry:a}=e;return(0,r.jsxs)("div",{className:"text-center text-sm text-red-600 py-10 min-h-[150px] flex flex-col items-center justify-center bg-red-50 rounded-md border border-red-200",children:[(0,r.jsx)(o.Z,{className:"w-10 h-10 text-red-500 mb-3"}),(0,r.jsx)("p",{className:"font-medium mb-1",children:"Ocorreu um erro"}),(0,r.jsx)("p",{className:"mb-3 px-4",children:t||"N\xe3o foi poss\xedvel carregar os dados."})," ",a&&(0,r.jsx)(s.z,{variant:"destructive",size:"sm",onClick:a,children:"Tentar Novamente"})]})}},35153:function(e,t,a){"use strict";a.d(t,{pm:function(){return m}});var r=a(2265);let s=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],l={toasts:[]};function d(e){l=o(l,e),c.forEach(e=>{e(l)})}function u(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=r.useState(l);return r.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},92651:function(e,t,a){"use strict";a.d(t,{CQ:function(){return o},TX:function(){return l},Ts:function(){return u},bI:function(){return m},c0:function(){return d},hc:function(){return h},pH:function(){return c},q9:function(){return i}});var r=a(43301),s=a(5978),n=a(17293);let i=async(e,t,a)=>{try{let s=await (0,r.Xb)(n.I8,e,t);return await (0,r.ck)(s.user,{displayName:a}),s.user}catch(e){throw console.error("[AuthService] Erro ao criar usu\xe1rio no Auth:",e),e}},o=async(e,t,a,r,i)=>{let o={};if("doctor"===r){let{documents:e,specialistDocuments:t,...a}=i;o={...a,documents:e,specialistDocuments:t,documentVerificationStatus:"PENDING_REVIEW",adminVerificationNotes:""}}else if("hospital"===r){let{hospitalDocs:e,legalRepDocuments:t,...a}=i;o={companyInfo:{cnpj:a.cnpj,stateRegistration:a.stateRegistration,phone:a.phone,address:a.address},legalRepresentativeInfo:a.legalRepresentativeInfo,hospitalDocs:e,legalRepDocuments:t,documentVerificationStatus:"PENDING_REVIEW",adminVerificationNotes:""}}else throw Error("Tipo de perfil de registro inv\xe1lido.");let c={uid:e,email:t,displayName:a,role:r,createdAt:(0,s.Bt)(),updatedAt:(0,s.Bt)(),...o};await (0,s.pl)((0,s.JU)(n.db,"users",e),c),console.log("[AuthService] Perfil ".concat(r," salvo para UID: ").concat(e))},c=async(e,t)=>{try{return(await (0,r.e5)(n.I8,e,t)).user}catch(e){throw console.error("[AuthService] Login error:",e),e}},l=async()=>{try{await (0,r.w7)(n.I8)}catch(e){throw console.error("[AuthService] Logout error:",e),e}},d=async e=>{try{await (0,r.LS)(n.I8,e)}catch(e){throw console.error("[AuthService] Reset error:",e),e}},u=async()=>{let e=n.I8.currentUser;if(!e)return null;try{let t=(0,s.JU)(n.db,"users",e.uid),a=await (0,s.QT)(t);if(a.exists())return{uid:a.id,...a.data()};return null}catch(e){throw console.error("[AuthService] Get current user data error:",e),e}},m=async(e,t)=>{if(!e)throw Error("ID do Doutor n\xe3o fornecido para atualiza\xe7\xe3o.");if(!t||0===Object.keys(t).length){console.warn("[AuthService] Nenhum dado fornecido para atualiza\xe7\xe3o do perfil do doutor.");return}let a=(0,s.JU)(n.db,"users",e),r={};if(Object.keys(t).forEach(e=>{void 0!==t[e]&&("address"===e&&"object"==typeof t.address&&null!==t.address?Object.keys(t.address).forEach(e=>{void 0!==t.address[e]&&(r["address.".concat(e)]=t.address[e])}):r[e]=t[e])}),0===Object.keys(r).length){console.warn("[AuthService] Nenhum dado v\xe1lido para atualizar ap\xf3s filtrar undefined.");return}r.updatedAt=(0,s.Bt)();try{var i;let t=await (0,s.QT)(a);if(!t.exists()||(null===(i=t.data())||void 0===i?void 0:i.role)!=="doctor")throw Error("Perfil de doutor n\xe3o encontrado ou tipo de usu\xe1rio incorreto para atualiza\xe7\xe3o.");await (0,s.r7)(a,r),console.log("[AuthService] Perfil do doutor ".concat(e," atualizado com sucesso."))}catch(t){throw console.error("[AuthService] Erro ao atualizar perfil do doutor ".concat(e,":"),t),t}},h=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!e)throw Error("ID do usu\xe1rio n\xe3o fornecido.");let i=(0,s.JU)(n.db,"users",e),o={documentVerificationStatus:t,adminVerificationNotes:a,documentRejectionReasons:r,updatedAt:(0,s.Bt)()};"APPROVED"===t&&(o.documentRejectionReasons={},o.adminVerificationNotes="");try{await (0,s.r7)(i,o)}catch(t){throw console.error("Erro ao atualizar status do usu\xe1rio ".concat(e,":"),t),Error("Falha ao atualizar o status do cadastro.")}}},17293:function(e,t,a){"use strict";a.d(t,{I8:function(){return l},db:function(){return d},tO:function(){return u}});var r=a(738),s=a(43301),n=a(5978),i=a(60062),o=a(13491);let c=(0,r.C6)().length?(0,r.Mq)():(0,r.ZF)({apiKey:"AIzaSyAyoX1YqAdqHuIvSoj0Yw_FYnhCBv-KfEA",authDomain:"fht-sistema.firebaseapp.com",projectId:"fht-sistema",storageBucket:"fht-sistema.firebasestorage.app",messagingSenderId:"583837273524",appId:"1:583837273524:web:1583addfce581e61ac76e1",measurementId:"G-6FJ2H3G32N"}),l=(0,s.v0)(c),d=(0,n.ad)(c),u=(0,i.cF)(c);(0,o.$C)(c,"southamerica-east1")},33569:function(e,t,a){"use strict";a.d(t,{AX:function(){return o},CW:function(){return l},G2:function(){return c},N_:function(){return f},S$:function(){return d},YY:function(){return m},d5:function(){return h},iC:function(){return u},m3:function(){return p},or:function(){return x},xf:function(){return i}});var r=a(5978),s=a(17293),n=a(92651);let i=async e=>{let t=s.I8.currentUser;if(!t)throw Error("Usu\xe1rio n\xe3o autenticado.");let a=await (0,n.Ts)();if(!a||"hospital"!==a.role)throw Error("Perfil de hospital n\xe3o encontrado ou inv\xe1lido.");let i={...e,hospitalId:t.uid,hospitalName:a.displayName,publishedByUID:t.uid,publishedByName:t.displayName||a.displayName||void 0,status:"OPEN",createdAt:(0,r.Bt)(),updatedAt:(0,r.Bt)()};try{let e=await (0,r.ET)((0,r.hJ)(s.db,"shiftRequirements"),i);return console.log("[SERVICE] Nova Demanda de Plant\xe3o adicionada com ID: ",e.id),e.id}catch(e){throw console.error("[SERVICE] Erro ao adicionar demanda:",e),e}},o=async(e,t)=>{if(!s.I8.currentUser)throw Error("Usu\xe1rio n\xe3o autenticado.");let a=(0,r.JU)(s.db,"shiftRequirements",e);try{await (0,r.r7)(a,{...t,updatedAt:(0,r.Bt)()}),console.log("[SERVICE] Demanda ID:",e,"atualizada.")}catch(e){throw console.error("[SERVICE] Erro ao atualizar demanda:",e),e}},c=async()=>{let e=s.I8.currentUser;if(!e)return[];try{let t=(0,r.IO)((0,r.hJ)(s.db,"shiftRequirements"),(0,r.ar)("hospitalId","==",e.uid),(0,r.ar)("status","==","OPEN"),(0,r.Xo)("createdAt","desc")),a=await (0,r.PL)(t),n=[];return a.forEach(e=>{n.push({id:e.id,...e.data()})}),console.log("[SERVICE] getHospitalShiftRequirements (OPEN): Encontradas ".concat(n.length," demandas.")),n}catch(e){throw console.error("[SERVICE] Erro getHospitalShiftRequirements:",e),e}},l=async e=>{if(!s.I8.currentUser)throw Error("Usu\xe1rio n\xe3o autenticado.");try{await (0,r.oe)((0,r.JU)(s.db,"shiftRequirements",e)),console.log("[SERVICE] Demanda deletada ID:",e)}catch(e){throw console.error("[SERVICE] Erro ao deletar demanda:",e),e}},d=async e=>{if(!e)throw Error("ID do hospital n\xe3o fornecido.");return{kpis:{},monthlyCosts:[],specialtyDemand:[]}},u=async()=>[],m=async()=>[],h=async()=>[],p=async()=>{let e=s.I8.currentUser;if(!e)return[];try{let t=(0,r.hJ)(s.db,"users",e.uid,"hospitalDoctors"),a=(0,r.IO)(t,(0,r.Xo)("name","asc")),n=await (0,r.PL)(a);if(n.empty)return[];return n.docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Erro ao buscar m\xe9dicos gerenciados:",e),[]}},f=async(e,t)=>{if(!e||!t.crm||!t.name)throw Error("Dados insuficientes para cadastrar o m\xe9dico (Nome e CRM s\xe3o obrigat\xf3rios).");let a=(0,r.hJ)(s.db,"users");await (0,r.i3)(s.db,async n=>{if(t.email){let e=(0,r.IO)(a,(0,r.ar)("email","==",t.email));if(!(await (0,r.PL)(e)).empty)throw Error("O email ".concat(t.email," j\xe1 est\xe1 cadastrado na plataforma."))}let i=(0,r.IO)(a,(0,r.ar)("professionalCrm","==",t.crm));if(!(await (0,r.PL)(i)).empty)throw Error("O CRM ".concat(t.crm," j\xe1 est\xe1 cadastrado na plataforma."));let o=(0,r.JU)((0,r.hJ)(s.db,"users"));n.set(o,{displayName:t.name,email:t.email||"",professionalCrm:t.crm,phone:t.phone||"",specialties:t.specialties||[],role:"doctor",documentVerificationStatus:"PENDING_DOCUMENTS",onboardingMethod:"EXTERNAL_HOSPITAL_INVITE",onboardedByHospitalId:e,createdAt:(0,r.Bt)(),updatedAt:(0,r.Bt)()});let c=(0,r.JU)((0,r.hJ)(s.db,"users",e,"hospitalDoctors"),o.id);n.set(c,{id:o.id,name:t.name,crm:t.crm,email:t.email||"",phone:t.phone||"",specialties:t.specialties||[],status:"ACTIVE_EXTERNAL",source:"EXTERNAL",addedAt:(0,r.Bt)()})})},x=async(e,t,a)=>(console.log("[SERVICE] Hospital ".concat(e," atualizando m\xe9dico ").concat(t," (MOCK):"),a),await new Promise(e=>setTimeout(e,400)),{success:!0,message:"Dados do m\xe9dico ".concat(a.name||t," atualizados (mock).")})},94508:function(e,t,a){"use strict";a.d(t,{Hq:function(){return l},bx:function(){return c},cn:function(){return n},rl:function(){return o},xG:function(){return i}});var r=a(61994),s=a(53335);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}let i=e=>null==e||isNaN(e)?"R$ -":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),o=e=>null==e||isNaN(e)?"- %":"".concat(e.toFixed(1),"%"),c=e=>null==e||isNaN(e)?"- h":"".concat(e.toFixed(1)," h"),l=(e,t)=>{if(!e)return e;let a=e.replace(/[^\dX]/gi,"");if("cpf"===t&&11===a.length)return a.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4");if("cnpj"===t&&14===a.length)return a.replace(/^(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})$/,"$1.$2.$3/$4-$5");if("phone"===t)return a.length>10?a.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):a.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3");if("cep"===t&&8===a.length)return a.replace(/(\d{5})(\d{3})/,"$1-$2");if("rg"===t){if(9===a.length)return a.replace(/(\d{2})(\d{3})(\d{3})([\dX])$/,"$1.$2.$3-$4");if(8===a.length)return a.replace(/(\d{1})(\d{3})(\d{3})([\dX])$/,"$1.$2.$3-$4")}return e}}},function(e){e.O(0,[4358,9990,6137,9084,1543,7877,8398,6879,5343,2496,6157,2971,2117,1744],function(){return e(e.s=85938)}),_N_E=e.O()}]);