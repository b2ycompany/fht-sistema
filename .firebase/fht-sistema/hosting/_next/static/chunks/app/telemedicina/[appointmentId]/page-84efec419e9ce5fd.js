(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1390],{75410:function(){},48628:function(){},31601:function(){},67792:function(){},34977:function(){},75042:function(){},18278:function(e,t,a){Promise.resolve().then(a.bind(a,9751))},9751:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return L}});var s=a(57437),r=a(2265),n=a(99376),o=a(44667),i=a(31209),l=a(902),c=a(92651),d=a(46413),u=a(17293),m=a(5978);let f=async e=>{try{let t=(0,m.JU)(u.db,"diagnosticProtocols",e),a=await (0,m.QT)(t);if(a.exists())return{id:a.id,...a.data()};return console.warn('[ProtocolService] Protocolo com ID "'.concat(e,'" n\xe3o encontrado.')),null}catch(t){throw console.error('[ProtocolService] Erro ao buscar protocolo "'.concat(e,'":'),t),Error("N\xe3o foi poss\xedvel carregar o protocolo de diagn\xf3stico.")}};var p=a(35153),x=a(51817),h=a(83229),v=a(66070),g=a(26815),y=a(74991),j=a(76818),b=a(62869);let N=e=>{let{protocolId:t,appointmentId:a,initialAnswers:n}=e,{toast:o}=(0,p.pm)(),[i,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(n||{}),[m,N]=(0,r.useState)(!0),[w,S]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{N(!0);try{let e=await f(t);c(e)}catch(e){o({title:"Erro",description:"N\xe3o foi poss\xedvel carregar as perguntas do protocolo.",variant:"destructive"})}finally{N(!1)}})()},[t,o]);let A=(e,t)=>{u(a=>({...a,[e]:t}))},E=async()=>{if(0===Object.keys(d).length){o({title:"Nenhuma resposta",description:"Nenhuma resposta foi alterada para salvar.",variant:"default"});return}S(!0);try{await (0,l.fW)(a,d),o({title:"Sucesso!",description:"Respostas do protocolo salvas."})}catch(e){o({title:"Erro ao Salvar",description:"N\xe3o foi poss\xedvel salvar as respostas.",variant:"destructive"})}finally{S(!1)}};return m?(0,s.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,s.jsx)(x.Z,{className:"h-6 w-6 animate-spin"})}):i?(0,s.jsxs)(v.Zb,{className:"bg-gray-900/50 border-gray-700",children:[(0,s.jsxs)(v.Ol,{children:[(0,s.jsx)(v.ll,{children:i.title}),(0,s.jsx)(v.SZ,{children:i.description})]}),(0,s.jsxs)(v.aY,{className:"space-y-6",children:[i.questions.map((e,t)=>(0,s.jsxs)("div",{className:"p-4 border-b border-gray-700 last:border-b-0",children:[(0,s.jsxs)(g._,{className:"font-semibold text-base",children:[t+1,". ",e.text]}),(0,s.jsxs)("div",{className:"mt-3",children:["multiple_choice"===e.type&&e.options&&(0,s.jsx)(y.E,{value:d[e.id]||"",onValueChange:t=>A(e.id,t),className:"space-y-2",children:e.options.map(t=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(y.m,{value:t,id:"".concat(e.id,"-").concat(t)}),(0,s.jsx)(g._,{htmlFor:"".concat(e.id,"-").concat(t),className:"font-normal cursor-pointer",children:t})]},t))}),"text_input"===e.type&&(0,s.jsx)(j.g,{value:d[e.id]||"",onChange:t=>A(e.id,t.target.value),placeholder:e.placeholder||"Digite sua observa\xe7\xe3o...",className:"bg-gray-900 border-gray-600"})]})]},e.id)),(0,s.jsx)("div",{className:"flex justify-end pt-4",children:(0,s.jsxs)(b.z,{onClick:E,disabled:w,children:[w?(0,s.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),"Salvar Respostas do Protocolo"]})})]})]}):(0,s.jsx)("p",{className:"text-red-500 text-center",children:"Protocolo de diagn\xf3stico n\xe3o encontrado."})};var w=a(70320),S=a(7315),A=a(42208),E=a(1740);let R=(0,r.memo)(e=>{let{videoTrack:t,onMetricsFinalized:a}=e,n=(0,r.useRef)(null),o=(0,r.useRef)(),i=(0,r.useRef)(null),l=(0,r.useRef)(null),[c,d]=(0,r.useState)({eyeContactScore:0,headMovement:0,isModelReady:!1,statusMessage:"A inicializar TensorFlow.js..."});return(0,r.useEffect)(()=>{t&&n.current&&(n.current.srcObject=new MediaStream([t]),n.current.play().catch(e=>console.error("Erro ao reproduzir v\xeddeo para an\xe1lise:",e)))},[t]),(0,r.useEffect)(()=>{let e=async()=>{if(n.current&&i.current&&n.current.readyState>=3){let e=n.current,t=await i.current.estimateFaces(e);if(t.length>0){let e=t[0].keypoints,a=e.find(e=>"noseTip"===e.name),s=0;if(a&&l.current){let e=a.x-l.current.x,t=a.y-l.current.y;s=Math.sqrt(e*e+t*t),l.current={x:a.x,y:a.y}}else a&&(l.current={x:a.x,y:a.y});let r=e.find(e=>"leftEyeUpper1"===e.name),n=e.find(e=>"rightEyeUpper1"===e.name),o=!1;(null==r?void 0:r.z)&&(null==n?void 0:n.z)&&(o=10>Math.abs(r.z-n.z)),d(e=>({...e,eyeContactScore:o?Math.min(100,e.eyeContactScore+.5):Math.max(0,e.eyeContactScore-.5),headMovement:e.headMovement+s}))}}o.current=requestAnimationFrame(e)};return(async()=>{try{await w.Cd_(),d(e=>({...e,statusMessage:"A carregar modelo de detec\xe7\xe3o facial..."}));let t=S.oV.MediaPipeFaceMesh,a=await S.cH(t,{runtime:"mediapipe",solutionPath:"https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh",maxFaces:1,refineLandmarks:!0});i.current=a,d(e=>({...e,isModelReady:!0,statusMessage:"Modelo pronto. A analisar..."})),o.current=requestAnimationFrame(e)}catch(e){console.error("Falha ao carregar o modelo de IA:",e),d(e=>({...e,statusMessage:"Erro ao carregar modelo."}))}})(),()=>{o.current&&cancelAnimationFrame(o.current),i.current&&i.current.dispose(),a({eyeContactScore:c.eyeContactScore,headMovement:c.headMovement})}},[]),(0,s.jsxs)("div",{className:"p-4 rounded-lg bg-gray-900/50 border border-gray-700 h-full",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"An\xe1lise Comportamental em Tempo Real"}),(0,s.jsx)("video",{ref:n,className:"hidden"}),c.isModelReady?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(A.Z,{className:"h-5 w-5 mr-3 text-blue-400"}),(0,s.jsx)("span",{className:"text-white",children:"Estimativa de Contato Visual"})]}),(0,s.jsx)("div",{className:"w-1/3 bg-gray-700 rounded-full h-2.5",children:(0,s.jsx)("div",{className:"bg-blue-400 h-2.5 rounded-full",style:{width:"".concat(c.eyeContactScore,"%")}})}),(0,s.jsxs)("span",{className:"font-bold text-lg text-blue-300 w-16 text-right",children:[c.eyeContactScore.toFixed(0),"%"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(E.Z,{className:"h-5 w-5 mr-3 text-purple-400"}),(0,s.jsx)("span",{className:"text-white",children:"Ac\xfamulo de Movimento (Cabe\xe7a)"})]}),(0,s.jsx)("span",{className:"font-bold text-lg text-purple-300",children:c.headMovement.toFixed(0)})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 pt-2",children:"Estes dados s\xe3o estimativas geradas por IA para apoiar a observa\xe7\xe3o cl\xednica e n\xe3o constituem um diagn\xf3stico."})]}):(0,s.jsxs)("div",{className:"flex items-center text-yellow-400",children:[(0,s.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}),(0,s.jsx)("span",{children:c.statusMessage})]})]})});R.displayName="RealTimeAnalysis";let C=(e,t)=>{let a=[];a.push("RELAT\xd3RIO DE APOIO GERADO POR IA\nData: "+new Date().toLocaleDateString("pt-BR")),a.push("------------------------------------");let s="An\xe1lise do Protocolo de Triagem:\n";if(e.q1_eye_contact){let t=e.q1_eye_contact;t.includes("Raramente")?s+="- O protocolo indica que o contato visual foi raramente ou nunca mantido.\n":t.includes("inconstante")&&(s+="- O protocolo aponta para um contato visual inconstante.\n")}if(e.q4_repetitive_movements){let t=e.q4_repetitive_movements;t.includes("frequente")?s+="- Foram reportados movimentos corporais repetitivos de forma frequente ou intensa.\n":t.includes("leve")&&(s+="- Foram reportados movimentos corporais repetitivos de forma leve ou ocasional.\n")}e.q5_speech_patterns&&e.q5_speech_patterns.length>2&&(s+="- Observa\xe7\xf5es sobre a fala: ".concat(e.q5_speech_patterns,"\n")),a.push(s);let r="An\xe1lise Comportamental por V\xeddeo (Estimativas):\n";return t.eyeContactScore<40?r+="- O \xedndice de contato visual direto com a c\xe2mera foi baixo (".concat(t.eyeContactScore.toFixed(0),"%).\n"):t.eyeContactScore<70?r+="- O \xedndice de contato visual direto com a c\xe2mera foi moderado (".concat(t.eyeContactScore.toFixed(0),"%).\n"):r+="- O \xedndice de contato visual direto com a c\xe2mera foi consistente (".concat(t.eyeContactScore.toFixed(0),"%).\n"),t.headMovement>1500?r+="- Foi detetado um alto volume de movimento da cabe\xe7a durante a consulta (\xedndice: ".concat(t.headMovement.toFixed(0),").\n"):t.headMovement>800?r+="- O volume de movimento da cabe\xe7a foi moderado (\xedndice: ".concat(t.headMovement.toFixed(0),").\n"):r+="- O volume de movimento da cabe\xe7a foi baixo (\xedndice: ".concat(t.headMovement.toFixed(0),").\n"),a.push(r),a.push("------------------------------------"),a.push("NOTA: Este relat\xf3rio \xe9 uma ferramenta de apoio baseada em dados observacionais e estimativas de IA. N\xe3o substitui a avalia\xe7\xe3o e o julgamento cl\xednico do profissional de sa\xfade."),a.join("\n")};var O=a(82222);let _=e=>{let{appointment:t,patientVideoTrack:a}=e,{toast:n}=(0,p.pm)(),[o,i]=(0,r.useState)(null),[c,d]=(0,r.useState)(t.aiAnalysisReport||""),[u,m]=(0,r.useState)(!1),f=async()=>{if(!c){n({title:"Aten\xe7\xe3o",description:"Nenhum relat\xf3rio foi gerado para salvar.",variant:"destructive"});return}m(!0);try{await (0,l.ps)(t.id,c),n({title:"Sucesso",description:"Relat\xf3rio de apoio da IA salvo no prontu\xe1rio."})}catch(e){n({title:"Erro",description:e.message,variant:"destructive"})}finally{m(!1)}};return(0,s.jsxs)("div",{className:"space-y-6 h-full",children:[(0,s.jsx)(R,{videoTrack:a,onMetricsFinalized:i}),(0,s.jsx)("div",{className:"flex-grow",children:(0,s.jsx)(N,{protocolId:"ASD_screening_v1",appointmentId:t.id,initialAnswers:t.autismProtocolAnswers})}),(0,s.jsxs)("div",{className:"space-y-3 pt-4 border-t border-gray-700",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Relat\xf3rio Consolidado da IA"}),(0,s.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,s.jsxs)(b.z,{onClick:()=>{if(!t.autismProtocolAnswers){n({title:"Aten\xe7\xe3o",description:"Por favor, preencha e salve as respostas do protocolo primeiro.",variant:"destructive"});return}if(!o){n({title:"Aten\xe7\xe3o",description:"Os dados de an\xe1lise de v\xeddeo ainda n\xe3o foram finalizados. A an\xe1lise para quando a chamada \xe9 encerrada ou a aba \xe9 trocada.",variant:"destructive"});return}d(C(t.autismProtocolAnswers,o)),n({title:"Relat\xf3rio Gerado",description:"O resumo da IA foi criado com base nos dados coletados."})},children:[(0,s.jsx)(O.Z,{className:"mr-2 h-4 w-4"}),"Gerar Relat\xf3rio de Apoio"]}),(0,s.jsxs)(b.z,{onClick:f,disabled:u||!c,variant:"outline",children:[u?(0,s.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),"Salvar Relat\xf3rio no Prontu\xe1rio"]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(g._,{htmlFor:"ai-report-output",children:"Resumo da An\xe1lise"}),(0,s.jsx)(j.g,{id:"ai-report-output",value:c,readOnly:!0,className:"bg-gray-950 text-gray-300 font-mono h-56 resize-none",placeholder:"Clique em 'Gerar Relat\xf3rio' para ver o resumo da IA aqui..."})]})]})]})};var T=a(92369),k=a(48662),M=a(60730),P=a(29374),z=a(88178),I=a(87133),Z=a(76865),F=a(12339);let V=(0,r.memo)(e=>{let{id:t}=e,a=(0,o.aV)(t),n=(0,r.useRef)(null),i=null==a?void 0:a.tracks.video.persistentTrack;return(0,r.useEffect)(()=>{n.current&&i&&(n.current.srcObject=new MediaStream([i]))},[i]),(0,s.jsxs)("div",{className:"relative aspect-video bg-gray-800 rounded-lg overflow-hidden shadow-lg",children:[(0,s.jsx)("video",{autoPlay:!0,muted:null==a?void 0:a.local,playsInline:!0,ref:n,className:"w-full h-full object-cover"}),!i&&(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2 text-gray-400",children:[(0,s.jsx)(T.Z,{className:"w-16 h-16"}),(0,s.jsx)("p",{className:"font-bold",children:(null==a?void 0:a.user_name)||"Participante"}),(0,s.jsx)("p",{className:"text-xs",children:"C\xe2mera desligada"})]})}),(0,s.jsx)("div",{className:"absolute bottom-2 left-2 bg-black/50 text-white text-xs px-2 py-1 rounded",children:(null==a?void 0:a.local)?"Voc\xea":(null==a?void 0:a.user_name)||"Participante"})]})});V.displayName="VideoTile";let D=(0,r.memo)(e=>{let{callObject:t}=e,a=(0,o.j1)(),r=(0,n.useRouter)();return t?((0,o.VU)("left-meeting",()=>{r.push("/dashboard/agenda")}),(0,s.jsxs)("div",{className:"flex justify-center items-center gap-3 p-4 bg-gray-800/80 backdrop-blur-sm border-t border-gray-700 rounded-t-xl",children:[(0,s.jsx)(b.z,{onClick:()=>t.setLocalAudio(!(null==a?void 0:a.audio)),variant:"outline",size:"icon",className:"bg-gray-700 hover:bg-gray-600 border-gray-600 rounded-full h-12 w-12",children:(null==a?void 0:a.audio)?(0,s.jsx)(k.Z,{size:20}):(0,s.jsx)(M.Z,{size:20,className:"text-red-500"})}),(0,s.jsx)(b.z,{onClick:()=>t.setLocalVideo(!(null==a?void 0:a.video)),variant:"outline",size:"icon",className:"bg-gray-700 hover:bg-gray-600 border-gray-600 rounded-full h-12 w-12",children:(null==a?void 0:a.video)?(0,s.jsx)(P.Z,{size:20}):(0,s.jsx)(z.Z,{size:20,className:"text-red-500"})}),(0,s.jsx)(b.z,{onClick:()=>t.leave(),variant:"destructive",size:"icon",className:"rounded-full h-14 w-14",children:(0,s.jsx)(I.Z,{size:24})})]})):null});D.displayName="CallTray";let q=(0,r.memo)(e=>{let{appointment:t,userProfile:a,patientVideoTrack:n}=e,{toast:o}=(0,p.pm)(),[i,c]=(0,r.useState)((null==t?void 0:t.clinicalEvolution)||""),[d,u]=(0,r.useState)((null==t?void 0:t.diagnosticHypothesis)||""),[m,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&(c(t.clinicalEvolution||""),u(t.diagnosticHypothesis||""))},[t]);let g=async()=>{if(t){f(!0);try{await (0,l.q)(t.id,{clinicalEvolution:i,diagnosticHypothesis:d}),o({title:"Sucesso!",description:"Prontu\xe1rio salvo."})}catch(e){o({title:"Erro ao Salvar",description:e.message,variant:"destructive"})}finally{f(!1)}}};return t&&a?(0,s.jsxs)(v.Zb,{className:"h-full flex flex-col bg-gray-800 border-gray-700 text-white",children:[(0,s.jsx)(v.Ol,{children:(0,s.jsx)(v.ll,{className:"text-lg",children:"Prontu\xe1rio Eletr\xf4nico"})}),(0,s.jsxs)(v.aY,{className:"flex-grow flex flex-col gap-4 overflow-y-auto",children:[(0,s.jsxs)(F.mQ,{defaultValue:"ai-analysis",className:"flex-grow flex flex-col",children:[(0,s.jsxs)(F.dr,{className:"grid w-full grid-cols-4 bg-gray-900",children:[(0,s.jsx)(F.SP,{value:"ai-analysis",className:"text-purple-400",children:"An\xe1lise IA"}),(0,s.jsx)(F.SP,{value:"medical-record",children:"Atendimento"}),(0,s.jsx)(F.SP,{value:"patient-data",children:"Paciente"}),(0,s.jsx)(F.SP,{value:"documents",children:"Documentos"})]}),(0,s.jsx)(F.nU,{value:"patient-data",className:"text-sm space-y-3 mt-4 flex-grow"}),(0,s.jsx)(F.nU,{value:"medical-record",className:"flex-grow flex flex-col gap-4 mt-4"}),(0,s.jsx)(F.nU,{value:"documents",className:"mt-4 space-y-4"}),(0,s.jsx)(F.nU,{value:"ai-analysis",className:"mt-4 flex-grow",children:(0,s.jsx)(_,{appointment:t,patientVideoTrack:n})})]}),(0,s.jsx)("div",{className:"mt-auto pt-4 border-t border-gray-700",children:(0,s.jsxs)(b.z,{onClick:g,disabled:m,className:"w-full",children:[m?(0,s.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(h.Z,{className:"mr-2 h-4 w-4"})," Salvar Anota\xe7\xf5es"]})})]})]}):(0,s.jsx)("div",{className:"h-full flex items-center justify-center p-4 bg-gray-800 rounded-lg",children:(0,s.jsx)(x.Z,{className:"h-6 w-6 animate-spin"})})});q.displayName="ElectronicHealthRecord";let U=(0,r.memo)(()=>{let e=(0,o.OV)({filter:"remote"});return(0,s.jsx)("div",{className:"grid grid-cols-1 gap-4",children:e.map(e=>(0,s.jsx)(V,{id:e},e))})});U.displayName="ParticipantRenderer";let H=e=>{let{callObject:t}=e,{user:a}=(0,d.a)(),i=(0,n.useRouter)(),u=(0,n.useParams)().appointmentId,[m,f]=(0,r.useState)(null),[p,h]=(0,r.useState)(null),[v,g]=(0,r.useState)(!0),[y,j]=(0,r.useState)(null),[N,w]=(0,r.useState)(null),S=(0,o.OV)({filter:"remote"}),A=(0,o.aV)(S[0]);return((0,r.useEffect)(()=>{(null==A?void 0:A.tracks.video.persistentTrack)&&w(A.tracks.video.persistentTrack)},[A]),(0,r.useEffect)(()=>{u&&t&&a&&(async()=>{g(!0),j(null);try{let[e,s]=await Promise.all([(0,l.sO)(u),(0,c.Ts)()]);if(!e)throw Error("Agendamento n\xe3o encontrado.");if(e.doctorId!==a.uid)throw Error("Acesso n\xe3o permitido a este agendamento.");if(!e.telemedicineRoomUrl)throw Error("Link de telemedicina inv\xe1lido.");f(e),h(s),await t.join({url:e.telemedicineRoomUrl,userName:(null==s?void 0:s.displayName)||"M\xe9dico(a)"})}catch(e){j(e.message||"Falha ao carregar a sala.")}finally{g(!1)}})()},[u,t,a,i]),v)?(0,s.jsxs)("div",{className:"h-screen flex items-center justify-center bg-gray-900",children:[(0,s.jsx)(x.Z,{className:"h-12 w-12 animate-spin text-blue-400"}),(0,s.jsx)("p",{className:"ml-4",children:"A carregar..."})]}):y?(0,s.jsxs)("div",{className:"h-screen flex flex-col items-center justify-center bg-gray-900 p-4",children:[(0,s.jsx)(Z.Z,{className:"h-12 w-12 text-red-400"}),(0,s.jsx)("p",{className:"mt-4 text-center",children:y}),(0,s.jsx)(b.z,{onClick:()=>i.push("/dashboard/agenda"),className:"mt-4",children:"Voltar"})]}):(0,s.jsxs)("div",{className:"w-full h-screen bg-gray-900 text-white flex flex-col md:flex-row gap-4 p-4",children:[(0,s.jsx)("div",{className:"w-full md:w-2/5 xl:w-1/3 h-full overflow-y-auto",children:(0,s.jsx)(q,{appointment:m,userProfile:p,patientVideoTrack:N})}),(0,s.jsxs)("div",{className:"w-full md:w-3/5 xl:w-2/3 h-full flex flex-col gap-4",children:[(0,s.jsxs)("header",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-xl font-bold",children:"Atendimento Telemedicina"}),m&&(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["Paciente: ",m.patientName]})]}),(0,s.jsx)("main",{className:"flex-grow flex items-center justify-center overflow-hidden",children:0===S.length?(0,s.jsx)("div",{className:"text-center text-gray-400",children:"A aguardar o paciente entrar..."}):(0,s.jsx)(U,{})}),(0,s.jsx)("footer",{className:"flex-shrink-0",children:(0,s.jsx)(D,{callObject:t})})]})]})};function L(){let[e,t]=(0,r.useState)(null);return((0,r.useEffect)(()=>{let e=i.ZP.createCallObject();return t(e),()=>{e.leave().finally(()=>{e.destroy()})}},[]),e)?(0,s.jsx)(o.Eu,{callObject:e,children:(0,s.jsx)(H,{callObject:e})}):(0,s.jsxs)("div",{className:"h-screen flex items-center justify-center bg-gray-900",children:[(0,s.jsx)(x.Z,{className:"h-12 w-12 animate-spin"}),(0,s.jsx)("p",{className:"ml-4",children:"A inicializar v\xeddeo..."})]})}},62869:function(e,t,a){"use strict";a.d(t,{d:function(){return l},z:function(){return c}});var s=a(57437),r=a(2265),n=a(37053),o=a(90535),i=a(94508);let l=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:a,variant:r,size:o,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,s.jsx)(u,{className:(0,i.cn)(l({variant:r,size:o,className:a})),ref:t,...d})});c.displayName="Button"},66070:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return o},aY:function(){return d},eW:function(){return u},ll:function(){return l}});var s=a(57437),r=a(2265),n=a(94508);let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});o.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});l.displayName="CardTitle";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...r})});d.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})});u.displayName="CardFooter"},26815:function(e,t,a){"use strict";a.d(t,{_:function(){return c}});var s=a(57437),r=a(2265),n=a(6394),o=a(90535),i=a(94508);let l=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.f,{ref:t,className:(0,i.cn)(l(),a),...r})});c.displayName=n.f.displayName},74991:function(e,t,a){"use strict";a.d(t,{E:function(){return l},m:function(){return c}});var s=a(57437),r=a(2265),n=a(42325),o=a(40519),i=a(94508);let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.fC,{className:(0,i.cn)("grid gap-2",a),...r,ref:t})});l.displayName=n.fC.displayName;let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.ck,{ref:t,className:(0,i.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...r,children:(0,s.jsx)(n.z$,{className:"flex items-center justify-center",children:(0,s.jsx)(o.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})})});c.displayName=n.ck.displayName},12339:function(e,t,a){"use strict";a.d(t,{SP:function(){return c},dr:function(){return l},mQ:function(){return i},nU:function(){return d}});var s=a(57437),r=a(2265),n=a(20271),o=a(94508);let i=n.fC,l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.aV,{ref:t,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});l.displayName=n.aV.displayName;let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.xz,{ref:t,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});c.displayName=n.xz.displayName;let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.VY,{ref:t,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});d.displayName=n.VY.displayName},76818:function(e,t,a){"use strict";a.d(t,{g:function(){return o}});var s=a(57437),r=a(2265),n=a(94508);let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});o.displayName="Textarea"},35153:function(e,t,a){"use strict";a.d(t,{pm:function(){return m}});var s=a(2265);let r=0,n=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?o(a):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=i(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=s.useState(c);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},902:function(e,t,a){"use strict";a.d(t,{Pc:function(){return i},fW:function(){return d},ps:function(){return u},q:function(){return c},sO:function(){return l}});var s=a(17293),r=a(1850),n=a(5978);let o=(0,r.V1)(s.wk,"createAppointment"),i=async e=>{try{let t={...e,appointmentDate:e.appointmentDate.toISOString()},a=await o(t);if(!a.data.success||!a.data.appointmentId)throw Error("A Cloud Function n\xe3o retornou um resultado de sucesso.");return a.data.appointmentId}catch(e){throw Error(e.message||"N\xe3o foi poss\xedvel concluir o agendamento.")}},l=async e=>{try{let t=(0,n.JU)(s.db,"appointments",e),a=await (0,n.QT)(t);if(a.exists())return{id:a.id,...a.data()};return null}catch(e){throw Error("Falha ao carregar os dados do agendamento.")}},c=async(e,t)=>{try{let a=(0,n.JU)(s.db,"appointments",e);await (0,n.r7)(a,{clinicalEvolution:t.clinicalEvolution,diagnosticHypothesis:t.diagnosticHypothesis,updatedAt:(0,n.Bt)()})}catch(e){throw Error("N\xe3o foi poss\xedvel salvar as anota\xe7\xf5es do prontu\xe1rio.")}},d=async(e,t)=>{try{let a=(0,n.JU)(s.db,"appointments",e);await (0,n.r7)(a,{autismProtocolAnswers:t,updatedAt:(0,n.Bt)()})}catch(e){throw Error("N\xe3o foi poss\xedvel salvar as respostas do protocolo.")}},u=async(e,t)=>{try{let a=(0,n.JU)(s.db,"appointments",e);await (0,n.r7)(a,{aiAnalysisReport:t,updatedAt:(0,n.Bt)()})}catch(e){throw Error("N\xe3o foi poss\xedvel salvar o relat\xf3rio da IA.")}}}},function(e){e.O(0,[3609,9015,7425,6399,8663,8566,6636,8938,6498,1878,6137,9388,9733,4517,7545,8420,3073,2971,2117,1744],function(){return e(e.s=18278)}),_N_E=e.O()}]);