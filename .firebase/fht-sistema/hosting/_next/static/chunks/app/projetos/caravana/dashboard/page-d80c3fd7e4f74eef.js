(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9675],{99748:function(e,s,t){Promise.resolve().then(t.bind(t,25443))},25443:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return w}});var a=t(57437),l=t(2265),r=t(17293),n=t(5978),d=t(46413),i=t(66070),o=t(51817),c=t(76865),x=t(95805),m=t(42488),u=t(41671),h=t(92369),j=t(47625),f=t(77031),p=t(97059),N=t(62994),g=t(83046);let b=()=>(0,a.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,a.jsx)(o.Z,{className:"h-10 w-10 animate-spin text-blue-600"})}),y=e=>{let{message:s}=e;return(0,a.jsxs)("div",{className:"text-center p-10 bg-red-50 rounded-lg",children:[(0,a.jsx)(c.Z,{className:"mx-auto h-12 w-12 text-red-400"}),(0,a.jsx)("p",{className:"mt-4 font-semibold text-red-700",children:"Ocorreu um Erro"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-red-600",children:s})]})};function w(){let{user:e}=(0,d.a)(),[s,t]=(0,l.useState)({waiting:0,inProgress:0,completedToday:0,totalToday:0}),[o,c]=(0,l.useState)([]),[w,v]=(0,l.useState)(!0),[A,E]=(0,l.useState)(null);return((0,l.useEffect)(()=>{if(!e){v(!1);return}let s=new Date;s.setHours(0,0,0,0);let a=new Date;a.setHours(23,59,59,999);let l=(0,n.IO)((0,n.hJ)(r.db,"consultations"),(0,n.ar)("createdAt",">=",n.EK.fromDate(s)),(0,n.ar)("createdAt","<=",n.EK.fromDate(a))),d=(0,n.cf)(l,e=>{let s=e.docs.map(e=>e.data()),a={waiting:0,inProgress:0,completedToday:0,totalToday:0},l=new Map;s.forEach(e=>{"AGUARDANDO"===e.status&&a.waiting++,"EM_ANDAMENTO"===e.status&&a.inProgress++,"FINALIZADO"===e.status&&a.completedToday++,e.specialty&&l.set(e.specialty,(l.get(e.specialty)||0)+1)}),a.totalToday=s.length;let r=Array.from(l.entries()).map(e=>{let[s,t]=e;return{name:s,total:t}});t(a),c(r),v(!1)},e=>{console.error("Erro ao escutar consultas:",e),E("N\xe3o foi poss\xedvel carregar os dados em tempo real."),v(!1)});return()=>d()},[e]),w)?(0,a.jsx)(b,{}):A?(0,a.jsx)(y,{message:A}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard do Multir\xe3o"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Vis\xe3o geral dos atendimentos em tempo real."})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ll,{className:"text-sm font-medium",children:"Pacientes na Fila"}),(0,a.jsx)(x.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.waiting}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Aguardando atendimento"})]})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ll,{className:"text-sm font-medium",children:"Em Atendimento"}),(0,a.jsx)(m.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.inProgress}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Sendo atendidos agora"})]})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ll,{className:"text-sm font-medium",children:"Atendimentos Finalizados"}),(0,a.jsx)(u.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.completedToday}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Finalizados hoje"})]})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ll,{className:"text-sm font-medium",children:"Total de Hoje"}),(0,a.jsx)(h.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.totalToday}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total de pacientes no dia"})]})]})]}),(0,a.jsx)("div",{className:"grid gap-4",children:(0,a.jsxs)(i.Zb,{className:"col-span-1",children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsx)(i.ll,{children:"Atendimentos por Especialidade"}),(0,a.jsx)(i.SZ,{children:"Distribui\xe7\xe3o dos atendimentos realizados hoje."})]}),(0,a.jsx)(i.aY,{className:"pl-2",children:(0,a.jsx)(j.h,{width:"100%",height:350,children:(0,a.jsxs)(f.v,{data:o,children:[(0,a.jsx)(p.K,{dataKey:"name",stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),(0,a.jsx)(N.B,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>"".concat(e)}),(0,a.jsx)(g.$,{dataKey:"total",fill:"#2563eb",radius:[4,4,0,0]})]})})})]})})]})}}},function(e){e.O(0,[4358,9990,6137,9084,5467,5037,2971,2117,1744],function(){return e(e.s=99748)}),_N_E=e.O()}]);