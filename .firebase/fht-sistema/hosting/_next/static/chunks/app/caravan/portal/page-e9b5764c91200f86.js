(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7645],{23425:function(e,r,t){Promise.resolve().then(t.bind(t,73067))},73067:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return g}});var n=t(57437),a=t(2265),o=t(27648),i=t(46413),s=t(92651),c=t(66070),l=t(62869),u=t(76858),d=t(51817),f=t(43044),h=t(49663),p=t(95337),m=t(25466);let v=e=>{let{title:r,description:t,href:a,icon:i}=e;return(0,n.jsxs)(c.Zb,{className:"hover:border-blue-500 hover:shadow-lg transition-all",children:[(0,n.jsxs)(c.Ol,{children:[(0,n.jsxs)(c.ll,{className:"flex items-center gap-3",children:[(0,n.jsx)(i,{className:"h-6 w-6 text-blue-600"}),r]}),(0,n.jsx)(c.SZ,{children:t})]}),(0,n.jsx)(c.aY,{children:(0,n.jsx)(l.z,{asChild:!0,className:"w-full",children:(0,n.jsxs)(o.default,{href:a,children:["Acessar ",(0,n.jsx)(u.Z,{className:"ml-2 h-4 w-4"})]})})})]})};function g(){let{user:e,loading:r}=(0,i.a)(),[t,c]=(0,a.useState)(null),[u,g]=(0,a.useState)(!0);if((0,a.useEffect)(()=>{r||(e&&!t?(0,s.Ts)().then(c).finally(()=>g(!1)):g(!1))},[e,r,t]),r||u)return(0,n.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,n.jsx)(d.Z,{className:"h-12 w-12 animate-spin text-blue-600"})});if(!t)return(0,n.jsxs)("div",{className:"text-center p-10",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"Acesso Negado"}),(0,n.jsx)("p",{children:"Voc\xea n\xe3o est\xe1 logado ou seu perfil n\xe3o foi encontrado."}),(0,n.jsx)(l.z,{asChild:!0,className:"mt-4",children:(0,n.jsx)(o.default,{href:"/projetos/caravana/login",children:"Ir para o Login"})})]});let y=t.userType||t.role;return(0,n.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Portal do Multir\xe3o da Sa\xfade"}),(0,n.jsxs)("p",{className:"text-muted-foreground",children:["Bem-vindo(a), ",t.displayName,". Selecione sua \xe1rea de trabalho."]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[("receptionist"===y||"caravan_admin"===y||"admin"===y)&&(0,n.jsx)(v,{title:"Acolhimento (Recep\xe7\xe3o)",description:"Cadastre novos pacientes e encaminhe-os para a triagem.",href:"/caravan/reception",icon:f.Z}),("triage_nurse"===y||"caravan_admin"===y||"admin"===y)&&(0,n.jsx)(v,{title:"Fila de Triagem",description:"Colete o hist\xf3rico e os dados iniciais dos pacientes.",href:"/caravan/triage",icon:h.Z}),("doctor"===y||"caravan_admin"===y||"admin"===y)&&(0,n.jsx)(v,{title:"Fila de Atendimento",description:"Visualize sua fila e chame o pr\xf3ximo paciente para atender.",href:"/dashboard/fila",icon:p.Z}),("caravan_admin"===y||"admin"===y)&&(0,n.jsx)(v,{title:"Dashboard de Gest\xe3o",description:"Acompanhe os indicadores do evento em tempo real.",href:"/caravan/dashboard",icon:m.Z})]})]})}},46413:function(e,r,t){"use strict";t.d(r,{AuthProvider:function(){return l},a:function(){return u}});var n=t(57437),a=t(2265),o=t(43301),i=t(17293),s=t(92651);let c=(0,a.createContext)(void 0),l=e=>{let{children:r}=e,[t,l]=(0,a.useState)(null),[u,d]=(0,a.useState)(null),[f,h]=(0,a.useState)(!0),[p,m]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{console.log("[AuthProvider] Subscribing to onAuthStateChanged (montagem do provider)");let e=(0,o.Aj)(i.I8,async e=>{if(console.log("[AuthProvider] onAuthStateChanged: User state changed. New Firebase user:",e?e.uid:null),l(e),e){m(!0);try{let e=await (0,s.Ts)();d(e),console.log("[AuthProvider] onAuthStateChanged: Profile fetched after user state change:",e)}catch(e){console.error("[AuthProvider] onAuthStateChanged: Error fetching profile:",e),d(null)}finally{m(!1)}}else d(null),m(!1);h(!1),console.log("[AuthProvider] onAuthStateChanged: Loading set to false.")});return()=>{console.log("[AuthProvider] Unsubscribing from onAuthStateChanged (desmontagem do provider)"),e()}},[]),console.log("[AuthProvider] Context values updated - User:",t?t.uid:null,"Loading:",f,"ProfileLoading:",p),(0,n.jsx)(c.Provider,{value:{user:t,userProfile:u,loading:f,profileLoading:p},children:r})},u=()=>{let e=(0,a.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},62869:function(e,r,t){"use strict";t.d(r,{d:function(){return c},z:function(){return l}});var n=t(57437),a=t(2265),o=t(37053),i=t(90535),s=t(94508);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,r)=>{let{className:t,variant:a,size:i,asChild:l=!1,...u}=e,d=l?o.g7:"button";return(0,n.jsx)(d,{className:(0,s.cn)(c({variant:a,size:i,className:t})),ref:r,...u})});l.displayName="Button"},66070:function(e,r,t){"use strict";t.d(r,{Ol:function(){return s},SZ:function(){return l},Zb:function(){return i},aY:function(){return u},eW:function(){return d},ll:function(){return c}});var n=t(57437),a=t(2265),o=t(94508);let i=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});i.displayName="Card";let s=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",t),...a})});s.displayName="CardHeader";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});c.displayName="CardTitle";let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,o.cn)("text-sm text-muted-foreground",t),...a})});l.displayName="CardDescription";let u=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,o.cn)("p-6 pt-0",t),...a})});u.displayName="CardContent";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,o.cn)("flex items-center p-6 pt-0",t),...a})});d.displayName="CardFooter"},92651:function(e,r,t){"use strict";t.d(r,{CQ:function(){return u},Fl:function(){return v},TX:function(){return f},Ts:function(){return p},XB:function(){return s},bI:function(){return m},c0:function(){return h},hc:function(){return g},l5:function(){return c},pH:function(){return d},q9:function(){return l}});var n=t(43301),a=t(5978),o=t(17293);let i=(0,t(13491).V1)(o.wk,"createStaffUser"),s=async e=>{try{let r=await i(e);if(!r.data.success)throw Error("A fun\xe7\xe3o de backend n\xe3o retornou sucesso.");return r.data.user}catch(e){throw console.error("[AuthService] Erro ao chamar a fun\xe7\xe3o createStaffUser:",e),Error(e.message||"N\xe3o foi poss\xedvel adicionar o membro \xe0 Equipa.")}},c=async e=>{try{let r=(0,a.hJ)(o.db,"users"),t=(0,a.IO)(r,(0,a.ar)("hospitalId","==",e)),n=await (0,a.PL)(t);if(n.empty)return[];return n.docs.map(e=>({uid:e.id,...e.data()})).filter(r=>r.uid!==e)}catch(r){throw console.error("[AuthService] Erro ao buscar a Equipa para o hospital ".concat(e,":"),r),Error("N\xe3o foi poss\xedvel carregar a lista da Equipa.")}},l=async(e,r,t)=>{try{let a=await (0,n.Xb)(o.I8,e,r);return await (0,n.ck)(a.user,{displayName:t}),a.user}catch(e){throw console.error("[AuthService] Erro ao criar usu\xe1rio no Auth:",e),e}},u=async(e,r,t,n,i)=>{let s={};if("doctor"===n){let{documents:e,specialistDocuments:r,...t}=i;s={...t,documents:e,specialistDocuments:r,documentVerificationStatus:"PENDING_REVIEW",adminVerificationNotes:""}}else if("hospital"===n){let{hospitalDocs:e,legalRepDocuments:r,...t}=i;s={companyInfo:{cnpj:t.cnpj,stateRegistration:t.stateRegistration,phone:t.phone,address:t.address},legalRepresentativeInfo:t.legalRepresentativeInfo,hospitalDocs:e,legalRepDocuments:r,documentVerificationStatus:"PENDING_REVIEW",adminVerificationNotes:""}}else if(["receptionist","triage_nurse","caravan_admin","admin","backoffice"].includes(n))s={};else throw Error("Tipo de perfil de registro inv\xe1lido.");let c={uid:e,email:r,displayName:t,userType:n,createdAt:(0,a.Bt)(),updatedAt:(0,a.Bt)(),...s};await (0,a.pl)((0,a.JU)(o.db,"users",e),c),console.log("[AuthService] Perfil ".concat(n," salvo para UID: ").concat(e))},d=async(e,r)=>{try{return(await (0,n.e5)(o.I8,e,r)).user}catch(e){throw console.error("[AuthService] Login error:",e),e}},f=async()=>{try{await (0,n.w7)(o.I8)}catch(e){throw console.error("[AuthService] Logout error:",e),e}},h=async e=>{try{await (0,n.LS)(o.I8,e)}catch(e){throw console.error("[AuthService] Reset error:",e),e}},p=async()=>{let e=o.I8.currentUser;if(!e)return null;try{let r=(0,a.JU)(o.db,"users",e.uid),t=await (0,a.QT)(r);if(t.exists())return{uid:t.id,...t.data()};return null}catch(e){throw console.error("[AuthService] Get current user data error:",e),e}},m=async(e,r)=>{if(!e)throw Error("ID do Doutor n\xe3o fornecido para atualiza\xe7\xe3o.");if(!r||0===Object.keys(r).length){console.warn("[AuthService] Nenhum dado fornecido para atualiza\xe7\xe3o do perfil do doutor.");return}let t=(0,a.JU)(o.db,"users",e),n={};if(Object.keys(r).forEach(e=>{void 0!==r[e]&&("address"===e&&"object"==typeof r.address&&null!==r.address?Object.keys(r.address).forEach(e=>{void 0!==r.address[e]&&(n["address.".concat(e)]=r.address[e])}):n[e]=r[e])}),0===Object.keys(n).length){console.warn("[AuthService] Nenhum dado v\xe1lido para atualizar ap\xf3s filtrar undefined.");return}n.updatedAt=(0,a.Bt)();try{var i;let r=await (0,a.QT)(t);if(!r.exists()||(null===(i=r.data())||void 0===i?void 0:i.userType)!=="doctor")throw Error("Perfil de doutor n\xe3o encontrado ou tipo de usu\xe1rio incorreto para atualiza\xe7\xe3o.");await (0,a.r7)(t,n),console.log("[AuthService] Perfil do doutor ".concat(e," atualizado com sucesso."))}catch(r){throw console.error("[AuthService] Erro ao atualizar perfil do doutor ".concat(e,":"),r),r}},v=async(e,r)=>{try{let t=(0,a.hJ)(o.db,"users"),n=(0,a.IO)(t,(0,a.ar)("userType","==","doctor"),(0,a.ar)("specialties","array-contains",r),(0,a.ar)("healthUnitIds","array-contains",e)),i=await (0,a.PL)(n);if(i.empty)return[];return i.docs.map(e=>({uid:e.id,...e.data()}))}catch(e){throw console.error("[AuthService] Erro ao buscar m\xe9dicos associados por especialidade:",e),Error("N\xe3o foi poss\xedvel carregar a lista de m\xe9dicos para esta unidade.")}},g=async function(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!e)throw Error("ID do usu\xe1rio n\xe3o fornecido.");let i=(0,a.JU)(o.db,"users",e),s={documentVerificationStatus:r,adminVerificationNotes:t,documentRejectionReasons:n,updatedAt:(0,a.Bt)()};"APPROVED"===r&&(s.documentRejectionReasons={},s.adminVerificationNotes="");try{await (0,a.r7)(i,s)}catch(r){throw console.error("Erro ao atualizar status do usu\xe1rio ".concat(e,":"),r),Error("Falha ao atualizar o status do cadastro.")}}},17293:function(e,r,t){"use strict";t.d(r,{I8:function(){return l},db:function(){return u},tO:function(){return d},wk:function(){return f}});var n=t(738),a=t(43301),o=t(5978),i=t(60062),s=t(13491);let c=(0,n.C6)().length?(0,n.Mq)():(0,n.ZF)({apiKey:"AIzaSyAyoX1YqAdqHuIvSoj0Yw_FYnhCBv-KfEA",authDomain:"fht-sistema.firebaseapp.com",projectId:"fht-sistema",storageBucket:"fht-sistema.firebasestorage.app",messagingSenderId:"583837273524",appId:"1:583837273524:web:1583addfce581e61ac76e1",measurementId:"G-6FJ2H3G32N"}),l=(0,a.v0)(c),u=(0,o.ad)(c),d=(0,i.cF)(c),f=(0,s.$C)(c,"us-central1")},94508:function(e,r,t){"use strict";t.d(r,{Hq:function(){return l},bx:function(){return c},cn:function(){return o},rl:function(){return s},xG:function(){return i}});var n=t(61994),a=t(53335);function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.m6)((0,n.W)(r))}let i=e=>null==e||isNaN(e)?"R$ -":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),s=e=>null==e||isNaN(e)?"- %":"".concat(e.toFixed(1),"%"),c=e=>null==e||isNaN(e)?"- h":"".concat(e.toFixed(1)," h"),l=(e,r)=>{if(!e)return e;let t=e.replace(/[^\dX]/gi,"");if("cpf"===r&&11===t.length)return t.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4");if("cnpj"===r&&14===t.length)return t.replace(/^(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})$/,"$1.$2.$3/$4-$5");if("phone"===r)return t.length>10?t.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):t.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3");if("cep"===r&&8===t.length)return t.replace(/(\d{5})(\d{3})/,"$1-$2");if("rg"===r){if(9===t.length)return t.replace(/(\d{2})(\d{3})(\d{3})([\dX])$/,"$1.$2.$3-$4");if(8===t.length)return t.replace(/(\d{1})(\d{3})(\d{3})([\dX])$/,"$1.$2.$3-$4")}return e}},76858:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(79205).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},43044:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(79205).Z)("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]])},25466:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(79205).Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},51817:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(79205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},95337:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(79205).Z)("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]])},49663:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(79205).Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]])},98575:function(e,r,t){"use strict";t.d(r,{F:function(){return o},e:function(){return i}});var n=t(2265);function a(e,r){if("function"==typeof e)return e(r);null!=e&&(e.current=r)}function o(...e){return r=>{let t=!1,n=e.map(e=>{let n=a(e,r);return t||"function"!=typeof n||(t=!0),n});if(t)return()=>{for(let r=0;r<n.length;r++){let t=n[r];"function"==typeof t?t():a(e[r],null)}}}}function i(...e){return n.useCallback(o(...e),e)}},37053:function(e,r,t){"use strict";t.d(r,{Z8:function(){return i},g7:function(){return s},sA:function(){return l}});var n=t(2265),a=t(98575),o=t(57437);function i(e){let r=function(e){let r=n.forwardRef((e,r)=>{let{children:t,...o}=e;if(n.isValidElement(t)){let e,i;let s=(e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?t.props.ref:t.props.ref||t.ref,c=function(e,r){let t={...r};for(let n in r){let a=e[n],o=r[n];/^on[A-Z]/.test(n)?a&&o?t[n]=(...e)=>{let r=o(...e);return a(...e),r}:a&&(t[n]=a):"style"===n?t[n]={...a,...o}:"className"===n&&(t[n]=[a,o].filter(Boolean).join(" "))}return{...e,...t}}(o,t.props);return t.type!==n.Fragment&&(c.ref=r?(0,a.F)(r,s):s),n.cloneElement(t,c)}return n.Children.count(t)>1?n.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}(e),t=n.forwardRef((e,t)=>{let{children:a,...i}=e,s=n.Children.toArray(a),c=s.find(u);if(c){let e=c.props.children,a=s.map(r=>r!==c?r:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,o.jsx)(r,{...i,ref:t,children:n.isValidElement(e)?n.cloneElement(e,void 0,a):null})}return(0,o.jsx)(r,{...i,ref:t,children:a})});return t.displayName=`${e}.Slot`,t}var s=i("Slot"),c=Symbol("radix.slottable");function l(e){let r=({children:e})=>(0,o.jsx)(o.Fragment,{children:e});return r.displayName=`${e}.Slottable`,r.__radixId=c,r}function u(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===c}},90535:function(e,r,t){"use strict";t.d(r,{j:function(){return i}});var n=t(61994);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,o=n.W,i=(e,r)=>t=>{var n;if((null==r?void 0:r.variants)==null)return o(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:i,defaultVariants:s}=r,c=Object.keys(i).map(e=>{let r=null==t?void 0:t[e],n=null==s?void 0:s[e];if(null===r)return null;let o=a(r)||a(n);return i[e][o]}),l=t&&Object.entries(t).reduce((e,r)=>{let[t,n]=r;return void 0===n||(e[t]=n),e},{});return o(e,c,null==r?void 0:null===(n=r.compoundVariants)||void 0===n?void 0:n.reduce((e,r)=>{let{class:t,className:n,...a}=r;return Object.entries(a).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...s,...l}[r]):({...s,...l})[r]===t})?[...e,t,n]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}}},function(e){e.O(0,[4358,9990,6137,9084,7648,2971,2117,1744],function(){return e(e.s=23425)}),_N_E=e.O()}]);