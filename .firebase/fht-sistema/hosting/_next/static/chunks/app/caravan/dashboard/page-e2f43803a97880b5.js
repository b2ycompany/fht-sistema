(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8701],{73276:function(e,t,s){Promise.resolve().then(s.bind(s,88228))},88228:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var r=s(57437),a=s(2265),n=s(17293),l=s(5978),d=s(46413),i=s(66070),c=s(51817),o=s(76865),u=s(95805),m=s(42488),x=s(41671),f=s(92369);let h=()=>(0,r.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,r.jsx)(c.Z,{className:"h-10 w-10 animate-spin text-blue-600"})}),p=e=>{let{message:t}=e;return(0,r.jsxs)("div",{className:"text-center p-10 bg-red-50 rounded-lg",children:[(0,r.jsx)(o.Z,{className:"mx-auto h-12 w-12 text-red-400"}),(0,r.jsx)("p",{className:"mt-4 font-semibold text-red-700",children:"Ocorreu um Erro"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-red-600",children:t})]})};function j(){let{userProfile:e}=(0,d.a)(),[t,s]=(0,a.useState)({waiting:0,inProgress:0,completedToday:0,totalToday:0}),[c,o]=(0,a.useState)(!0),[j,N]=(0,a.useState)(null);return((0,a.useEffect)(()=>{let t=null==e?void 0:e.assignedCaravanId;if(!t){o(!1);return}let r=new Date;r.setHours(0,0,0,0);let a=l.EK.fromDate(r),d=(0,l.IO)((0,l.hJ)(n.db,"serviceQueue"),(0,l.ar)("unitId","==",t),(0,l.ar)("createdAt",">=",a)),i=(0,l.cf)(d,e=>{let t=0,r=0,a=0;e.forEach(e=>{let s=e.data().status;("Aguardando Triagem"===s||"Aguardando Atendimento"===s)&&t++,("Em Triagem"===s||"Em Atendimento"===s)&&r++,"Finalizado"===s&&a++}),s({waiting:t,inProgress:r,completedToday:a,totalToday:e.size}),o(!1)},e=>{console.error("Erro ao escutar a fila de servi\xe7o:",e),N("N\xe3o foi poss\xedvel carregar os dados do dashboard em tempo real."),o(!1)});return()=>i()},[e]),c)?(0,r.jsx)(h,{}):j?(0,r.jsx)(p,{message:j}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard do Multir\xe3o"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Vis\xe3o geral dos atendimentos em tempo real."})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Pacientes na Fila"}),(0,r.jsx)(u.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t.waiting}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Aguardando atendimento"})]})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Em Atendimento"}),(0,r.jsx)(m.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t.inProgress}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Sendo atendidos agora"})]})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Atendimentos Finalizados"}),(0,r.jsx)(x.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t.completedToday}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Finalizados hoje"})]})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Total de Hoje"}),(0,r.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t.totalToday}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total de pacientes no dia"})]})]})]}),(0,r.jsx)("div",{className:"grid gap-4",children:(0,r.jsxs)(i.Zb,{className:"col-span-1",children:[(0,r.jsx)(i.Ol,{children:(0,r.jsx)(i.ll,{children:"Atendimentos por Especialidade"})}),(0,r.jsx)(i.aY,{className:"pl-2",children:(0,r.jsx)("div",{className:"h-[350px] w-full flex items-center justify-center text-muted-foreground",children:(0,r.jsx)("p",{children:"(Gr\xe1fico em breve)"})})})]})})]})}},66070:function(e,t,s){"use strict";s.d(t,{Ol:function(){return d},SZ:function(){return c},Zb:function(){return l},aY:function(){return o},eW:function(){return u},ll:function(){return i}});var r=s(57437),a=s(2265),n=s(94508);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});l.displayName="Card";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});d.displayName="CardHeader";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});i.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});c.displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});o.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})});u.displayName="CardFooter"},42488:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},41671:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},51817:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},76865:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},92369:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},95805:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},99376:function(e,t,s){"use strict";var r=s(35475);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[4358,9990,6137,9084,3073,2971,2117,1744],function(){return e(e.s=73276)}),_N_E=e.O()}]);