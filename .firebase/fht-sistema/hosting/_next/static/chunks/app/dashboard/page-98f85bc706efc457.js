(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{86430:function(e,t,s){Promise.resolve().then(s.bind(s,54692))},54692:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var r=s(57437),a=s(2265),n=s(66070),i=s(62869),o=s(99376),d=s(51817),l=s(29374),c=s(29090),u=s(95805),m=s(99897),f=s(46413),p=s(35153),x=s(33245),h=s(41671),g=s(76865),v=s(27648);let b=e=>{let{status:t,adminNotes:s,userType:a,editProfileLink:n}=e;return t?"PENDING_REVIEW"===t?(0,r.jsxs)("div",{className:"p-4 mb-6 text-sm text-blue-700 bg-blue-100 rounded-lg border border-blue-300",role:"alert",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(x.Z,{className:"inline w-5 h-5 mr-3 shrink-0"}),(0,r.jsx)("span",{className:"font-medium",children:"Seu cadastro est\xe1 em an\xe1lise."})]}),(0,r.jsx)("p",{className:"mt-1.5 ml-8",children:"Avisaremos assim que o processo de verifica\xe7\xe3o for conclu\xeddo. Obrigado pela sua paci\xeancia!"})]}):"APPROVED"===t?(0,r.jsxs)("div",{className:"p-4 mb-6 text-sm text-green-700 bg-green-100 rounded-lg border border-green-300",role:"alert",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(h.Z,{className:"inline w-5 h-5 mr-3 shrink-0"}),(0,r.jsx)("span",{className:"font-medium",children:"Seu cadastro foi aprovado!"})]}),(0,r.jsx)("p",{className:"mt-1.5 ml-8",children:"Voc\xea j\xe1 pode utilizar todas as funcionalidades da plataforma."})]}):"REJECTED_NEEDS_RESUBMISSION"===t?(0,r.jsxs)("div",{className:"p-4 mb-6 text-sm text-red-700 bg-red-100 rounded-lg border border-red-300",role:"alert",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(g.Z,{className:"inline w-5 h-5 mr-3 shrink-0"}),(0,r.jsx)("span",{className:"font-medium",children:"Seu cadastro precisa de corre\xe7\xf5es."})]}),s&&(0,r.jsxs)("div",{className:"mt-2.5 ml-8",children:[(0,r.jsx)("strong",{className:"block mb-1",children:"Observa\xe7\xf5es do Administrador:"}),(0,r.jsx)("p",{className:"whitespace-pre-wrap bg-red-50 p-2 rounded border border-red-200",children:s})]}),(0,r.jsxs)("p",{className:"mt-2.5 ml-8",children:["Por favor, revise as informa\xe7\xf5es e/ou documentos solicitados e fa\xe7a as corre\xe7\xf5es necess\xe1rias.",(0,r.jsx)(v.default,{href:n||("doctor"===a?"/dashboard/profile/edit":"/hospital/profile/edit"),className:"ml-1 font-semibold text-red-800 hover:text-red-900 underline",children:"Clique aqui para corrigir seu cadastro."})]})]}):null:null};b.displayName="ProfileStatusAlert";var N=s(17293),j=s(5978),y=s(52255),S=s(66916),E=s(35974);let T=e=>{let{title:t,description:s,attendanceType:u,icon:m}=e,{user:x,userProfile:h}=(0,f.a)(),g=(0,o.useRouter)(),{toast:v}=(0,p.pm)(),[b,T]=(0,a.useState)([]),[w,O]=(0,a.useState)(!0),[_,A]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e;if(!(null==x?void 0:x.uid)||!h){O(!1);return}if("Telemedicina"===u){if(!h.specialties||0===h.specialties.length){O(!1);return}e=(0,j.IO)((0,j.hJ)(N.db,"appointments"),(0,j.ar)("specialty","in",h.specialties),(0,j.ar)("type","==","Telemedicina"),(0,j.ar)("status","==","SCHEDULED"),(0,j.Xo)("appointmentDate","asc"))}else e=(0,j.IO)((0,j.hJ)(N.db,"appointments"),(0,j.ar)("doctorId","==",x.uid),(0,j.ar)("type","==","Presencial"),(0,j.ar)("status","==","SCHEDULED"),(0,j.Xo)("appointmentDate","asc"));let t=(0,j.cf)(e,e=>{T(e.docs.map(e=>({id:e.id,...e.data()}))),O(!1)},e=>{console.error("Erro ao buscar fila ".concat(u,":"),e),v({title:"Erro na Fila",description:"N\xe3o foi poss\xedvel carregar a fila de ".concat(u,"."),variant:"destructive"}),O(!1)});return()=>t()},[x,h,u,v]);let D=async e=>{if(h){A(e.id);try{let t=(0,j.JU)(N.db,"appointments",e.id);await (0,j.r7)(t,{status:"IN_PROGRESS",doctorId:h.uid}),g.push("/dashboard/atendimento/".concat(e.id))}catch(e){v({title:"Erro ao iniciar consulta",description:e.message,variant:"destructive"}),A(null)}}};return(0,r.jsxs)(n.Zb,{className:"flex flex-col",children:[(0,r.jsxs)(n.Ol,{children:[(0,r.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(m,{size:22})," ",t]}),(0,r.jsx)(n.SZ,{children:s})]}),(0,r.jsx)(n.aY,{className:"flex-grow",children:w?(0,r.jsx)("div",{className:"flex justify-center pt-8",children:(0,r.jsx)(d.Z,{className:"h-6 w-6 animate-spin"})}):b.length>0?(0,r.jsx)("div",{className:"space-y-2",children:b.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-md border border-blue-200",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-semibold",children:e.patientName}),(0,r.jsxs)("p",{className:"text-xs text-gray-600",children:["Agendado para: ",(0,y.WU)(e.appointmentDate.toDate(),"dd/MM '\xe0s' HH:mm",{locale:S.F})]}),(0,r.jsx)(E.C,{variant:"secondary",className:"mt-1",children:e.specialty})]}),(0,r.jsxs)(i.z,{size:"sm",onClick:()=>D(e),disabled:!!_,className:"bg-blue-600 hover:bg-blue-700",children:[_===e.id?(0,r.jsx)(d.Z,{className:"h-4 w-4 animate-spin"}):"Telemedicina"===u?(0,r.jsx)(l.Z,{className:"h-4 w-4 mr-2"}):(0,r.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Iniciar"]})]},e.id))}):(0,r.jsx)("p",{className:"text-center text-sm text-muted-foreground pt-8",children:"Nenhum paciente na fila no momento."})})]})};function w(){let{user:e,userProfile:t,loading:s}=(0,f.a)(),[n,i]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{s||i(!1)},[s]),s||n)?(0,r.jsx)("div",{className:"p-6 flex justify-center items-center h-screen",children:(0,r.jsx)(d.Z,{className:"mx-auto h-10 w-10 animate-spin"})}):t?(0,r.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 space-y-8",children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-gray-800",children:["Bem-vindo(a) de volta, ",t.displayName,"!"]}),(0,r.jsx)(b,{status:t.documentVerificationStatus,userType:"doctor"}),(0,r.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,r.jsx)(T,{title:"Fila de Atendimento Presencial",description:"Pacientes na unidade que aguardam por si.",attendanceType:"Presencial",icon:u.Z}),(0,r.jsx)(T,{title:"Fila de Atendimento Telemedicina",description:"Pacientes aguardando uma consulta remota.",attendanceType:"Telemedicina",icon:m.Z})]})]}):(0,r.jsx)("div",{className:"p-6 text-center",children:"N\xe3o foi poss\xedvel carregar o perfil do utilizador."})}},35974:function(e,t,s){"use strict";s.d(t,{C:function(){return o}});var r=s(57437);s(2265);var a=s(90535),n=s(94508);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:s}),t),...a})}},62869:function(e,t,s){"use strict";s.d(t,{d:function(){return d},z:function(){return l}});var r=s(57437),a=s(2265),n=s(37053),i=s(90535),o=s(94508);let d=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:l=!1,...c}=e,u=l?n.g7:"button";return(0,r.jsx)(u,{className:(0,o.cn)(d({variant:a,size:i,className:s})),ref:t,...c})});l.displayName="Button"},66070:function(e,t,s){"use strict";s.d(t,{Ol:function(){return o},SZ:function(){return l},Zb:function(){return i},aY:function(){return c},eW:function(){return u},ll:function(){return d}});var r=s(57437),a=s(2265),n=s(94508);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});i.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});o.displayName="CardHeader";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});d.displayName="CardTitle";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});l.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})});u.displayName="CardFooter"},35153:function(e,t,s){"use strict";s.d(t,{pm:function(){return m}});var r=s(2265);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],l={toasts:[]};function c(e){l=o(l,e),d.forEach(e=>{e(l)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(l);return r.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}}},function(e){e.O(0,[3609,9015,6137,9388,7648,1787,2255,9891,3073,2971,2117,1744],function(){return e(e.s=86430)}),_N_E=e.O()}]);