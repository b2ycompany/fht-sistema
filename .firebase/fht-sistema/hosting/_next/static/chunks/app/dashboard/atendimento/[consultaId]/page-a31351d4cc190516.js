(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1899],{12017:function(e,t,a){Promise.resolve().then(a.bind(a,97028))},97028:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return L}});var s=a(57437),r=a(2265),n=a(27648),i=a(99376),l=a(18331),d=a(92651),o=a(46413),c=a(35153),u=a(18930),m=a(79205);let f=(0,m.Z)("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);var x=a(51817);let h=(0,m.Z)("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]),p=(0,m.Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var g=a(48736);let v=(0,m.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),y=(0,m.Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var j=a(76865),N=a(32660),b=a(29374),w=a(23759),k=a(31047),S=a(95337),Z=a(41671),C=a(66070),M=a(62869),D=a(76818),R=a(26815),z=a(95186),E=a(12339),T=a(26110),_=a(17293),I=a(1850);let V=(0,I.V1)(_.wk,"generatePrescriptionPdf");(0,I.V1)(_.wk,"generateDocumentPdf");let A=async e=>{try{let t=await V(e);if(!t.data.success)throw Error("O backend retornou uma falha ao gerar a receita.");return t.data}catch(e){throw console.error("Erro ao chamar generatePrescriptionPdf:",e),Error(e.message||"N\xe3o foi poss\xedvel gerar a receita.")}};var P=a(6596),O=a(35974);let H=e=>{let{patientId:t,currentConsultationId:a}=e,{toast:n}=(0,c.pm)(),[i,d]=(0,r.useState)([]),[o,u]=(0,r.useState)(!0),[m,f]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async()=>{if(t){u(!0),f(null);try{let e=await (0,l.Nb)(t);d(e.filter(e=>e.id!==a))}catch(e){f(e.message),n({title:"Erro ao buscar hist\xf3rico",description:e.message,variant:"destructive"})}finally{u(!1)}}})()},[t,a,n]),(0,s.jsxs)(T.cZ,{className:"max-w-3xl",children:[(0,s.jsxs)(T.fK,{children:[(0,s.jsx)(T.$N,{children:"Hist\xf3rico de Consultas do Paciente"}),(0,s.jsx)(T.Be,{children:"Visualize os atendimentos anteriores para uma melhor tomada de decis\xe3o cl\xednica."})]}),(0,s.jsxs)("div",{className:"max-h-[70vh] overflow-y-auto pr-4 py-4",children:[o&&(0,s.jsx)("div",{className:"flex justify-center items-center h-48",children:(0,s.jsx)(x.Z,{className:"h-8 w-8 animate-spin"})}),m&&(0,s.jsxs)("div",{className:"text-center text-red-600 p-8",children:[(0,s.jsx)(j.Z,{className:"mx-auto h-12 w-12 mb-4"}),(0,s.jsx)("p",{children:m})]}),!o&&!m&&0===i.length&&(0,s.jsx)("div",{className:"text-center text-muted-foreground p-12",children:(0,s.jsx)("p",{children:"Nenhuma consulta anterior encontrada para este paciente."})}),!o&&!m&&i.length>0&&(0,s.jsx)(P.UQ,{type:"single",collapsible:!0,className:"w-full",children:i.map(e=>{var t;return(0,s.jsxs)(P.Qd,{value:e.id,children:[(0,s.jsx)(P.o4,{children:(0,s.jsxs)("div",{className:"flex justify-between w-full pr-4 items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[(0,s.jsx)(k.Z,{className:"h-4 w-4"}),e.createdAt.toDate().toLocaleDateString("pt-BR")]}),(0,s.jsx)(O.C,{variant:"Telemedicina"===e.type?"default":"secondary",children:e.type})]})}),(0,s.jsxs)(P.vF,{className:"space-y-3 text-sm",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{className:"font-medium",children:"M\xe9dico:"})," ",e.doctorName]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{className:"font-medium",children:"Queixa Principal (Triagem):"})," ",(null===(t=e.triageData)||void 0===t?void 0:t.chiefComplaint)||"N\xe3o registada"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{className:"font-medium",children:"Hip\xf3tese Diagn\xf3stica:"}),(0,s.jsx)("p",{className:"pl-2 mt-1 border-l-2 ml-1 text-muted-foreground whitespace-pre-wrap",children:e.diagnosticHypothesis||"N\xe3o registada"})]})]})]},e.id)})})]})]})},F=e=>{let{data:t}=e;return(0,s.jsxs)("div",{className:"space-y-3 mt-4",children:[(0,s.jsxs)("div",{className:"p-3 bg-blue-50 rounded-md border border-blue-200",children:[(0,s.jsx)(R._,{className:"text-gray-500",children:"Queixa Principal"}),(0,s.jsx)("p",{className:"font-semibold whitespace-pre-wrap",children:(null==t?void 0:t.chiefComplaint)||"N\xe3o informada"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"p-2 bg-slate-50 rounded-md border",children:[(0,s.jsx)(R._,{className:"text-xs text-gray-500 block",children:"Press\xe3o Arterial"}),(0,s.jsx)("p",{className:"font-medium",children:(null==t?void 0:t.bloodPressure)||"-"})]}),(0,s.jsxs)("div",{className:"p-2 bg-slate-50 rounded-md border",children:[(0,s.jsx)(R._,{className:"text-xs text-gray-500 block",children:"Temperatura"}),(0,s.jsx)("p",{className:"font-medium",children:(null==t?void 0:t.temperature)?"".concat(t.temperature," \xb0C"):"-"})]}),(0,s.jsxs)("div",{className:"p-2 bg-slate-50 rounded-md border",children:[(0,s.jsx)(R._,{className:"text-xs text-gray-500 block",children:"Freq. Card\xedaca"}),(0,s.jsx)("p",{className:"font-medium",children:(null==t?void 0:t.heartRate)?"".concat(t.heartRate," bpm"):"-"})]}),(0,s.jsxs)("div",{className:"p-2 bg-slate-50 rounded-md border",children:[(0,s.jsx)(R._,{className:"text-xs text-gray-500 block",children:"Freq. Respirat\xf3ria"}),(0,s.jsx)("p",{className:"font-medium",children:(null==t?void 0:t.respiratoryRate)?"".concat(t.respiratoryRate," rpm"):"-"})]}),(0,s.jsxs)("div",{className:"p-2 bg-slate-50 rounded-md border",children:[(0,s.jsx)(R._,{className:"text-xs text-gray-500 block",children:"Satura\xe7\xe3o Oâ‚‚"}),(0,s.jsx)("p",{className:"font-medium",children:(null==t?void 0:t.oxygenSaturation)?"".concat(t.oxygenSaturation," %"):"-"})]})]}),(null==t?void 0:t.notes)&&(0,s.jsxs)("div",{className:"p-3 bg-yellow-50 rounded-md border border-yellow-200",children:[(0,s.jsx)(R._,{className:"text-gray-500",children:"Outras Anota\xe7\xf5es da Triagem"}),(0,s.jsx)("p",{className:"whitespace-pre-wrap",children:t.notes})]})]})},q=e=>{let{consultation:t,doctorProfile:a,onFinished:n}=e,{toast:i}=(0,c.pm)(),[l,d]=(0,r.useState)([{name:"",dosage:"",instructions:""}]),[o,m]=(0,r.useState)(!1),p=(e,t,a)=>{let s=[...l];s[e][t]=a,d(s)},g=e=>d(l.filter((t,a)=>a!==e)),v=async()=>{if(l.some(e=>!e.name||!e.dosage)){i({title:"Campos obrigat\xf3rios",description:"O nome e a dose de cada medicamento s\xe3o necess\xe1rios.",variant:"destructive"});return}m(!0);try{let e={consultationId:t.id,patientName:t.patientName,doctorName:a.displayName,doctorCrm:a.professionalCrm,medications:l};await A(e),i({title:"Receita Gerada!",description:"O PDF da receita foi criado. A lista de documentos ser\xe1 atualizada."}),n()}catch(e){i({title:"Erro ao Gerar Receita",description:e.message,variant:"destructive"})}finally{m(!1)}};return(0,s.jsxs)(T.cZ,{className:"max-w-2xl",children:[(0,s.jsxs)(T.fK,{children:[(0,s.jsx)(T.$N,{children:"Gerar Nova Receita M\xe9dica"}),(0,s.jsx)(T.Be,{children:"Adicione um ou mais medicamentos."})]}),(0,s.jsxs)("div",{className:"max-h-[60vh] overflow-y-auto space-y-4 p-1",children:[l.map((e,t)=>(0,s.jsxs)("div",{className:"space-y-2 p-3 border rounded-md relative bg-slate-50",children:[l.length>1&&(0,s.jsx)(M.z,{variant:"ghost",size:"icon",className:"absolute top-1 right-1 h-6 w-6",onClick:()=>g(t),children:(0,s.jsx)(u.Z,{className:"h-4 w-4 text-red-500"})}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(R._,{children:"Medicamento"}),(0,s.jsx)(z.I,{value:e.name,onChange:e=>p(t,"name",e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(R._,{children:"Dose / Quantidade"}),(0,s.jsx)(z.I,{value:e.dosage,onChange:e=>p(t,"dosage",e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(R._,{children:"Instru\xe7\xf5es (Posologia)"}),(0,s.jsx)(D.g,{value:e.instructions,onChange:e=>p(t,"instructions",e.target.value)})]})]},t)),(0,s.jsxs)(M.z,{variant:"outline",size:"sm",onClick:()=>d([...l,{name:"",dosage:"",instructions:""}]),children:[(0,s.jsx)(f,{className:"mr-2 h-4 w-4"}),"Adicionar medicamento"]})]}),(0,s.jsx)(T.cN,{children:(0,s.jsxs)(M.z,{onClick:v,disabled:o,children:[o?(0,s.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(h,{className:"mr-2 h-4 w-4"}),"Gerar e Salvar Receita"]})})]})},U=e=>{let{consultation:t,userProfile:a,refreshData:i}=e,{toast:d}=(0,c.pm)(),[o,u]=(0,r.useState)((null==t?void 0:t.clinicalEvolution)||""),[m,j]=(0,r.useState)((null==t?void 0:t.diagnosticHypothesis)||""),[N,b]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1),[S,Z]=(0,r.useState)(!1),z=async()=>{b(!0);try{await (0,l.KO)(t.id,{clinicalEvolution:o,diagnosticHypothesis:m}),d({title:"Sucesso!",description:"Prontu\xe1rio salvo."})}catch(e){d({title:"Erro ao Salvar",description:e.message,variant:"destructive"})}finally{b(!1)}};return(0,s.jsxs)(C.Zb,{className:"h-full flex flex-col",children:[(0,s.jsx)(C.Ol,{children:(0,s.jsx)(C.ll,{className:"text-lg",children:"Prontu\xe1rio Eletr\xf4nico"})}),(0,s.jsxs)(C.aY,{className:"flex-grow flex flex-col gap-4 overflow-y-auto",children:[(0,s.jsxs)(E.mQ,{defaultValue:"medical-record",className:"flex-grow flex flex-col",children:[(0,s.jsxs)(E.dr,{className:"grid w-full grid-cols-4",children:[(0,s.jsx)(E.SP,{value:"medical-record",children:"Atendimento"}),(0,s.jsx)(E.SP,{value:"triage",children:"Triagem"}),(0,s.jsx)(E.SP,{value:"patient-data",children:"Paciente"}),(0,s.jsx)(E.SP,{value:"documents",children:"Documentos"})]}),(0,s.jsx)(E.nU,{value:"triage",className:"flex-grow",children:(0,s.jsx)(F,{data:t.triageData})}),(0,s.jsxs)(E.nU,{value:"patient-data",className:"text-sm space-y-4 mt-4 flex-grow",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(R._,{className:"text-gray-500",children:"Nome"}),(0,s.jsx)("p",{children:t.patientName})]}),(0,s.jsxs)(T.Vq,{open:S,onOpenChange:Z,children:[(0,s.jsx)(T.hg,{asChild:!0,children:(0,s.jsxs)(M.z,{variant:"secondary",children:[(0,s.jsx)(p,{className:"mr-2 h-4 w-4"}),"Ver Hist\xf3rico de Consultas"]})}),(0,s.jsx)(H,{patientId:t.patientId,currentConsultationId:t.id})]})]}),(0,s.jsxs)(E.nU,{value:"medical-record",className:"flex-grow flex flex-col gap-4 mt-4",children:[(0,s.jsxs)("div",{className:"space-y-1.5 flex flex-col flex-grow",children:[(0,s.jsx)(R._,{htmlFor:"evolution",children:"Evolu\xe7\xe3o Cl\xednica"}),(0,s.jsx)(D.g,{id:"evolution",value:o,onChange:e=>u(e.target.value),className:"min-h-[150px] flex-grow"})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(R._,{htmlFor:"hypothesis",children:"Hip\xf3tese Diagn\xf3stica"}),(0,s.jsx)(D.g,{id:"hypothesis",value:m,onChange:e=>j(e.target.value)})]})]}),(0,s.jsxs)(E.nU,{value:"documents",className:"mt-4 space-y-4",children:[(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)(T.Vq,{open:w,onOpenChange:k,children:[(0,s.jsx)(T.hg,{asChild:!0,children:(0,s.jsxs)(M.z,{variant:"outline",children:[(0,s.jsx)(f,{className:"mr-2 h-4 w-4"}),"Gerar Receita"]})}),a&&(0,s.jsx)(q,{consultation:t,doctorProfile:a,onFinished:()=>{k(!1),i()}})]})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold",children:"Documentos Gerados"}),t.generatedDocuments&&t.generatedDocuments.length>0?t.generatedDocuments.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-slate-50 border rounded-md",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["prescription"===e.type?(0,s.jsx)(h,{className:"h-4 w-4 text-blue-500"}):(0,s.jsx)(g.Z,{className:"h-4 w-4 text-green-500"}),(0,s.jsx)("span",{className:"font-medium text-sm",children:e.name}),(0,s.jsxs)("span",{className:"text-xs text-gray-400",children:["(",e.createdAt.toDate().toLocaleDateString("pt-BR"),")"]})]}),(0,s.jsx)(M.z,{asChild:!0,variant:"ghost",size:"icon",className:"h-7 w-7",children:(0,s.jsx)(n.default,{href:e.url,target:"_blank",rel:"noopener noreferrer",children:(0,s.jsx)(v,{className:"h-4 w-4"})})})]},t)):(0,s.jsx)("p",{className:"text-xs text-center text-gray-400 py-4",children:"Nenhum documento gerado para esta consulta."})]})]})]}),(0,s.jsx)("div",{className:"mt-auto pt-4",children:(0,s.jsxs)(M.z,{onClick:z,disabled:N,className:"w-full",children:[N?(0,s.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(y,{className:"mr-2 h-4 w-4"}),"Salvar Anota\xe7\xf5es"]})})]})]})};function L(){let e=(0,i.useParams)(),t=(0,i.useRouter)(),{user:a}=(0,o.a)(),{toast:u}=(0,c.pm)(),m=e.consultaId,[f,h]=(0,r.useState)(null),[p,g]=(0,r.useState)(null),[v,y]=(0,r.useState)(!0),[D,R]=(0,r.useState)(!1),[z,E]=(0,r.useState)(null),T=async()=>{if(m&&a){y(!0);try{let[e,t]=await Promise.all([(0,l.xr)(m),(0,d.Ts)()]);if(!e||e.doctorId!==a.uid)throw Error("Consulta n\xe3o encontrada ou acesso n\xe3o permitido.");h(e),g(t)}catch(e){E(e.message),h(null)}finally{y(!1)}}};(0,r.useEffect)(()=>{T()},[m,a]);let _=async()=>{if(f){R(!0);try{await (0,l.yd)(f),u({title:"Atendimento Finalizado!",description:"O paciente foi removido da sua fila de espera."}),t.push("/dashboard")}catch(e){u({title:"Erro ao Finalizar",description:e.message,variant:"destructive"}),R(!1)}}};return v?(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsx)(x.Z,{className:"h-8 w-8 animate-spin"})}):z?(0,s.jsxs)("div",{className:"text-center text-red-600 p-8",children:[(0,s.jsx)(j.Z,{className:"mx-auto h-12 w-12 mb-4"}),(0,s.jsx)("p",{children:z})]}):f?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(n.default,{href:"/dashboard",className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[(0,s.jsx)(N.Z,{className:"mr-2 h-4 w-4"}),"Voltar para o Dashboard"]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 h-[calc(100vh-120px)]",children:[(0,s.jsx)("div",{className:"md:col-span-2 h-full",children:(0,s.jsx)(U,{consultation:f,userProfile:p,refreshData:T})}),(0,s.jsxs)("div",{className:"h-full flex flex-col gap-6",children:["Telemedicina"===f.type&&(0,s.jsxs)(C.Zb,{className:"border-blue-500 border-2",children:[(0,s.jsx)(C.Ol,{children:(0,s.jsxs)(C.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(b.Z,{}),"Sala de Telemedicina"]})}),(0,s.jsx)(C.aY,{children:f.telemedicineLink?(0,s.jsx)(M.z,{asChild:!0,className:"w-full bg-blue-600 hover:bg-blue-700",children:(0,s.jsx)(n.default,{href:f.telemedicineLink,target:"_blank",rel:"noopener noreferrer",children:"Entrar na Chamada de V\xeddeo"})}):(0,s.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"A sala de v\xeddeo est\xe1 a ser criada..."})})]}),(0,s.jsxs)(C.Zb,{className:"h-full flex flex-col",children:[(0,s.jsx)(C.Ol,{children:(0,s.jsx)(C.ll,{children:"Detalhes do Atendimento"})}),(0,s.jsxs)(C.aY,{className:"space-y-4 text-sm flex-grow",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(w.Z,{className:"h-5 w-5 text-gray-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold",children:"Local"}),(0,s.jsx)("p",{children:f.hospitalName})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(k.Z,{className:"h-5 w-5 text-gray-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold",children:"Data"}),(0,s.jsx)("p",{children:f.createdAt.toDate().toLocaleDateString("pt-BR")})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(S.Z,{className:"h-5 w-5 text-gray-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold",children:"Tipo"}),(0,s.jsx)("p",{children:f.type})]})]})]}),(0,s.jsx)(C.eW,{className:"mt-auto border-t pt-4",children:(0,s.jsxs)(M.z,{onClick:_,disabled:D,className:"w-full bg-green-600 hover:bg-green-700",children:[D?(0,s.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(Z.Z,{className:"mr-2 h-4 w-4"}),"Finalizar Atendimento"]})})]})]})]})]}):(0,s.jsx)("div",{className:"p-4 text-center",children:"Dados da consulta n\xe3o encontrados."})}},6596:function(e,t,a){"use strict";a.d(t,{Qd:function(){return o},UQ:function(){return d},o4:function(){return c},vF:function(){return u}});var s=a(57437),r=a(2265),n=a(13134),i=a(40875),l=a(94508);let d=n.fC,o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.ck,{ref:t,className:(0,l.cn)("border-b",a),...r})});o.displayName="AccordionItem";let c=r.forwardRef((e,t)=>{let{className:a,children:r,...d}=e;return(0,s.jsx)(n.h4,{className:"flex",children:(0,s.jsxs)(n.xz,{ref:t,className:(0,l.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",a),...d,children:[r,(0,s.jsx)(i.Z,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});c.displayName=n.xz.displayName;let u=r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,s.jsx)(n.VY,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...i,children:(0,s.jsx)("div",{className:(0,l.cn)("pb-4 pt-0",a),children:r})})});u.displayName=n.VY.displayName},35974:function(e,t,a){"use strict";a.d(t,{C:function(){return l}});var s=a(57437);a(2265);var r=a(90535),n=a(94508);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:a}),t),...r})}},62869:function(e,t,a){"use strict";a.d(t,{d:function(){return d},z:function(){return o}});var s=a(57437),r=a(2265),n=a(37053),i=a(90535),l=a(94508);let d=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,asChild:o=!1,...c}=e,u=o?n.g7:"button";return(0,s.jsx)(u,{className:(0,l.cn)(d({variant:r,size:i,className:a})),ref:t,...c})});o.displayName="Button"},66070:function(e,t,a){"use strict";a.d(t,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return i},aY:function(){return c},eW:function(){return u},ll:function(){return d}});var s=a(57437),r=a(2265),n=a(94508);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});i.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});l.displayName="CardHeader";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});d.displayName="CardTitle";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});o.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})});u.displayName="CardFooter"},26110:function(e,t,a){"use strict";a.d(t,{$N:function(){return p},Be:function(){return g},GG:function(){return u},Vq:function(){return d},cN:function(){return h},cZ:function(){return f},fK:function(){return x},hg:function(){return o}});var s=a(57437),r=a(2265),n=a(49027),i=a(32489),l=a(94508);let d=n.fC,o=n.xz,c=n.h_,u=n.x8,m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});m.displayName=n.aV.displayName;let f=r.forwardRef((e,t)=>{let{className:a,children:r,...d}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(m,{}),(0,s.jsxs)(n.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[r,(0,s.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=n.VY.displayName;let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};x.displayName="DialogHeader";let h=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};h.displayName="DialogFooter";let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});p.displayName=n.Dx.displayName;let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});g.displayName=n.dk.displayName},95186:function(e,t,a){"use strict";a.d(t,{I:function(){return i}});var s=a(57437),r=a(2265),n=a(94508);let i=r.forwardRef((e,t)=>{let{className:a,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...i})});i.displayName="Input"},26815:function(e,t,a){"use strict";a.d(t,{_:function(){return o}});var s=a(57437),r=a(2265),n=a(6394),i=a(90535),l=a(94508);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.f,{ref:t,className:(0,l.cn)(d(),a),...r})});o.displayName=n.f.displayName},12339:function(e,t,a){"use strict";a.d(t,{SP:function(){return o},dr:function(){return d},mQ:function(){return l},nU:function(){return c}});var s=a(57437),r=a(2265),n=a(20271),i=a(94508);let l=n.fC,d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.aV,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});d.displayName=n.aV.displayName;let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});o.displayName=n.xz.displayName;let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});c.displayName=n.VY.displayName},76818:function(e,t,a){"use strict";a.d(t,{g:function(){return i}});var s=a(57437),r=a(2265),n=a(94508);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});i.displayName="Textarea"},35153:function(e,t,a){"use strict";a.d(t,{pm:function(){return m}});var s=a(2265);let r=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],o={toasts:[]};function c(e){o=l(o,e),d.forEach(e=>{e(o)})}function u(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=s.useState(o);return s.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},18331:function(e,t,a){"use strict";a.d(t,{KO:function(){return c},Nb:function(){return o},hC:function(){return i},xr:function(){return d},yd:function(){return l}});var s=a(5978),r=a(17293);let n=(0,a(1850).V1)(r.wk,"createConsultationRoom"),i=async(e,t,a)=>{let i=(0,s.qs)(r.db),l=(0,s.JU)((0,s.hJ)(r.db,"consultations")),d={patientId:e.patientId,patientName:e.patientName,queueId:e.id,doctorId:t.uid,doctorName:t.displayName,hospitalId:e.unitId,hospitalName:e.hospitalName,status:"IN_PROGRESS",type:e.type,createdAt:(0,s.Bt)(),triageData:e.triageData||{},generatedDocuments:[]};if("Telemedicina"===e.type)try{let e=await n({consultationId:l.id});e.data.success&&(d.telemedicineLink=e.data.roomUrl)}catch(e){console.error("Falha ao criar a sala de telemedicina:",e)}i.set(l,d);let o=(0,s.JU)(r.db,"serviceQueue",e.id);return i.update(o,{status:"Em Atendimento",doctorId:t.uid}),await i.commit(),l.id},l=async e=>{let t=(0,s.qs)(r.db),a=(0,s.JU)(r.db,"consultations",e.id);if(t.update(a,{status:"COMPLETED"}),e.queueId){let a=(0,s.JU)(r.db,"serviceQueue",e.queueId);t.update(a,{status:"Finalizado"})}await t.commit()},d=async e=>{if(!e)return null;let t=(0,s.JU)(r.db,"consultations",e);try{let e=await (0,s.QT)(t);return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("Falha ao carregar dados da consulta:",e),Error("Falha ao carregar os dados da consulta.")}},o=async e=>{let t=(0,s.hJ)(r.db,"consultations"),a=(0,s.IO)(t,(0,s.ar)("patientId","==",e),(0,s.Xo)("createdAt","desc"));return(await (0,s.PL)(a)).docs.map(e=>({id:e.id,...e.data()}))},c=async(e,t)=>{if(!e)throw Error("ID da consulta \xe9 obrigat\xf3rio.");let a=(0,s.JU)(r.db,"consultations",e);try{await (0,s.r7)(a,{clinicalEvolution:t.clinicalEvolution,diagnosticHypothesis:t.diagnosticHypothesis})}catch(e){throw console.error("Erro ao salvar dados do prontu\xe1rio:",e),Error("N\xe3o foi poss\xedvel salvar os dados do prontu\xe1rio.")}}},32660:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},31047:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},41671:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},48736:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},23759:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("Hospital",[["path",{d:"M12 6v4",key:"16clxf"}],["path",{d:"M14 14h-4",key:"esezmu"}],["path",{d:"M14 18h-4",key:"16mqa2"}],["path",{d:"M14 8h-4",key:"z8ypaz"}],["path",{d:"M18 12h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2",key:"b1k337"}],["path",{d:"M18 22V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v18",key:"16g51d"}]])},95337:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]])},18930:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},29374:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])},32489:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6394:function(e,t,a){"use strict";a.d(t,{f:function(){return l}});var s=a(2265),r=a(66840),n=a(57437),i=s.forwardRef((e,t)=>(0,n.jsx)(r.WV.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null===(a=e.onMouseDown)||void 0===a||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var l=i}},function(e){e.O(0,[3609,9015,6137,9388,7648,5844,266,9027,4517,4701,3073,2971,2117,1744],function(){return e(e.s=12017)}),_N_E=e.O()}]);