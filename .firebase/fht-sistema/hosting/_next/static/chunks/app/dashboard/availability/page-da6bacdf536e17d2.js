(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[231],{3883:function(e,s,a){Promise.resolve().then(a.bind(a,28513))},28513:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return V}});var t=a(57437),r=a(2265),i=a(62869),l=a(66070),n=a(1098),d=a(53647),o=a(26815),c=a(95186),m=a(76818),u=a(35153),x=a(35974),h=a(57054),p=a(23518),f=a(26110),g=a(51888),v=a(94508),j=a(5978),b=a(17293),N=a(49505),y=a(51817),w=a(43044),C=a(49322),S=a(69076),A=a(88501),D=a(83774),E=a(5005),T=a(95252),z=a(33245),k=a(53121),R=a(18930),O=a(32489),_=a(91723),Z=a(99397);let I=r.memo(e=>{let{message:s="Carregando..."}=e;return(0,t.jsxs)("div",{className:"flex flex-col justify-center items-center text-center py-10 min-h-[150px] w-full",children:[" ",(0,t.jsx)(y.Z,{className:"h-8 w-8 animate-spin text-blue-600"})," ",(0,t.jsx)("span",{className:"ml-3 text-sm text-gray-600 mt-3",children:s})," "]})});I.displayName="LoadingState";let $=r.memo(e=>{let{message:s,actionButton:a}=e;return(0,t.jsxs)("div",{className:"text-center text-sm text-gray-500 py-10 min-h-[150px] flex flex-col items-center justify-center bg-gray-50/70 rounded-md border border-dashed border-gray-300 w-full",children:[" ",(0,t.jsx)(w.Z,{className:"w-12 h-12 text-gray-400 mb-4"})," ",(0,t.jsx)("p",{className:"font-medium text-gray-600 mb-1",children:"Nada por aqui ainda!"})," ",(0,t.jsx)("p",{className:"max-w-xs",children:s})," ",a&&(0,t.jsx)("div",{className:"mt-4",children:a})," "]})});$.displayName="EmptyState";let B=r.memo(e=>{let{message:s,onRetry:a}=e;return(0,t.jsxs)("div",{className:"text-center text-sm text-red-600 py-10 min-h-[150px] flex flex-col items-center justify-center bg-red-50/70 rounded-md border border-dashed border-red-300 w-full",children:[" ",(0,t.jsx)(C.Z,{className:"w-12 h-12 text-red-400 mb-4"})," ",(0,t.jsx)("p",{className:"font-semibold text-red-700 mb-1 text-base",children:"Oops! Algo deu errado."})," ",(0,t.jsx)("p",{className:"max-w-md text-red-600",children:s||"N\xe3o foi poss\xedvel carregar os dados. Por favor, tente novamente."})," ",a&&(0,t.jsxs)(i.z,{variant:"destructive",size:"sm",onClick:a,className:"mt-4 bg-red-600 hover:bg-red-700 text-white",children:[" ",(0,t.jsx)(S.Z,{className:"mr-2 h-4 w-4"})," Tentar Novamente "]})," "]})});B.displayName="ErrorState";let L=Array.from({length:48},(e,s)=>"".concat(Math.floor(s/2).toString().padStart(2,"0"),":").concat(s%2==0?"00":"30")),P=["AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"],F={SP:["S\xe3o Paulo","Campinas","Guarulhos","Osasco","Santo Andr\xe9","S\xe3o Bernardo do Campo","Santos","Ribeir\xe3o Preto","Sorocaba","Jundia\xed","Piracicaba","Bauru","Franca","Taubat\xe9","Limeira","Barueri","Cotia","Itapevi","Ara\xe7ariguama"],RJ:["Rio de Janeiro","S\xe3o Gon\xe7alo","Duque de Caxias","Nova Igua\xe7u","Niter\xf3i","Belford Roxo","Campos dos Goytacazes","S\xe3o Jo\xe3o de Meriti","Petr\xf3polis","Volta Redonda"],MG:["Belo Horizonte","Uberl\xe2ndia","Contagem","Juiz de Fora","Betim","Montes Claros","Ribeir\xe3o das Neves","Uberaba","Governador Valadares","Ipatinga"]},M=Object.entries(N.ku).map(e=>{let[s,a]=e,t=s.split("_").map(e=>e[0].toUpperCase()+e.slice(1)).join(" ");return{value:"telemedicina"===t.toLowerCase()?"Telemedicina":s,label:t,rateExample:a}}),G=e=>{var s;let{slot:a,onEdit:r,onDelete:l}=e,n=a.date instanceof j.EK?a.date.toDate():null,d=M.find(e=>e.value===a.serviceType),o=(null==d?void 0:d.label)||a.serviceType,c="AVAILABLE"===a.status;return(0,t.jsxs)("div",{className:(0,v.cn)("flex flex-col sm:flex-row items-start sm:justify-between border rounded-lg p-4 gap-x-4 gap-y-3 bg-white shadow-xs hover:shadow-sm",!c&&"opacity-70 bg-gray-50"),children:[(0,t.jsxs)("div",{className:"flex-1 space-y-1.5 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-800",children:[(0,t.jsx)(A.Z,{className:"h-4 w-4 shrink-0 text-blue-600"}),(0,t.jsx)("span",{suppressHydrationWarning:!0,children:n?n.toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"}):"Data Inv\xe1lida"}),(0,t.jsxs)("span",{className:"text-gray-500 font-normal",children:["(",a.startTime," - ",a.endTime,")"]})]}),(0,t.jsx)(x.C,{variant:(e=>{switch(e){case"AVAILABLE":case"BOOKED":case"COMPLETED":return"default";default:return"outline"}})(a.status),className:(0,v.cn)((e=>{switch(e){case"AVAILABLE":return"bg-blue-100 text-blue-800";case"BOOKED":return"bg-green-100 text-green-800";case"COMPLETED":return"bg-emerald-100 text-emerald-800";default:return"bg-gray-100 text-gray-800"}})(a.status),"capitalize"),children:null===(s=a.status)||void 0===s?void 0:s.replace(/_/g," ").toUpperCase()})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-1 text-xs text-gray-600 mt-1 pl-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 truncate",children:[(0,t.jsx)(D.Z,{className:"h-3.5 w-3.5 shrink-0 text-purple-500"}),(0,t.jsxs)("span",{children:[Array.isArray(a.cities)&&a.cities.length>0?a.cities.join(", "):"Cidades n\xe3o informadas",", ",a.state]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 truncate",children:[(0,t.jsx)(E.Z,{className:"h-3.5 w-3.5 shrink-0 text-cyan-500"}),(0,t.jsx)("span",{children:o})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-green-600 font-medium sm:col-span-2",children:[(0,t.jsx)(T.Z,{className:"h-3.5 w-3.5 shrink-0"}),(0,t.jsxs)("span",{children:[(0,v.xG)(a.desiredHourlyRate),"/hora (pretendido)"]})]})]}),a.specialties&&a.specialties.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-1.5 pt-1.5 pl-1",children:[" ",(0,t.jsx)("span",{className:"text-xs text-gray-500 mr-1 font-medium shrink-0",children:"Especialidades:"})," ",a.specialties.map(e=>(0,t.jsx)(x.C,{variant:"outline",className:"text-gray-700 text-[11px] px-1.5 py-0.5 font-normal border-blue-200 bg-blue-50",children:e},e))," "]}),a.notes&&(0,t.jsxs)("p",{className:"text-xs text-gray-500 pt-1.5 pl-1 italic flex items-start gap-1.5",children:[" ",(0,t.jsx)(z.Z,{className:"inline h-3.5 w-3.5 mr-0.5 shrink-0 relative top-0.5"})," ",(0,t.jsx)("span",{className:"truncate",children:a.notes})," "]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1 shrink-0 mt-2 sm:mt-0 self-end sm:self-center",children:[(0,t.jsx)(i.z,{variant:"ghost",size:"icon",onClick:r,disabled:!c,className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-full w-8 h-8","aria-label":"Editar Disponibilidade",title:c?"Editar Disponibilidade":"N\xe3o \xe9 poss\xedvel editar uma disponibilidade reservada ou finalizada.",children:(0,t.jsx)(k.Z,{className:"h-4 w-4"})}),(0,t.jsx)(i.z,{variant:"ghost",size:"icon",onClick:l,disabled:!c,className:"text-red-600 hover:text-red-700 hover:bg-red-50 rounded-full w-8 h-8","aria-label":"Cancelar Disponibilidade",title:c?"Apagar Disponibilidade":"N\xe3o \xe9 poss\xedvel apagar uma disponibilidade reservada ou finalizada.",children:(0,t.jsx)(R.Z,{className:"h-4 w-4"})})]})]})};G.displayName="TimeSlotListItem";let H=e=>{var s;let{onFormSubmitted:a,initialData:l}=e,{toast:C}=(0,u.pm)(),S=!!l&&!!l.id,[k,R]=(0,r.useState)(()=>S&&(null==l?void 0:l.date)?[l.date.toDate()]:[]),[Z,I]=(0,r.useState)((null==l?void 0:l.startTime)||"07:00"),[$,B]=(0,r.useState)((null==l?void 0:l.endTime)||"19:00"),[G,H]=(0,r.useState)(String((null==l?void 0:l.desiredHourlyRate)||"")),[V,q]=(0,r.useState)((null==l?void 0:l.specialties)||[]),[U,J]=(0,r.useState)((null==l?void 0:l.state)||""),[K,Y]=(0,r.useState)((null==l?void 0:l.cities)||[]),[X,Q]=(0,r.useState)((null==l?void 0:l.serviceType)||""),[W,ee]=(0,r.useState)((null==l?void 0:l.notes)||""),[es,ea]=(0,r.useState)(!1),[et,er]=(0,r.useState)(!1),[ei,el]=(0,r.useState)(""),[en,ed]=(0,r.useState)(null),[eo,ec]=(0,r.useState)([]);(0,r.useEffect)(()=>{(null==l?void 0:l.state)&&ec(F[l.state]||[])},[null==l?void 0:l.state]);let em=(0,r.useCallback)(()=>{R([]),I("07:00"),B("19:00"),H(""),q([]),J(""),Y([]),Q(""),ee(""),ed(null)},[]),eu=(0,r.useCallback)((e,s)=>{e&&s&&e===s?ed("Hor\xe1rio de in\xedcio n\xe3o pode ser igual ao de t\xe9rmino."):ed(null)},[]);(0,r.useEffect)(()=>{eu(Z,$)},[Z,$,eu]),(0,r.useEffect)(()=>{U?(ec(F[U]||[]),l&&U===l.state||Y([])):(ec([]),Y([]))},[U,l]);let ex=e=>{V.includes(e)||q(s=>[...s,e]),el(""),er(!1)},eh=e=>{q(s=>s.filter(s=>s!==e))},ep=(0,r.useMemo)(()=>N.Gg.filter(e=>"string"==typeof e&&e.toLowerCase().includes(ei.toLowerCase())&&!V.includes(e)),[ei,V]),ef=(e,s)=>{I(e),B(s)},eg=async()=>{let e=parseFloat(G.replace(",","."));if(0===k.length&&!S){C({title:"Data \xe9 obrigat\xf3ria",variant:"destructive"});return}if(en){C({title:"Hor\xe1rio Inv\xe1lido",variant:"destructive"});return}if(!X){C({title:"Tipo de Atendimento Obrigat\xf3rio",variant:"destructive"});return}if(isNaN(e)||e<=0){C({title:"Valor Hora Inv\xe1lido",variant:"destructive"});return}if(!U||0===K.length){C({title:"Localiza\xe7\xe3o Obrigat\xf3ria",description:"Selecione o estado e pelo menos uma cidade.",variant:"destructive"});return}if(0===V.length){C({title:"Especialidade Obrigat\xf3ria",description:"Selecione ao menos uma especialidade.",variant:"destructive"});return}if(ea(!0),!b.I8.currentUser){C({title:"Usu\xe1rio n\xe3o autenticado",variant:"destructive"}),ea(!1);return}let s=Z>$,t=W.trim();try{if(S&&(null==l?void 0:l.id)){let a={startTime:Z,endTime:$,isOvernight:s,state:U,cities:K,serviceType:X,specialties:V,desiredHourlyRate:e,...t&&{notes:t}};await (0,N._)(l.id,a),C({title:"Disponibilidade Atualizada",variant:"default"})}else{let a=k.map(a=>{let r={date:j.EK.fromDate(a),startTime:Z,endTime:$,isOvernight:s,state:U,cities:K,serviceType:X,specialties:V,desiredHourlyRate:e,...t&&{notes:t}};return(0,N.yT)(r)});await Promise.all(a),C({title:"Disponibilidade(s) Adicionada(s)!",description:"".concat(k.length," hor\xe1rio(s) foram salvos."),variant:"default"}),S||em()}a()}catch(e){C({title:"Erro ao ".concat(S?"Atualizar":"Salvar"),description:e.message,variant:"destructive"})}finally{ea(!1)}};return(0,t.jsxs)(f.cZ,{className:"sm:max-w-2xl md:max-w-3xl",children:[(0,t.jsxs)(f.fK,{children:[(0,t.jsx)(f.$N,{className:"text-xl",children:S?"Editar Disponibilidade":"Adicionar Nova Disponibilidade"}),(0,t.jsx)(f.Be,{children:S?"Altere os detalhes da sua disponibilidade. A data original n\xe3o pode ser alterada.":"Selecione as datas e preencha os detalhes. Uma entrada de disponibilidade ser\xe1 criada para cada data selecionada."})]}),(0,t.jsx)(f.GG,{asChild:!0,children:(0,t.jsxs)(i.z,{variant:"ghost",size:"icon",className:"absolute top-4 right-4",children:[(0,t.jsx)(O.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Fechar"})]})}),(0,t.jsxs)("div",{className:"grid gap-5 py-4 max-h-[70vh] overflow-y-auto px-1 pr-3 md:pr-4 pb-12",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(o._,{className:"font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(A.Z,{className:"h-4 w-4 mr-2 text-blue-600"}),"Data(s) da Disponibilidade*"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:S?"Data original (n\xe3o pode ser alterada).":"Selecione um ou mais dias no calend\xe1rio."}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 items-start",children:[S?(0,t.jsx)(n.f,{mode:"single",selected:k[0],disabled:!0,footer:(0,t.jsxs)("p",{className:"text-xs text-gray-700 font-medium p-2 border-t",children:["Data: ",null===(s=k[0])||void 0===s?void 0:s.toLocaleDateString("pt-BR")]})}):(0,t.jsx)(n.f,{mode:"multiple",selected:k,onSelect:R,disabled:{before:new Date(new Date().setHours(0,0,0,0))},footer:k.length>0?(0,t.jsxs)("p",{className:"text-xs text-blue-700 font-medium p-2 border-t",children:[k.length," dia(s) selecionado(s)."]}):(0,t.jsx)("p",{className:"text-xs text-gray-500 p-2 border-t",children:"Nenhum dia selecionado."}),modifiers:{selected:k},modifiersStyles:{selected:{backgroundColor:"#2563eb",color:"white",borderRadius:"0.375rem"}}}),k.length>0&&!S&&(0,t.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>R([]),className:"text-xs self-start sm:self-end w-full sm:w-auto",children:[(0,t.jsx)(O.Z,{className:"h-3 w-3 mr-1"})," Limpar Datas"]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(o._,{className:"font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(_.Z,{className:"h-4 w-4 mr-2 text-blue-600"}),"Hor\xe1rio da Disponibilidade*"]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[(0,t.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>ef("07:00","19:00"),className:"text-xs",children:"Diurno (07-19h)"}),(0,t.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>ef("19:00","07:00"),className:"text-xs",children:"Noturno (19-07h)"}),(0,t.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>ef("08:00","12:00"),className:"text-xs",children:"Manh\xe3 (08-12h)"}),(0,t.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>ef("13:00","18:00"),className:"text-xs",children:"Tarde (13-18h)"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(o._,{htmlFor:"doc-start-time",children:"Hor\xe1rio de In\xedcio*"}),(0,t.jsxs)(d.Ph,{value:Z,onValueChange:I,children:[(0,t.jsx)(d.i4,{id:"doc-start-time",className:(0,v.cn)("h-9",en&&"border-red-500 ring-1 ring-red-500"),children:(0,t.jsx)(d.ki,{})}),(0,t.jsx)(d.Bw,{children:L.map(e=>(0,t.jsx)(d.Ql,{value:e,children:e},"dst"+e))})]})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(o._,{htmlFor:"doc-end-time",children:"Hor\xe1rio de T\xe9rmino*"}),(0,t.jsxs)(d.Ph,{value:$,onValueChange:B,children:[(0,t.jsx)(d.i4,{id:"doc-end-time",className:(0,v.cn)("h-9",en&&"border-red-500 ring-1 ring-red-500"),children:(0,t.jsx)(d.ki,{})}),(0,t.jsx)(d.Bw,{children:L.map(e=>(0,t.jsx)(d.Ql,{value:e,children:e},"det"+e))})]})]}),en&&(0,t.jsx)("p",{className:"text-red-600 text-xs col-span-1 sm:col-span-2",children:en})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsxs)(o._,{htmlFor:"doc-state",className:"font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(D.Z,{className:"h-4 w-4 mr-2 text-blue-600"}),"Estado de Atua\xe7\xe3o*"]}),(0,t.jsxs)(d.Ph,{value:U,onValueChange:J,children:[(0,t.jsx)(d.i4,{id:"doc-state",className:"h-9",children:(0,t.jsx)(d.ki,{placeholder:"Selecione o UF..."})}),(0,t.jsx)(d.Bw,{children:P.map(e=>(0,t.jsx)(d.Ql,{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(o._,{className:"font-semibold text-gray-800",children:"Cidades de Atua\xe7\xe3o*"}),(0,t.jsx)(g.R,{selectedState:U,availableCities:eo,selectedCities:K,onConfirm:Y})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsxs)(o._,{htmlFor:"doc-service-type",className:"font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(E.Z,{className:"h-4 w-4 mr-2 text-blue-600"}),"Tipo de Atendimento*"]}),(0,t.jsxs)(d.Ph,{value:X,onValueChange:Q,children:[(0,t.jsx)(d.i4,{id:"doc-service-type",className:"h-9",children:(0,t.jsx)(d.ki,{placeholder:"Selecione..."})}),(0,t.jsx)(d.Bw,{children:M.map(e=>(0,t.jsx)(d.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsxs)(o._,{htmlFor:"doc-desired-rate",className:"font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(T.Z,{className:"h-4 w-4 mr-2 text-green-600"}),"Valor Hora Pretendido (R$)*"]}),(0,t.jsx)(c.I,{id:"doc-desired-rate",type:"number",min:"0.01",step:"0.01",placeholder:"Ex: 100.00",value:G,onChange:e=>H(e.target.value),className:"h-9"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(o._,{className:"font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(w.Z,{className:"h-4 w-4 mr-2 text-blue-600"}),"Especialidades Atendidas* ",(0,t.jsx)("span",{className:"text-xs text-gray-500 ml-1 font-normal",children:"(Selecione ao menos uma)"})]}),(0,t.jsxs)(h.J2,{open:et,onOpenChange:er,children:[(0,t.jsx)(h.xo,{asChild:!0,children:(0,t.jsx)(i.z,{variant:"outline",className:"w-full justify-start font-normal text-muted-foreground h-9 border-dashed hover:border-solid",children:V.length>0?"Selecionadas: ".concat(V.length):"Clique para selecionar especialidades..."})}),(0,t.jsx)(h.yk,{className:"w-[--radix-popover-trigger-width] p-0",children:(0,t.jsxs)(p.mY,{filter:(e,s)=>{var a;return(null===(a=N.Gg.find(s=>s.toLowerCase()===e.toLowerCase()))||void 0===a?void 0:a.toLowerCase().includes(s.toLowerCase()))?1:0},children:[(0,t.jsx)(p.sZ,{placeholder:"Buscar especialidade...",value:ei,onValueChange:el}),(0,t.jsxs)(p.e8,{children:[(0,t.jsx)(p.rb,{children:"Nenhuma."}),(0,t.jsx)(p.fu,{heading:"".concat(ep.length," encontradas"),children:ep.map(e=>(0,t.jsx)(p.di,{value:e,onSelect:()=>ex(e),className:"cursor-pointer hover:bg-accent",children:e},e))})]})]})})]}),V.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-1.5 mt-2 pt-2 border-t border-dashed",children:[" ",V.map(e=>(0,t.jsxs)(x.C,{variant:"secondary",className:"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100 font-normal",children:[" ",e," ",(0,t.jsxs)("button",{type:"button",onClick:()=>eh(e),className:"ml-1.5 p-0.5 rounded-full outline-none focus:ring-1 focus:ring-blue-500 hover:bg-blue-200",children:[" ",(0,t.jsx)(O.Z,{className:"h-3 w-3 text-blue-600 hover:text-blue-800"})," "]})," "]},e))," "]})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsxs)(o._,{htmlFor:"doc-notes",className:"font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(z.Z,{className:"h-4 w-4 mr-2 text-blue-600"}),"Notas Adicionais ",(0,t.jsx)("span",{className:"text-xs text-gray-500 ml-1 font-normal",children:"(Opcional)"})]}),(0,t.jsx)(m.g,{id:"doc-notes",placeholder:"Ex: Prefer\xeancia por plant\xf5es mais tranquilos, etc.",value:W,onChange:e=>ee(e.target.value),className:"min-h-[80px]"})]})]}),(0,t.jsxs)(f.cN,{className:"pt-4 border-t bg-slate-50 -m-6 px-6 pb-8 sm:pb-4 rounded-b-lg",children:[(0,t.jsx)(f.GG,{asChild:!0,children:(0,t.jsx)(i.z,{type:"button",variant:"outline",disabled:es,children:"Cancelar"})}),(0,t.jsxs)(i.z,{type:"button",onClick:eg,disabled:es||0===k.length&&!S,className:"bg-blue-600 hover:bg-blue-700",children:[es&&(0,t.jsx)(y.Z,{className:"mr-2 h-4 w-4 animate-spin"}),es?S?"Salvando...":"Adicionando...":S?"Salvar Altera\xe7\xf5es":"Adicionar Disponibilidade (".concat(k.length||0," Dia(s))")]})]})]})};function V(){let{toast:e}=(0,u.pm)(),[s,a]=(0,r.useState)(!1),[n,d]=(0,r.useState)(null),[o,c]=(0,r.useState)([]),[m,x]=(0,r.useState)(!0),[h,p]=(0,r.useState)(null),g=(0,r.useCallback)(async()=>{x(!0),p(null);try{let e=await (0,N.aN)();c(e.sort((e,s)=>e.date.toDate().getTime()-s.date.toDate().getTime()||e.startTime.localeCompare(s.startTime)))}catch(s){var e;p((null===(e=s.message)||void 0===e?void 0:e.includes("query requires an index"))?"Falha ao buscar: \xcdndice do Firestore necess\xe1rio. ".concat(s.message):s.message||"N\xe3o foi poss\xedvel carregar suas disponibilidades.")}finally{x(!1)}},[]);(0,r.useEffect)(()=>{g()},[g]);let v=()=>{d(null),a(!0)},j=e=>{d(e),a(!0)},b=async s=>{if(s&&confirm("Tem certeza que deseja apagar esta disponibilidade? Esta a\xe7\xe3o n\xe3o pode ser desfeita."))try{await (0,N._e)(s),e({title:"Disponibilidade Removida",description:"O seu hor\xe1rio foi removido com sucesso.",variant:"default"}),g()}catch(s){e({title:"Erro ao Remover",description:s.message,variant:"destructive"})}};return(0,t.jsxs)("div",{className:"space-y-6 p-1",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Minha Disponibilidade"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm sm:text-base mt-1",children:"Cadastre os dias, hor\xe1rios, locais e valores que voc\xea est\xe1 dispon\xedvel para atender."})]}),(0,t.jsxs)(f.Vq,{open:s,onOpenChange:e=>{a(e),e||d(null)},children:[(0,t.jsx)(f.hg,{asChild:!0,children:(0,t.jsxs)(i.z,{size:"sm",className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700",onClick:v,children:[(0,t.jsx)(Z.Z,{className:"mr-1.5 h-4 w-4"})," Adicionar Disponibilidade"]})}),(0,t.jsx)(H,{onFormSubmitted:()=>{a(!1),d(null),g()},initialData:n},n?"edit-".concat(n.id):"new")]})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsxs)(l.Ol,{children:[(0,t.jsx)(l.ll,{children:"Disponibilidades Cadastradas"}),(0,t.jsx)(l.SZ,{children:"Seus hor\xe1rios dispon\xedveis para propostas de plant\xe3o."})]}),(0,t.jsx)(l.aY,{children:m?(0,t.jsx)(I,{}):h?(0,t.jsx)(B,{message:h,onRetry:g}):0===o.length?(0,t.jsx)($,{message:"Voc\xea ainda n\xe3o cadastrou nenhuma disponibilidade.",actionButton:(0,t.jsxs)(i.z,{size:"sm",onClick:v,className:"bg-blue-600 hover:bg-blue-700",children:[(0,t.jsx)(Z.Z,{className:"mr-1.5 h-4 w-4"}),"Cadastrar Primeira Disponibilidade"]})}):(0,t.jsxs)("div",{className:"space-y-3",children:[" ",o.map(e=>(0,t.jsx)(G,{slot:e,onEdit:()=>j(e),onDelete:()=>b(e.id)},e.id))," "]})})]})]})}H.displayName="TimeSlotFormDialog"},62869:function(e,s,a){"use strict";a.d(s,{d:function(){return d},z:function(){return o}});var t=a(57437),r=a(2265),i=a(37053),l=a(90535),n=a(94508);let d=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,s)=>{let{className:a,variant:r,size:l,asChild:o=!1,...c}=e,m=o?i.g7:"button";return(0,t.jsx)(m,{className:(0,n.cn)(d({variant:r,size:l,className:a})),ref:s,...c})});o.displayName="Button"},66070:function(e,s,a){"use strict";a.d(s,{Ol:function(){return n},SZ:function(){return o},Zb:function(){return l},aY:function(){return c},eW:function(){return m},ll:function(){return d}});var t=a(57437),r=a(2265),i=a(94508);let l=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});l.displayName="Card";let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...r})});n.displayName="CardHeader";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});d.displayName="CardTitle";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});o.displayName="CardDescription";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent";let m=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",a),...r})});m.displayName="CardFooter"},51888:function(e,s,a){"use strict";a.d(s,{R:function(){return D}});var t=a(57437),r=a(2265),i=a(62869),l=a(4216),n=a(94508);let d=e=>{let{shouldScaleBackground:s=!0,...a}=e;return(0,t.jsx)(l.dy.Root,{shouldScaleBackground:s,...a})};d.displayName="Drawer";let o=l.dy.Trigger,c=l.dy.Portal,m=l.dy.Close,u=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.dy.Overlay,{ref:s,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80",a),...r})});u.displayName=l.dy.Overlay.displayName;let x=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsxs)(c,{children:[(0,t.jsx)(u,{}),(0,t.jsxs)(l.dy.Content,{ref:s,className:(0,n.cn)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",a),...i,children:[(0,t.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),r]})]})});x.displayName="DrawerContent";let h=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,n.cn)("grid gap-1.5 p-4 text-center sm:text-left",s),...a})};h.displayName="DrawerHeader";let p=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,n.cn)("mt-auto flex flex-col gap-2 p-4",s),...a})};p.displayName="DrawerFooter";let f=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.dy.Title,{ref:s,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});f.displayName=l.dy.Title.displayName;let g=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.dy.Description,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});g.displayName=l.dy.Description.displayName;var v=a(57054),j=a(23518),b=a(43643);let N=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsxs)(b.fC,{ref:s,className:(0,n.cn)("relative overflow-hidden",a),...i,children:[(0,t.jsx)(b.l_,{className:"h-full w-full rounded-[inherit]",children:r}),(0,t.jsx)(y,{}),(0,t.jsx)(b.Ns,{})]})});N.displayName=b.fC.displayName;let y=r.forwardRef((e,s)=>{let{className:a,orientation:r="vertical",...i}=e;return(0,t.jsx)(b.gb,{ref:s,orientation:r,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...i,children:(0,t.jsx)(b.q4,{className:"relative flex-1 rounded-full bg-border"})})});y.displayName=b.gb.displayName;var w=a(30401),C=a(24156);let S=e=>{let[s,a]=r.useState(!1);return r.useEffect(()=>{let s=window.matchMedia(e);a(s.matches);let t=e=>a(e.matches);return s.addEventListener("change",t),()=>s.removeEventListener("change",t)},[e]),s},A=()=>S("(max-width: 768px)");function D(e){let{selectedState:s,availableCities:a,selectedCities:l,onConfirm:c,className:u}=e,[b,y]=r.useState(!1),[S,D]=r.useState(!1),E=A();r.useEffect(()=>{D(!0)},[]);let[T,z]=r.useState(l);r.useEffect(()=>{z(l)},[l]),r.useEffect(()=>{b&&z(l)},[b,l]),r.useEffect(()=>{z([]),c([])},[s,c]);let k=e=>{z(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},R=()=>{c(T),y(!1)},O=e=>{e||z(l),y(e)},_=!s||0===a.length,Z=l.length>0?"".concat(l.length," cidade(s) selecionada(s)"):_?"Selecione um estado":"Selecione as cidades...",I=()=>(0,t.jsxs)(j.mY,{children:[(0,t.jsx)(j.sZ,{placeholder:"Buscar cidade..."}),(0,t.jsxs)(j.e8,{children:[(0,t.jsx)(j.rb,{children:"Nenhuma cidade encontrada."}),(0,t.jsx)(j.fu,{children:(0,t.jsx)(N,{className:"h-[250px]",children:a.map(e=>(0,t.jsxs)(j.di,{value:e,onSelect:s=>{k(e)},className:"cursor-pointer",children:[(0,t.jsx)(w.Z,{className:(0,n.cn)("mr-2 h-4 w-4",T.includes(e)?"opacity-100":"opacity-0")}),(0,t.jsx)("span",{children:e})]},e))})})]})]});return S?E?(0,t.jsxs)(d,{open:b,onOpenChange:O,children:[(0,t.jsx)(o,{asChild:!0,children:(0,t.jsxs)(i.z,{variant:"outline",role:"combobox",disabled:_,"aria-expanded":b,className:(0,n.cn)("w-full justify-between font-normal h-9",u),children:[Z,(0,t.jsx)(C.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,t.jsxs)(x,{className:"flex flex-col max-h-[90vh]",children:[(0,t.jsxs)(h,{className:"flex-shrink-0 text-left",children:[(0,t.jsx)(f,{children:"Selecione as Cidades"}),(0,t.jsx)(g,{children:"Escolha uma ou mais cidades de atua\xe7\xe3o."})]}),(0,t.jsx)("div",{className:"flex-grow overflow-y-auto px-2",children:(0,t.jsx)(I,{})}),(0,t.jsxs)(p,{className:"pt-4 flex-shrink-0 border-t bg-gray-50",children:[(0,t.jsxs)(i.z,{onClick:R,className:"bg-blue-600 hover:bg-blue-700",children:["Confirmar (",T.length,")"]}),(0,t.jsx)(m,{asChild:!0,children:(0,t.jsx)(i.z,{variant:"outline",children:"Cancelar"})})]})]})]}):(0,t.jsxs)(v.J2,{open:b,onOpenChange:O,children:[(0,t.jsx)(v.xo,{asChild:!0,children:(0,t.jsxs)(i.z,{variant:"outline",role:"combobox",disabled:_,"aria-expanded":b,className:(0,n.cn)("w-full justify-between font-normal h-9",u),children:[Z,(0,t.jsx)(C.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,t.jsxs)(v.yk,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",children:[(0,t.jsx)(I,{}),(0,t.jsxs)("div",{className:"p-2 border-t flex items-center justify-end gap-2 bg-gray-50",children:[(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>z([]),children:"Limpar"}),(0,t.jsxs)(i.z,{size:"sm",onClick:R,className:"bg-blue-600 hover:bg-blue-700",children:["Confirmar (",T.length,")"]})]})]})]}):(0,t.jsx)(i.z,{variant:"outline",disabled:!0,className:(0,n.cn)("w-full justify-between font-normal h-9",u),children:"Carregando..."})}},35153:function(e,s,a){"use strict";a.d(s,{pm:function(){return u}});var t=a(2265);let r=0,i=new Map,l=e=>{if(i.has(e))return;let s=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,s)},n=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=s;return a?l(a):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},d=[],o={toasts:[]};function c(e){o=n(o,e),d.forEach(e=>{e(o)})}function m(e){let{...s}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),t=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...s,id:a,open:!0,onOpenChange:e=>{e||t()}}}),{id:a,dismiss:t,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,s]=t.useState(o);return t.useEffect(()=>(d.push(s),()=>{let e=d.indexOf(s);e>-1&&d.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},17293:function(e,s,a){"use strict";a.d(s,{I8:function(){return o},db:function(){return c},tO:function(){return m}});var t=a(738),r=a(43301),i=a(5978),l=a(60062),n=a(13491);let d=(0,t.C6)().length?(0,t.Mq)():(0,t.ZF)({apiKey:"AIzaSyAyoX1YqAdqHuIvSoj0Yw_FYnhCBv-KfEA",authDomain:"fht-sistema.firebaseapp.com",projectId:"fht-sistema",storageBucket:"fht-sistema.firebasestorage.app",messagingSenderId:"583837273524",appId:"1:583837273524:web:1583addfce581e61ac76e1",measurementId:"G-6FJ2H3G32N"}),o=(0,r.v0)(d),c=(0,i.ad)(d),m=(0,l.cF)(d);(0,n.$C)(d,"southamerica-east1")},94508:function(e,s,a){"use strict";a.d(s,{Hq:function(){return o},bx:function(){return d},cn:function(){return i},rl:function(){return n},xG:function(){return l}});var t=a(61994),r=a(53335);function i(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,r.m6)((0,t.W)(s))}let l=e=>null==e||isNaN(e)?"R$ -":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),n=e=>null==e||isNaN(e)?"- %":"".concat(e.toFixed(1),"%"),d=e=>null==e||isNaN(e)?"- h":"".concat(e.toFixed(1)," h"),o=(e,s)=>{if(!e)return e;let a=e.replace(/[^\dX]/gi,"");if("cpf"===s&&11===a.length)return a.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4");if("cnpj"===s&&14===a.length)return a.replace(/^(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})$/,"$1.$2.$3/$4-$5");if("phone"===s)return a.length>10?a.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):a.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3");if("cep"===s&&8===a.length)return a.replace(/(\d{5})(\d{3})/,"$1-$2");if("rg"===s){if(9===a.length)return a.replace(/(\d{2})(\d{3})(\d{3})([\dX])$/,"$1.$2.$3-$4");if(8===a.length)return a.replace(/(\d{1})(\d{3})(\d{3})([\dX])$/,"$1.$2.$3-$4")}return e}}},function(e){e.O(0,[4358,9990,6137,9084,1543,7877,8398,6879,5343,2496,9844,6157,2971,2117,1744],function(){return e(e.s=3883)}),_N_E=e.O()}]);