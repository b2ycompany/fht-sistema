(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1899],{12017:function(e,a,s){Promise.resolve().then(s.bind(s,28142))},28142:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return H}});var t=s(57437),r=s(2265),n=s(27648),i=s(99376),l=s(18331),o=s(92651),d=s(46413),c=s(35153),u=s(18930),m=s(88964),x=s(51817),f=s(54159),h=s(64972),p=s(65621),g=s(48736),j=s(92735),v=s(83229),N=s(76865),b=s(32660),y=s(29374),w=s(23759),S=s(31047),C=s(95337),k=s(41671),R=s(66070),D=s(62869),A=s(76818),E=s(26815),Z=s(95186),_=s(12339),T=s(26110),I=s(17293),O=s(1850);let z=(0,O.V1)(I.wk,"generatePrescriptionPdf");(0,O.V1)(I.wk,"generateDocumentPdf");let P=async e=>{try{let a=await z(e);if(!a.data.success)throw Error("O backend retornou uma falha ao gerar a receita.");return a.data}catch(e){throw console.error("Erro ao chamar generatePrescriptionPdf:",e),Error(e.message||"N\xe3o foi poss\xedvel gerar a receita.")}};var V=s(6596),F=s(35974);let U=e=>{let{patientId:a,currentConsultationId:s}=e,{toast:n}=(0,c.pm)(),[i,o]=(0,r.useState)([]),[d,u]=(0,r.useState)(!0),[m,f]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async()=>{if(a){u(!0),f(null);try{let e=await (0,l.Nb)(a);o(e.filter(e=>e.id!==s))}catch(e){f(e.message),n({title:"Erro ao buscar hist\xf3rico",description:e.message,variant:"destructive"})}finally{u(!1)}}})()},[a,s,n]),(0,t.jsxs)(T.cZ,{className:"max-w-3xl",children:[(0,t.jsxs)(T.fK,{children:[(0,t.jsx)(T.$N,{children:"Hist\xf3rico de Consultas do Paciente"}),(0,t.jsx)(T.Be,{children:"Visualize os atendimentos anteriores para uma melhor tomada de decis\xe3o cl\xednica."})]}),(0,t.jsxs)("div",{className:"max-h-[70vh] overflow-y-auto pr-4 py-4",children:[d&&(0,t.jsx)("div",{className:"flex justify-center items-center h-48",children:(0,t.jsx)(x.Z,{className:"h-8 w-8 animate-spin"})}),m&&(0,t.jsxs)("div",{className:"text-center text-red-600 p-8",children:[(0,t.jsx)(N.Z,{className:"mx-auto h-12 w-12 mb-4"}),(0,t.jsx)("p",{children:m})]}),!d&&!m&&0===i.length&&(0,t.jsx)("div",{className:"text-center text-muted-foreground p-12",children:(0,t.jsx)("p",{children:"Nenhuma consulta anterior encontrada para este paciente."})}),!d&&!m&&i.length>0&&(0,t.jsx)(V.UQ,{type:"single",collapsible:!0,className:"w-full",children:i.map(e=>{var a;return(0,t.jsxs)(V.Qd,{value:e.id,children:[(0,t.jsx)(V.o4,{children:(0,t.jsxs)("div",{className:"flex justify-between w-full pr-4 items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[(0,t.jsx)(S.Z,{className:"h-4 w-4"}),e.createdAt.toDate().toLocaleDateString("pt-BR")]}),(0,t.jsx)(F.C,{variant:"Telemedicina"===e.type?"default":"secondary",children:e.type})]})}),(0,t.jsxs)(V.vF,{className:"space-y-3 text-sm",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{className:"font-medium",children:"M\xe9dico:"})," ",e.doctorName]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{className:"font-medium",children:"Queixa Principal (Triagem):"})," ",(null===(a=e.triageData)||void 0===a?void 0:a.chiefComplaint)||"N\xe3o registada"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{className:"font-medium",children:"Hip\xf3tese Diagn\xf3stica:"}),(0,t.jsx)("p",{className:"pl-2 mt-1 border-l-2 ml-1 text-muted-foreground whitespace-pre-wrap",children:e.diagnosticHypothesis||"N\xe3o registada"})]})]})]},e.id)})})]})]})},M=e=>{let{data:a}=e;return(0,t.jsxs)("div",{className:"space-y-3 mt-4",children:[(0,t.jsxs)("div",{className:"p-3 bg-blue-50 rounded-md border border-blue-200",children:[(0,t.jsx)(E._,{className:"text-gray-500",children:"Queixa Principal"}),(0,t.jsx)("p",{className:"font-semibold whitespace-pre-wrap",children:(null==a?void 0:a.chiefComplaint)||"N\xe3o informada"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"p-2 bg-slate-50 rounded-md border",children:[(0,t.jsx)(E._,{className:"text-xs text-gray-500 block",children:"Press\xe3o Arterial"}),(0,t.jsx)("p",{className:"font-medium",children:(null==a?void 0:a.bloodPressure)||"-"})]}),(0,t.jsxs)("div",{className:"p-2 bg-slate-50 rounded-md border",children:[(0,t.jsx)(E._,{className:"text-xs text-gray-500 block",children:"Temperatura"}),(0,t.jsx)("p",{className:"font-medium",children:(null==a?void 0:a.temperature)?"".concat(a.temperature," \xb0C"):"-"})]}),(0,t.jsxs)("div",{className:"p-2 bg-slate-50 rounded-md border",children:[(0,t.jsx)(E._,{className:"text-xs text-gray-500 block",children:"Freq. Card\xedaca"}),(0,t.jsx)("p",{className:"font-medium",children:(null==a?void 0:a.heartRate)?"".concat(a.heartRate," bpm"):"-"})]}),(0,t.jsxs)("div",{className:"p-2 bg-slate-50 rounded-md border",children:[(0,t.jsx)(E._,{className:"text-xs text-gray-500 block",children:"Freq. Respirat\xf3ria"}),(0,t.jsx)("p",{className:"font-medium",children:(null==a?void 0:a.respiratoryRate)?"".concat(a.respiratoryRate," rpm"):"-"})]}),(0,t.jsxs)("div",{className:"p-2 bg-slate-50 rounded-md border",children:[(0,t.jsx)(E._,{className:"text-xs text-gray-500 block",children:"Satura\xe7\xe3o Oâ‚‚"}),(0,t.jsx)("p",{className:"font-medium",children:(null==a?void 0:a.oxygenSaturation)?"".concat(a.oxygenSaturation," %"):"-"})]})]}),(null==a?void 0:a.notes)&&(0,t.jsxs)("div",{className:"p-3 bg-yellow-50 rounded-md border border-yellow-200",children:[(0,t.jsx)(E._,{className:"text-gray-500",children:"Outras Anota\xe7\xf5es da Triagem"}),(0,t.jsx)("p",{className:"whitespace-pre-wrap",children:a.notes})]})]})},Q=e=>{let{consultation:a,doctorProfile:s,onFinished:n}=e,{toast:i}=(0,c.pm)(),[l,o]=(0,r.useState)([{name:"",dosage:"",instructions:""}]),[d,h]=(0,r.useState)(!1),p=(e,a,s)=>{let t=[...l];t[e][a]=s,o(t)},g=e=>o(l.filter((a,s)=>s!==e)),j=async()=>{if(l.some(e=>!e.name||!e.dosage)){i({title:"Campos obrigat\xf3rios",description:"O nome e a dose de cada medicamento s\xe3o necess\xe1rios.",variant:"destructive"});return}h(!0);try{let e={consultationId:a.id,patientName:a.patientName,doctorName:s.displayName,doctorCrm:s.professionalCrm,medications:l};await P(e),i({title:"Receita Gerada!",description:"O PDF da receita foi criado. A lista de documentos ser\xe1 atualizada."}),n()}catch(e){i({title:"Erro ao Gerar Receita",description:e.message,variant:"destructive"})}finally{h(!1)}};return(0,t.jsxs)(T.cZ,{className:"max-w-2xl",children:[(0,t.jsxs)(T.fK,{children:[(0,t.jsx)(T.$N,{children:"Gerar Nova Receita M\xe9dica"}),(0,t.jsx)(T.Be,{children:"Adicione um ou mais medicamentos."})]}),(0,t.jsxs)("div",{className:"max-h-[60vh] overflow-y-auto space-y-4 p-1",children:[l.map((e,a)=>(0,t.jsxs)("div",{className:"space-y-2 p-3 border rounded-md relative bg-slate-50",children:[l.length>1&&(0,t.jsx)(D.z,{variant:"ghost",size:"icon",className:"absolute top-1 right-1 h-6 w-6",onClick:()=>g(a),children:(0,t.jsx)(u.Z,{className:"h-4 w-4 text-red-500"})}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(E._,{children:"Medicamento"}),(0,t.jsx)(Z.I,{value:e.name,onChange:e=>p(a,"name",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(E._,{children:"Dose / Quantidade"}),(0,t.jsx)(Z.I,{value:e.dosage,onChange:e=>p(a,"dosage",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(E._,{children:"Instru\xe7\xf5es (Posologia)"}),(0,t.jsx)(A.g,{value:e.instructions,onChange:e=>p(a,"instructions",e.target.value)})]})]},a)),(0,t.jsxs)(D.z,{variant:"outline",size:"sm",onClick:()=>o([...l,{name:"",dosage:"",instructions:""}]),children:[(0,t.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"Adicionar medicamento"]})]}),(0,t.jsx)(T.cN,{children:(0,t.jsxs)(D.z,{onClick:j,disabled:d,children:[d?(0,t.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),"Gerar e Salvar Receita"]})})]})},Y=e=>{let{consultation:a,userProfile:s,refreshData:i}=e,{toast:o}=(0,c.pm)(),[d,u]=(0,r.useState)((null==a?void 0:a.clinicalEvolution)||""),[N,b]=(0,r.useState)((null==a?void 0:a.diagnosticHypothesis)||""),[y,w]=(0,r.useState)(!1),[S,C]=(0,r.useState)(!1),[k,Z]=(0,r.useState)(!1),I=null==a?void 0:a.aiAnalysisReport,O=async()=>{w(!0);try{await (0,l.KO)(a.id,{clinicalEvolution:d,diagnosticHypothesis:N}),o({title:"Sucesso!",description:"Prontu\xe1rio salvo."})}catch(e){o({title:"Erro ao Salvar",description:e.message,variant:"destructive"})}finally{w(!1)}};return(0,t.jsxs)(R.Zb,{className:"h-full flex flex-col",children:[(0,t.jsx)(R.Ol,{children:(0,t.jsx)(R.ll,{className:"text-lg",children:"Prontu\xe1rio Eletr\xf4nico"})}),(0,t.jsxs)(R.aY,{className:"flex-grow flex flex-col gap-4 overflow-y-auto",children:[(0,t.jsxs)(_.mQ,{defaultValue:"medical-record",className:"flex-grow flex flex-col",children:[(0,t.jsxs)(_.dr,{className:"grid w-full grid-cols-5",children:[(0,t.jsxs)(_.SP,{value:"ai-analysis",className:"text-blue-600",children:[(0,t.jsx)(h.Z,{className:"mr-1 h-4 w-4"})," IA"]}),(0,t.jsx)(_.SP,{value:"medical-record",children:"Atendimento"}),(0,t.jsx)(_.SP,{value:"triage",children:"Triagem"}),(0,t.jsx)(_.SP,{value:"patient-data",children:"Paciente"}),(0,t.jsx)(_.SP,{value:"documents",children:"Documentos"})]}),(0,t.jsx)(_.nU,{value:"ai-analysis",className:"flex-grow mt-4",children:(0,t.jsxs)(R.Zb,{className:"bg-blue-50 border-blue-200",children:[(0,t.jsxs)(R.Ol,{children:[(0,t.jsxs)(R.ll,{className:"text-lg flex items-center text-blue-800",children:[(0,t.jsx)(h.Z,{className:"mr-2 h-5 w-5"}),"Pr\xe9-An\xe1lise (IA)"]}),(0,t.jsx)(R.SZ,{children:"Relat\xf3rio preliminar gerado por IA com base na especialidade."})]}),(0,t.jsx)(R.aY,{children:I?(0,t.jsx)("p",{className:"whitespace-pre-wrap text-sm text-gray-800",children:I}):(0,t.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"Nenhum relat\xf3rio de IA foi gerado para esta consulta."})})]})}),(0,t.jsx)(_.nU,{value:"triage",className:"flex-grow",children:(0,t.jsx)(M,{data:a.triageData})}),(0,t.jsxs)(_.nU,{value:"patient-data",className:"text-sm space-y-4 mt-4 flex-grow",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(E._,{className:"text-gray-500",children:"Nome"}),(0,t.jsx)("p",{children:a.patientName})]}),(0,t.jsxs)(T.Vq,{open:k,onOpenChange:Z,children:[(0,t.jsx)(T.hg,{asChild:!0,children:(0,t.jsxs)(D.z,{variant:"secondary",children:[(0,t.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),"Ver Hist\xf3rico de Consultas"]})}),(0,t.jsx)(U,{patientId:a.patientId,currentConsultationId:a.id})]})]}),(0,t.jsxs)(_.nU,{value:"medical-record",className:"flex-grow flex flex-col gap-4 mt-4",children:[(0,t.jsxs)("div",{className:"space-y-1.5 flex flex-col flex-grow",children:[(0,t.jsx)(E._,{htmlFor:"evolution",children:"Evolu\xe7\xe3o Cl\xednica"}),(0,t.jsx)(A.g,{id:"evolution",value:d,onChange:e=>u(e.target.value),className:"min-h-[150px] flex-grow"})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(E._,{htmlFor:"hypothesis",children:"Hip\xf3tese Diagn\xf3stica"}),(0,t.jsx)(A.g,{id:"hypothesis",value:N,onChange:e=>b(e.target.value)})]})]}),(0,t.jsxs)(_.nU,{value:"documents",className:"mt-4 space-y-4",children:[(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)(T.Vq,{open:S,onOpenChange:C,children:[(0,t.jsx)(T.hg,{asChild:!0,children:(0,t.jsxs)(D.z,{variant:"outline",children:[(0,t.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"Gerar Receita"]})}),s&&(0,t.jsx)(Q,{consultation:a,doctorProfile:s,onFinished:()=>{C(!1),i()}})]})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold",children:"Documentos Gerados"}),a.generatedDocuments&&a.generatedDocuments.length>0?a.generatedDocuments.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-slate-50 border rounded-md",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["prescription"===e.type?(0,t.jsx)(f.Z,{className:"h-4 w-4 text-blue-500"}):(0,t.jsx)(g.Z,{className:"h-4 w-4 text-green-500"}),(0,t.jsx)("span",{className:"font-medium text-sm",children:e.name}),(0,t.jsxs)("span",{className:"text-xs text-gray-400",children:["(",e.createdAt.toDate().toLocaleDateString("pt-BR"),")"]})]}),(0,t.jsx)(D.z,{asChild:!0,variant:"ghost",size:"icon",className:"h-7 w-7",children:(0,t.jsx)(n.default,{href:e.url,target:"_blank",rel:"noopener noreferrer",children:(0,t.jsx)(j.Z,{className:"h-4 w-4"})})})]},a)):(0,t.jsx)("p",{className:"text-xs text-center text-gray-400 py-4",children:"Nenhum documento gerado para esta consulta."})]})]})]}),(0,t.jsx)("div",{className:"mt-auto pt-4",children:(0,t.jsxs)(D.z,{onClick:O,disabled:y,className:"w-full",children:[y?(0,t.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),"Salvar Anota\xe7\xf5es"]})})]})]})};function H(){let e=(0,i.useParams)(),a=(0,i.useRouter)(),{user:s}=(0,d.a)(),{toast:u}=(0,c.pm)(),m=e.consultaId,[f,h]=(0,r.useState)(null),[p,g]=(0,r.useState)(null),[j,v]=(0,r.useState)(!0),[A,E]=(0,r.useState)(!1),[Z,_]=(0,r.useState)(null),T=async()=>{if(m&&s){v(!0);try{let[e,a]=await Promise.all([(0,l.xr)(m),(0,o.Ts)()]);if(!e||e.doctorId!==s.uid)throw Error("Consulta n\xe3o encontrada ou acesso n\xe3o permitido.");h(e),g(a)}catch(e){_(e.message),h(null)}finally{v(!1)}}};(0,r.useEffect)(()=>{T()},[m,s]);let I=async()=>{if(f){E(!0);try{await (0,l.yd)(f),u({title:"Atendimento Finalizado!",description:"O paciente foi removido da sua fila de espera."}),a.push("/dashboard")}catch(e){u({title:"Erro ao Finalizar",description:e.message,variant:"destructive"}),E(!1)}}};return j?(0,t.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,t.jsx)(x.Z,{className:"h-8 w-8 animate-spin"})}):Z?(0,t.jsxs)("div",{className:"text-center text-red-600 p-8",children:[(0,t.jsx)(N.Z,{className:"mx-auto h-12 w-12 mb-4"}),(0,t.jsx)("p",{children:Z})]}):f?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(n.default,{href:"/dashboard",className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[(0,t.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),"Voltar para o Dashboard"]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 h-[calc(100vh-120px)]",children:[(0,t.jsx)("div",{className:"md:col-span-2 h-full",children:(0,t.jsx)(Y,{consultation:f,userProfile:p,refreshData:T})}),(0,t.jsxs)("div",{className:"h-full flex flex-col gap-6",children:["Telemedicina"===f.type&&(0,t.jsxs)(R.Zb,{className:"border-blue-500 border-2",children:[(0,t.jsx)(R.Ol,{children:(0,t.jsxs)(R.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(y.Z,{}),"Sala de Telemedicina"]})}),(0,t.jsx)(R.aY,{children:f.telemedicineLink?(0,t.jsx)(D.z,{asChild:!0,className:"w-full bg-blue-600 hover:bg-blue-700",children:(0,t.jsx)(n.default,{href:f.telemedicineLink,target:"_blank",rel:"noopener noreferrer",children:"Entrar na Chamada de V\xeddeo"})}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"A sala de v\xeddeo est\xe1 a ser criada..."})})]}),(0,t.jsxs)(R.Zb,{className:"h-full flex flex-col",children:[(0,t.jsx)(R.Ol,{children:(0,t.jsx)(R.ll,{children:"Detalhes do Atendimento"})}),(0,t.jsxs)(R.aY,{className:"space-y-4 text-sm flex-grow",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(w.Z,{className:"h-5 w-5 text-gray-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold",children:"Local"}),(0,t.jsx)("p",{children:f.hospitalName})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(S.Z,{className:"h-5 w-5 text-gray-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold",children:"Data"}),(0,t.jsx)("p",{children:f.createdAt.toDate().toLocaleDateString("pt-BR")})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(C.Z,{className:"h-5 w-5 text-gray-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold",children:"Tipo"}),(0,t.jsx)("p",{children:f.type})]})]})]}),(0,t.jsx)(R.eW,{className:"mt-auto border-t pt-4",children:(0,t.jsxs)(D.z,{onClick:I,disabled:A,className:"w-full bg-green-600 hover:bg-green-700",children:[A?(0,t.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(k.Z,{className:"mr-2 h-4 w-4"}),"Finalizar Atendimento"]})})]})]})]})]}):(0,t.jsx)("div",{className:"p-4 text-center",children:"Dados da consulta n\xe3o encontrados."})}},6596:function(e,a,s){"use strict";s.d(a,{Qd:function(){return d},UQ:function(){return o},o4:function(){return c},vF:function(){return u}});var t=s(57437),r=s(2265),n=s(13134),i=s(40875),l=s(94508);let o=n.fC,d=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(n.ck,{ref:a,className:(0,l.cn)("border-b",s),...r})});d.displayName="AccordionItem";let c=r.forwardRef((e,a)=>{let{className:s,children:r,...o}=e;return(0,t.jsx)(n.h4,{className:"flex",children:(0,t.jsxs)(n.xz,{ref:a,className:(0,l.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...o,children:[r,(0,t.jsx)(i.Z,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});c.displayName=n.xz.displayName;let u=r.forwardRef((e,a)=>{let{className:s,children:r,...i}=e;return(0,t.jsx)(n.VY,{ref:a,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...i,children:(0,t.jsx)("div",{className:(0,l.cn)("pb-4 pt-0",s),children:r})})});u.displayName=n.VY.displayName},35974:function(e,a,s){"use strict";s.d(a,{C:function(){return l}});var t=s(57437);s(2265);var r=s(90535),n=s(94508);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:a,variant:s,...r}=e;return(0,t.jsx)("div",{className:(0,n.cn)(i({variant:s}),a),...r})}},62869:function(e,a,s){"use strict";s.d(a,{d:function(){return o},z:function(){return d}});var t=s(57437),r=s(2265),n=s(37053),i=s(90535),l=s(94508);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,a)=>{let{className:s,variant:r,size:i,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,t.jsx)(u,{className:(0,l.cn)(o({variant:r,size:i,className:s})),ref:a,...c})});d.displayName="Button"},66070:function(e,a,s){"use strict";s.d(a,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},eW:function(){return u},ll:function(){return o}});var t=s(57437),r=s(2265),n=s(94508);let i=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});i.displayName="Card";let l=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});o.displayName="CardTitle";let d=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",s),...r})});c.displayName="CardContent";let u=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})});u.displayName="CardFooter"},26110:function(e,a,s){"use strict";s.d(a,{$N:function(){return p},Be:function(){return g},GG:function(){return u},Vq:function(){return o},cN:function(){return h},cZ:function(){return x},fK:function(){return f},hg:function(){return d}});var t=s(57437),r=s(2265),n=s(49027),i=s(32489),l=s(94508);let o=n.fC,d=n.xz,c=n.h_,u=n.x8,m=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(n.aV,{ref:a,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});m.displayName=n.aV.displayName;let x=r.forwardRef((e,a)=>{let{className:s,children:r,...o}=e;return(0,t.jsxs)(c,{children:[(0,t.jsx)(m,{}),(0,t.jsxs)(n.VY,{ref:a,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...o,children:[r,(0,t.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(i.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=n.VY.displayName;let f=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...s})};f.displayName="DialogHeader";let h=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};h.displayName="DialogFooter";let p=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(n.Dx,{ref:a,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});p.displayName=n.Dx.displayName;let g=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(n.dk,{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});g.displayName=n.dk.displayName},95186:function(e,a,s){"use strict";s.d(a,{I:function(){return i}});var t=s(57437),r=s(2265),n=s(94508);let i=r.forwardRef((e,a)=>{let{className:s,type:r,...i}=e;return(0,t.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...i})});i.displayName="Input"},26815:function(e,a,s){"use strict";s.d(a,{_:function(){return d}});var t=s(57437),r=s(2265),n=s(6394),i=s(90535),l=s(94508);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(n.f,{ref:a,className:(0,l.cn)(o(),s),...r})});d.displayName=n.f.displayName},12339:function(e,a,s){"use strict";s.d(a,{SP:function(){return d},dr:function(){return o},mQ:function(){return l},nU:function(){return c}});var t=s(57437),r=s(2265),n=s(20271),i=s(94508);let l=n.fC,o=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(n.aV,{ref:a,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...r})});o.displayName=n.aV.displayName;let d=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(n.xz,{ref:a,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...r})});d.displayName=n.xz.displayName;let c=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(n.VY,{ref:a,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r})});c.displayName=n.VY.displayName},76818:function(e,a,s){"use strict";s.d(a,{g:function(){return i}});var t=s(57437),r=s(2265),n=s(94508);let i=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...r})});i.displayName="Textarea"},35153:function(e,a,s){"use strict";s.d(a,{pm:function(){return m}});var t=s(2265);let r=0,n=new Map,i=e=>{if(n.has(e))return;let a=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,a)},l=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=a;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function u(e){let{...a}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),t=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...a,id:s,open:!0,onOpenChange:e=>{e||t()}}}),{id:s,dismiss:t,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,a]=t.useState(d);return t.useEffect(()=>(o.push(a),()=>{let e=o.indexOf(a);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},18331:function(e,a,s){"use strict";s.d(a,{KO:function(){return o},Nb:function(){return l},xr:function(){return i},yd:function(){return n}});var t=s(5978),r=s(17293);(0,s(1850).V1)(r.wk,"createConsultationRoom");let n=async e=>{let a=(0,t.qs)(r.db),s=(0,t.JU)(r.db,"consultations",e.id);if(a.update(s,{status:"COMPLETED"}),e.queueId){let s=(0,t.JU)(r.db,"serviceQueue",e.queueId);a.update(s,{status:"Finalizado"})}await a.commit()},i=async e=>{if(!e)return null;let a=(0,t.JU)(r.db,"consultations",e);try{let e=await (0,t.QT)(a);return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("Falha ao carregar dados da consulta:",e),Error("Falha ao carregar os dados da consulta.")}},l=async e=>{let a=(0,t.hJ)(r.db,"consultations"),s=(0,t.IO)(a,(0,t.ar)("patientId","==",e),(0,t.Xo)("createdAt","desc"));return(await (0,t.PL)(s)).docs.map(e=>({id:e.id,...e.data()}))},o=async(e,a)=>{if(!e)throw Error("ID da consulta \xe9 obrigat\xf3rio.");let s=(0,t.JU)(r.db,"consultations",e);try{await (0,t.r7)(s,{clinicalEvolution:a.clinicalEvolution,diagnosticHypothesis:a.diagnosticHypothesis})}catch(e){throw console.error("Erro ao salvar dados do prontu\xe1rio:",e),Error("N\xe3o foi poss\xedvel salvar os dados do prontu\xe1rio.")}}}},function(e){e.O(0,[3609,9015,6137,9388,7648,9733,793,4517,4701,6606,3073,2971,2117,1744],function(){return e(e.s=12017)}),_N_E=e.O()}]);