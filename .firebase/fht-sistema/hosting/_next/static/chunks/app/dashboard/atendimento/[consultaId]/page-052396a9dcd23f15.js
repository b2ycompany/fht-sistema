(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1899],{12017:function(e,a,t){Promise.resolve().then(t.bind(t,96953))},96953:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return F}});var s=t(57437),r=t(2265),n=t(27648),i=t(99376),l=t(18331),o=t(92651),d=t(46413),c=t(35153),u=t(18930),m=t(88964),f=t(51817),x=t(54159),p=t(48736),h=t(92735),g=t(83229),N=t(76865),v=t(32660),j=t(29374),b=t(23759),y=t(31047),w=t(95337),S=t(41671),k=t(66070),C=t(62869),D=t(76818),_=t(26815),E=t(95186),R=t(12339),T=t(26110),I=t(17293),A=t(13491);let O=(0,A.V1)(I.wk,"generatePrescriptionPdf");(0,A.V1)(I.wk,"generateDocumentPdf");let P=async e=>{try{let a=await O(e);if(!a.data.success)throw Error("O backend retornou uma falha ao gerar a receita.");return a.data}catch(e){throw console.error("Erro ao chamar generatePrescriptionPdf:",e),Error(e.message||"N\xe3o foi poss\xedvel gerar a receita.")}},z=e=>{let{data:a}=e;return(0,s.jsxs)("div",{className:"space-y-3 mt-4",children:[(0,s.jsxs)("div",{className:"p-3 bg-blue-50 rounded-md border border-blue-200",children:[(0,s.jsx)(_._,{className:"text-gray-500",children:"Queixa Principal"}),(0,s.jsx)("p",{className:"font-semibold whitespace-pre-wrap",children:(null==a?void 0:a.chiefComplaint)||"N\xe3o informada"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"p-2 bg-slate-50 rounded-md border",children:[(0,s.jsx)(_._,{className:"text-xs text-gray-500 block",children:"Press\xe3o Arterial"}),(0,s.jsx)("p",{className:"font-medium",children:(null==a?void 0:a.bloodPressure)||"-"})]}),(0,s.jsxs)("div",{className:"p-2 bg-slate-50 rounded-md border",children:[(0,s.jsx)(_._,{className:"text-xs text-gray-500 block",children:"Temperatura"}),(0,s.jsx)("p",{className:"font-medium",children:(null==a?void 0:a.temperature)?"".concat(a.temperature," \xb0C"):"-"})]}),(0,s.jsxs)("div",{className:"p-2 bg-slate-50 rounded-md border",children:[(0,s.jsx)(_._,{className:"text-xs text-gray-500 block",children:"Freq. Card\xedaca"}),(0,s.jsx)("p",{className:"font-medium",children:(null==a?void 0:a.heartRate)?"".concat(a.heartRate," bpm"):"-"})]}),(0,s.jsxs)("div",{className:"p-2 bg-slate-50 rounded-md border",children:[(0,s.jsx)(_._,{className:"text-xs text-gray-500 block",children:"Freq. Respirat\xf3ria"}),(0,s.jsx)("p",{className:"font-medium",children:(null==a?void 0:a.respiratoryRate)?"".concat(a.respiratoryRate," rpm"):"-"})]}),(0,s.jsxs)("div",{className:"p-2 bg-slate-50 rounded-md border",children:[(0,s.jsx)(_._,{className:"text-xs text-gray-500 block",children:"Satura\xe7\xe3o Oâ‚‚"}),(0,s.jsx)("p",{className:"font-medium",children:(null==a?void 0:a.oxygenSaturation)?"".concat(a.oxygenSaturation," %"):"-"})]})]}),(null==a?void 0:a.notes)&&(0,s.jsxs)("div",{className:"p-3 bg-yellow-50 rounded-md border border-yellow-200",children:[(0,s.jsx)(_._,{className:"text-gray-500",children:"Outras Anota\xe7\xf5es da Triagem"}),(0,s.jsx)("p",{className:"whitespace-pre-wrap",children:a.notes})]})]})},Z=e=>{let{consultation:a,doctorProfile:t,onFinished:n}=e,{toast:i}=(0,c.pm)(),[l,o]=(0,r.useState)([{name:"",dosage:"",instructions:""}]),[d,p]=(0,r.useState)(!1),h=(e,a,t)=>{let s=[...l];s[e][a]=t,o(s)},g=e=>o(l.filter((a,t)=>t!==e)),N=async()=>{if(l.some(e=>!e.name||!e.dosage)){i({title:"Campos obrigat\xf3rios",description:"O nome e a dose de cada medicamento s\xe3o necess\xe1rios.",variant:"destructive"});return}p(!0);try{let e={consultationId:a.id,patientName:a.patientName,doctorName:t.displayName,doctorCrm:t.professionalCrm,medications:l};await P(e),i({title:"Receita Gerada!",description:"O PDF da receita foi criado. A lista de documentos ser\xe1 atualizada."}),n()}catch(e){i({title:"Erro ao Gerar Receita",description:e.message,variant:"destructive"})}finally{p(!1)}};return(0,s.jsxs)(T.cZ,{className:"max-w-2xl",children:[(0,s.jsxs)(T.fK,{children:[(0,s.jsx)(T.$N,{children:"Gerar Nova Receita M\xe9dica"}),(0,s.jsx)(T.Be,{children:"Adicione um ou mais medicamentos."})]}),(0,s.jsxs)("div",{className:"max-h-[60vh] overflow-y-auto space-y-4 p-1",children:[l.map((e,a)=>(0,s.jsxs)("div",{className:"space-y-2 p-3 border rounded-md relative bg-slate-50",children:[l.length>1&&(0,s.jsx)(C.z,{variant:"ghost",size:"icon",className:"absolute top-1 right-1 h-6 w-6",onClick:()=>g(a),children:(0,s.jsx)(u.Z,{className:"h-4 w-4 text-red-500"})}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(_._,{children:"Medicamento"}),(0,s.jsx)(E.I,{value:e.name,onChange:e=>h(a,"name",e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(_._,{children:"Dose / Quantidade"}),(0,s.jsx)(E.I,{value:e.dosage,onChange:e=>h(a,"dosage",e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(_._,{children:"Instru\xe7\xf5es (Posologia)"}),(0,s.jsx)(D.g,{value:e.instructions,onChange:e=>h(a,"instructions",e.target.value)})]})]},a)),(0,s.jsxs)(C.z,{variant:"outline",size:"sm",onClick:()=>o([...l,{name:"",dosage:"",instructions:""}]),children:[(0,s.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"Adicionar medicamento"]})]}),(0,s.jsx)(T.cN,{children:(0,s.jsxs)(C.z,{onClick:N,disabled:d,children:[d?(0,s.jsx)(f.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),"Gerar e Salvar Receita"]})})]})},V=e=>{let{consultation:a,userProfile:t,refreshData:i}=e,{toast:o}=(0,c.pm)(),[d,u]=(0,r.useState)((null==a?void 0:a.clinicalEvolution)||""),[N,v]=(0,r.useState)((null==a?void 0:a.diagnosticHypothesis)||""),[j,b]=(0,r.useState)(!1),[y,w]=(0,r.useState)(!1),S=async()=>{b(!0);try{await (0,l.KO)(a.id,{clinicalEvolution:d,diagnosticHypothesis:N}),o({title:"Sucesso!",description:"Prontu\xe1rio salvo."})}catch(e){o({title:"Erro ao Salvar",description:e.message,variant:"destructive"})}finally{b(!1)}};return(0,s.jsxs)(k.Zb,{className:"h-full flex flex-col",children:[(0,s.jsx)(k.Ol,{children:(0,s.jsx)(k.ll,{className:"text-lg",children:"Prontu\xe1rio Eletr\xf4nico"})}),(0,s.jsxs)(k.aY,{className:"flex-grow flex flex-col gap-4 overflow-y-auto",children:[(0,s.jsxs)(R.mQ,{defaultValue:"medical-record",className:"flex-grow flex flex-col",children:[(0,s.jsxs)(R.dr,{className:"grid w-full grid-cols-4",children:[(0,s.jsx)(R.SP,{value:"medical-record",children:"Atendimento"}),(0,s.jsx)(R.SP,{value:"triage",children:"Triagem"}),(0,s.jsx)(R.SP,{value:"patient-data",children:"Paciente"}),(0,s.jsx)(R.SP,{value:"documents",children:"Documentos"})]}),(0,s.jsx)(R.nU,{value:"triage",className:"flex-grow",children:(0,s.jsx)(z,{data:a.triageData})}),(0,s.jsx)(R.nU,{value:"patient-data",className:"text-sm space-y-3 mt-4 flex-grow",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(_._,{className:"text-gray-500",children:"Nome"}),(0,s.jsx)("p",{children:a.patientName})]})}),(0,s.jsxs)(R.nU,{value:"medical-record",className:"flex-grow flex flex-col gap-4 mt-4",children:[(0,s.jsxs)("div",{className:"space-y-1.5 flex flex-col flex-grow",children:[(0,s.jsx)(_._,{htmlFor:"evolution",children:"Evolu\xe7\xe3o Cl\xednica"}),(0,s.jsx)(D.g,{id:"evolution",value:d,onChange:e=>u(e.target.value),className:"min-h-[150px] flex-grow"})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(_._,{htmlFor:"hypothesis",children:"Hip\xf3tese Diagn\xf3stica"}),(0,s.jsx)(D.g,{id:"hypothesis",value:N,onChange:e=>v(e.target.value)})]})]}),(0,s.jsxs)(R.nU,{value:"documents",className:"mt-4 space-y-4",children:[(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)(T.Vq,{open:y,onOpenChange:w,children:[(0,s.jsx)(T.hg,{asChild:!0,children:(0,s.jsxs)(C.z,{variant:"outline",children:[(0,s.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"Gerar Receita"]})}),t&&(0,s.jsx)(Z,{consultation:a,doctorProfile:t,onFinished:()=>{w(!1),i()}})]})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold",children:"Documentos Gerados"}),a.generatedDocuments&&a.generatedDocuments.length>0?a.generatedDocuments.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-slate-50 border rounded-md",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["prescription"===e.type?(0,s.jsx)(x.Z,{className:"h-4 w-4 text-blue-500"}):(0,s.jsx)(p.Z,{className:"h-4 w-4 text-green-500"}),(0,s.jsx)("span",{className:"font-medium text-sm",children:e.name}),(0,s.jsxs)("span",{className:"text-xs text-gray-400",children:["(",e.createdAt.toDate().toLocaleDateString("pt-BR"),")"]})]}),(0,s.jsx)(C.z,{asChild:!0,variant:"ghost",size:"icon",className:"h-7 w-7",children:(0,s.jsx)(n.default,{href:e.url,target:"_blank",rel:"noopener noreferrer",children:(0,s.jsx)(h.Z,{className:"h-4 w-4"})})})]},a)):(0,s.jsx)("p",{className:"text-xs text-center text-gray-400 py-4",children:"Nenhum documento gerado para esta consulta."})]})]})]}),(0,s.jsx)("div",{className:"mt-auto pt-4",children:(0,s.jsxs)(C.z,{onClick:S,disabled:j,className:"w-full",children:[j?(0,s.jsx)(f.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),"Salvar Anota\xe7\xf5es"]})})]})]})};function F(){let e=(0,i.useParams)(),a=(0,i.useRouter)(),{user:t}=(0,d.a)(),{toast:u}=(0,c.pm)(),m=e.consultaId,[x,p]=(0,r.useState)(null),[h,g]=(0,r.useState)(null),[D,_]=(0,r.useState)(!0),[E,R]=(0,r.useState)(!1),[T,I]=(0,r.useState)(null),A=async()=>{if(m&&t){_(!0);try{let[e,a]=await Promise.all([(0,l.xr)(m),(0,o.Ts)()]);if(!e||e.doctorId!==t.uid)throw Error("Consulta n\xe3o encontrada ou acesso n\xe3o permitido.");p(e),g(a)}catch(e){I(e.message),p(null)}finally{_(!1)}}};(0,r.useEffect)(()=>{A()},[m,t]);let O=async()=>{if(x){R(!0);try{await (0,l.yd)(x),u({title:"Atendimento Finalizado!",description:"O paciente foi removido da sua fila de espera."}),a.push("/dashboard")}catch(e){u({title:"Erro ao Finalizar",description:e.message,variant:"destructive"}),R(!1)}}};return D?(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsx)(f.Z,{className:"h-8 w-8 animate-spin"})}):T?(0,s.jsxs)("div",{className:"text-center text-red-600 p-8",children:[(0,s.jsx)(N.Z,{className:"mx-auto h-12 w-12 mb-4"}),(0,s.jsx)("p",{children:T})]}):x?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(n.default,{href:"/dashboard",className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[(0,s.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),"Voltar para o Dashboard"]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 h-[calc(100vh-120px)]",children:[(0,s.jsx)("div",{className:"md:col-span-2 h-full",children:(0,s.jsx)(V,{consultation:x,userProfile:h,refreshData:A})}),(0,s.jsxs)("div",{className:"h-full flex flex-col gap-6",children:["Telemedicina"===x.type&&(0,s.jsxs)(k.Zb,{className:"border-blue-500 border-2",children:[(0,s.jsx)(k.Ol,{children:(0,s.jsxs)(k.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(j.Z,{}),"Sala de Telemedicina"]})}),(0,s.jsx)(k.aY,{children:x.telemedicineLink?(0,s.jsx)(C.z,{asChild:!0,className:"w-full bg-blue-600 hover:bg-blue-700",children:(0,s.jsx)(n.default,{href:x.telemedicineLink,target:"_blank",rel:"noopener noreferrer",children:"Entrar na Chamada de V\xeddeo"})}):(0,s.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"A sala de v\xeddeo est\xe1 a ser criada..."})})]}),(0,s.jsxs)(k.Zb,{className:"h-full flex flex-col",children:[(0,s.jsx)(k.Ol,{children:(0,s.jsx)(k.ll,{children:"Detalhes do Atendimento"})}),(0,s.jsxs)(k.aY,{className:"space-y-4 text-sm flex-grow",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(b.Z,{className:"h-5 w-5 text-gray-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold",children:"Local"}),(0,s.jsx)("p",{children:x.hospitalName})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(y.Z,{className:"h-5 w-5 text-gray-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold",children:"Data"}),(0,s.jsx)("p",{children:x.createdAt.toDate().toLocaleDateString("pt-BR")})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(w.Z,{className:"h-5 w-5 text-gray-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold",children:"Tipo"}),(0,s.jsx)("p",{children:x.type})]})]})]}),(0,s.jsx)(k.eW,{className:"mt-auto border-t pt-4",children:(0,s.jsxs)(C.z,{onClick:O,disabled:E,className:"w-full bg-green-600 hover:bg-green-700",children:[E?(0,s.jsx)(f.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(S.Z,{className:"mr-2 h-4 w-4"}),"Finalizar Atendimento"]})})]})]})]})]}):(0,s.jsx)("div",{className:"p-4 text-center",children:"Dados da consulta n\xe3o encontrados."})}},62869:function(e,a,t){"use strict";t.d(a,{d:function(){return o},z:function(){return d}});var s=t(57437),r=t(2265),n=t(37053),i=t(90535),l=t(94508);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,a)=>{let{className:t,variant:r,size:i,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,s.jsx)(u,{className:(0,l.cn)(o({variant:r,size:i,className:t})),ref:a,...c})});d.displayName="Button"},66070:function(e,a,t){"use strict";t.d(a,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},eW:function(){return u},ll:function(){return o}});var s=t(57437),r=t(2265),n=t(94508);let i=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});i.displayName="Card";let l=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});o.displayName="CardTitle";let d=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",t),...r})});c.displayName="CardContent";let u=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",t),...r})});u.displayName="CardFooter"},26110:function(e,a,t){"use strict";t.d(a,{$N:function(){return h},Be:function(){return g},GG:function(){return u},Vq:function(){return o},cN:function(){return p},cZ:function(){return f},fK:function(){return x},hg:function(){return d}});var s=t(57437),r=t(2265),n=t(49027),i=t(32489),l=t(94508);let o=n.fC,d=n.xz,c=n.h_,u=n.x8,m=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.aV,{ref:a,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});m.displayName=n.aV.displayName;let f=r.forwardRef((e,a)=>{let{className:t,children:r,...o}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(m,{}),(0,s.jsxs)(n.VY,{ref:a,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...o,children:[r,(0,s.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=n.VY.displayName;let x=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};x.displayName="DialogHeader";let p=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};p.displayName="DialogFooter";let h=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.Dx,{ref:a,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});h.displayName=n.Dx.displayName;let g=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.dk,{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",t),...r})});g.displayName=n.dk.displayName},95186:function(e,a,t){"use strict";t.d(a,{I:function(){return i}});var s=t(57437),r=t(2265),n=t(94508);let i=r.forwardRef((e,a)=>{let{className:t,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...i})});i.displayName="Input"},26815:function(e,a,t){"use strict";t.d(a,{_:function(){return d}});var s=t(57437),r=t(2265),n=t(6394),i=t(90535),l=t(94508);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.f,{ref:a,className:(0,l.cn)(o(),t),...r})});d.displayName=n.f.displayName},12339:function(e,a,t){"use strict";t.d(a,{SP:function(){return d},dr:function(){return o},mQ:function(){return l},nU:function(){return c}});var s=t(57437),r=t(2265),n=t(20271),i=t(94508);let l=n.fC,o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.aV,{ref:a,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r})});o.displayName=n.aV.displayName;let d=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.xz,{ref:a,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r})});d.displayName=n.xz.displayName;let c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.VY,{ref:a,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r})});c.displayName=n.VY.displayName},76818:function(e,a,t){"use strict";t.d(a,{g:function(){return i}});var s=t(57437),r=t(2265),n=t(94508);let i=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...r})});i.displayName="Textarea"},35153:function(e,a,t){"use strict";t.d(a,{pm:function(){return m}});var s=t(2265);let r=0,n=new Map,i=e=>{if(n.has(e))return;let a=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,a)},l=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function u(e){let{...a}=e,t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...a,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,a]=s.useState(d);return s.useEffect(()=>(o.push(a),()=>{let e=o.indexOf(a);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},18331:function(e,a,t){"use strict";t.d(a,{KO:function(){return c},Nb:function(){return d},hC:function(){return i},xr:function(){return o},yd:function(){return l}});var s=t(5978),r=t(17293);let n=(0,t(13491).V1)(r.wk,"createConsultationRoom"),i=async(e,a)=>{let t=(0,s.qs)(r.db),i=(0,s.JU)((0,s.hJ)(r.db,"consultations")),l={patientId:e.patientId,patientName:e.patientName,queueId:e.id,doctorId:a.uid,doctorName:a.displayName,hospitalId:e.unitId,hospitalName:e.hospitalName,status:"IN_PROGRESS",type:e.type,createdAt:(0,s.Bt)(),triageData:e.triageData||{},generatedDocuments:[]};if("Telemedicina"===e.type)try{let e=await n({consultationId:i.id});e.data.success&&(l.telemedicineLink=e.data.roomUrl)}catch(e){console.error("Falha ao criar a sala de telemedicina:",e)}t.set(i,l);let o=(0,s.JU)(r.db,"serviceQueue",e.id);return t.update(o,{status:"Em Atendimento",doctorId:a.uid}),await t.commit(),i.id},l=async e=>{let a=(0,s.qs)(r.db),t=(0,s.JU)(r.db,"consultations",e.id);if(a.update(t,{status:"COMPLETED"}),e.queueId){let t=(0,s.JU)(r.db,"serviceQueue",e.queueId);a.update(t,{status:"Finalizado"})}await a.commit()},o=async e=>{if(!e)return null;let a=(0,s.JU)(r.db,"consultations",e);try{let e=await (0,s.QT)(a);return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("Falha ao carregar dados da consulta:",e),Error("Falha ao carregar os dados da consulta.")}},d=async e=>{let a=(0,s.hJ)(r.db,"consultations"),t=(0,s.IO)(a,(0,s.ar)("patientId","==",e),(0,s.Xo)("createdAt","desc"));return(await (0,s.PL)(t)).docs.map(e=>({id:e.id,...e.data()}))},c=async(e,a)=>{if(!e)throw Error("ID da consulta \xe9 obrigat\xf3rio.");let t=(0,s.JU)(r.db,"consultations",e);try{await (0,s.r7)(t,{clinicalEvolution:a.clinicalEvolution,diagnosticHypothesis:a.diagnosticHypothesis})}catch(e){throw console.error("Erro ao salvar dados do prontu\xe1rio:",e),Error("N\xe3o foi poss\xedvel salvar os dados do prontu\xe1rio.")}}}},function(e){e.O(0,[4358,9990,6137,9084,9733,6838,7648,4517,6318,3073,2971,2117,1744],function(){return e(e.s=12017)}),_N_E=e.O()}]);