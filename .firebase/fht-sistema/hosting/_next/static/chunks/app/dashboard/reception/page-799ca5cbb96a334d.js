(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9345],{52044:function(e,t,a){Promise.resolve().then(a.bind(a,90378))},90378:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return C}});var s=a(57437),n=a(2265),i=a(5978),l=a(46413),r=a(35153),c=a(31623),d=a(62869),o=a(66070),u=a(95186),m=a(26815),x=a(26110),h=a(51817),f=a(37806),p=a(83578),j=a(73247),N=a(49663),y=a(23759),g=a(99897);let v=(0,a(79205).Z)("ListPlus",[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]]);var b=a(16850),k=a(53647);let w=e=>{let{onPatientCreated:t,unitId:a,createdBy:l}=e,{toast:o}=(0,r.pm)(),[p,j]=(0,n.useState)(""),[N,y]=(0,n.useState)(""),[g,v]=(0,n.useState)(""),[b,k]=(0,n.useState)(""),[w,C]=(0,n.useState)(!1),Z=async()=>{if(!p||!g){o({title:"Campos obrigat\xf3rios",description:"Nome Completo e Data de Nascimento s\xe3o necess\xe1rios.",variant:"destructive"});return}C(!0);try{let e={name:p,cpf:N,dob:g,phone:b,unitId:a,createdBy:l},s={id:await (0,c.hK)(e),createdAt:new i.EK(Math.floor(Date.now()/1e3),0),name_lowercase:p.toLowerCase(),...e};o({title:"Paciente Cadastrado!",description:"".concat(p," foi adicionado(a) com sucesso.")}),t(s)}catch(e){o({title:"Erro ao Cadastrar",description:e.message,variant:"destructive"})}finally{C(!1)}};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(m._,{htmlFor:"name",children:"Nome Completo"}),(0,s.jsx)(u.I,{id:"name",value:p,onChange:e=>j(e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(m._,{htmlFor:"cpf",children:"CPF (Opcional)"}),(0,s.jsx)(u.I,{id:"cpf",value:N,onChange:e=>y(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(m._,{htmlFor:"birthDate",children:"Data de Nascimento"}),(0,s.jsx)(u.I,{id:"birthDate",type:"date",value:g,onChange:e=>v(e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(m._,{htmlFor:"phone",children:"Telefone (Opcional)"}),(0,s.jsx)(u.I,{id:"phone",value:b,onChange:e=>k(e.target.value)})]})]}),(0,s.jsx)(x.cN,{className:"mt-4",children:(0,s.jsxs)(d.z,{onClick:Z,disabled:w,children:[w?(0,s.jsx)(h.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),"Salvar Paciente"]})})]})};function C(){let{userProfile:e,loading:t}=(0,l.a)(),{toast:a}=(0,r.pm)(),[i,C]=(0,n.useState)(""),[Z,S]=(0,n.useState)([]),[P,_]=(0,n.useState)(null),[F,I]=(0,n.useState)(!1),[M,z]=(0,n.useState)(!1),[D,E]=(0,n.useState)(!1),[O,V]=(0,n.useState)("Presencial"),T=(0,b.N)(i,500);(0,n.useEffect)(()=>{T&&(null==e?void 0:e.hospitalId)?(async()=>{I(!0);try{let t=await (0,c.bS)(T,e.hospitalId);S(t)}catch(e){a({title:"Erro na Busca",description:e.message,variant:"destructive"})}finally{I(!1)}})():S([])},[T,e,a]);let q=e=>{_(e),C(e.name),S([])},A=async()=>{if(!P||!(null==e?void 0:e.hospitalId)){a({title:"Nenhum paciente selecionado",variant:"destructive"});return}z(!0);try{await (0,c.xG)(P,e.hospitalId,e.displayName,O),a({title:"Sucesso!",description:"".concat(P.name," foi adicionado(a) \xe0 fila de ").concat(O,".")}),_(null),C("")}catch(e){a({title:"Erro ao adicionar \xe0 Fila",description:e.message,variant:"destructive"})}finally{z(!1)}};return t||!e?(0,s.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,s.jsx)(h.Z,{className:"h-12 w-12 animate-spin text-blue-600"})}):["admin","receptionist","caravan_admin","hospital","backoffice"].includes(e.userType)?(0,s.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Recep\xe7\xe3o - Check-in de Pacientes"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)(o.Zb,{className:"lg:col-span-2",children:[(0,s.jsx)(o.Ol,{children:(0,s.jsx)(o.ll,{children:"1. Encontrar ou Cadastrar Paciente"})}),(0,s.jsxs)(o.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(m._,{htmlFor:"search",children:"Buscar Paciente por Nome ou CPF"}),(0,s.jsx)(j.Z,{className:"absolute left-2 top-9 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(u.I,{id:"search",placeholder:"Digite para buscar...",className:"pl-8",value:i,onChange:e=>{C(e.target.value),_(null)}})]}),F&&(0,s.jsx)("div",{className:"text-center p-4",children:(0,s.jsx)(h.Z,{className:"h-6 w-6 animate-spin"})}),Z.length>0&&(0,s.jsx)("div",{className:"border rounded-md max-h-48 overflow-y-auto",children:Z.map(e=>(0,s.jsxs)("div",{onClick:()=>q(e),className:"p-3 hover:bg-slate-50 cursor-pointer border-b last:border-b-0",children:[(0,s.jsx)("p",{className:"font-semibold",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["CPF: ",e.cpf||"N\xe3o informado"]})]},e.id))}),(0,s.jsxs)("div",{className:"text-center pt-2",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"N\xe3o encontrou o paciente?"}),(0,s.jsxs)(x.Vq,{open:D,onOpenChange:E,children:[(0,s.jsx)(x.hg,{asChild:!0,children:(0,s.jsxs)(d.z,{variant:"outline",children:[(0,s.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),"Cadastrar Novo Paciente"]})}),(0,s.jsxs)(x.cZ,{children:[(0,s.jsx)(x.fK,{children:(0,s.jsx)(x.$N,{children:"Cadastrar Novo Paciente"})}),(0,s.jsx)(w,{unitId:e.hospitalId,createdBy:e.uid,onPatientCreated:e=>{q(e),E(!1)}})]})]})]})]})]}),(0,s.jsxs)(o.Zb,{className:"lg:col-span-1 sticky top-24",children:[(0,s.jsx)(o.Ol,{children:(0,s.jsx)(o.ll,{children:"2. Adicionar \xe0 Fila"})}),(0,s.jsx)(o.aY,{children:P?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,s.jsx)(N.Z,{className:"text-green-500"}),P.name]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["CPF: ",P.cpf||"N\xe3o informado"]})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(m._,{htmlFor:"attendance-type",children:"Tipo de Atendimento"}),(0,s.jsxs)(k.Ph,{value:O,onValueChange:e=>V(e),children:[(0,s.jsx)(k.i4,{id:"attendance-type",children:(0,s.jsx)(k.ki,{placeholder:"Selecione o tipo..."})}),(0,s.jsxs)(k.Bw,{children:[(0,s.jsx)(k.Ql,{value:"Presencial",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(y.Z,{className:"h-4 w-4"})," Presencial"]})}),(0,s.jsx)(k.Ql,{value:"Telemedicina",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(g.Z,{className:"h-4 w-4"})," Telemedicina"]})})]})]})]}),(0,s.jsxs)(d.z,{onClick:A,disabled:M,className:"w-full",children:[M?(0,s.jsx)(h.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(v,{className:"mr-2 h-4 w-4"}),"Adicionar \xe0 Fila"]})]}):(0,s.jsx)("p",{className:"text-center text-sm text-muted-foreground h-full flex items-center justify-center",children:"Selecione ou cadastre um paciente para continuar."})})]})]})]}):(0,s.jsx)("div",{className:"container mx-auto flex h-[calc(100vh-80px)] items-center justify-center p-8 text-center",children:(0,s.jsx)(o.Zb,{className:"w-full max-w-md border-red-500 bg-red-50",children:(0,s.jsx)(o.Ol,{children:(0,s.jsxs)(o.ll,{className:"flex items-center justify-center gap-2 text-2xl text-red-700",children:[(0,s.jsx)(p.Z,{className:"h-8 w-8"}),"Acesso Negado"]})})})})}},26110:function(e,t,a){"use strict";a.d(t,{$N:function(){return p},Be:function(){return j},GG:function(){return u},Vq:function(){return c},cN:function(){return f},cZ:function(){return x},fK:function(){return h},hg:function(){return d}});var s=a(57437),n=a(2265),i=a(49027),l=a(32489),r=a(94508);let c=i.fC,d=i.xz,o=i.h_,u=i.x8,m=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(i.aV,{ref:t,className:(0,r.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n})});m.displayName=i.aV.displayName;let x=n.forwardRef((e,t)=>{let{className:a,children:n,...c}=e;return(0,s.jsxs)(o,{children:[(0,s.jsx)(m,{}),(0,s.jsxs)(i.VY,{ref:t,className:(0,r.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:[n,(0,s.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(l.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=i.VY.displayName;let h=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};h.displayName="DialogHeader";let f=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};f.displayName="DialogFooter";let p=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(i.Dx,{ref:t,className:(0,r.cn)("text-lg font-semibold leading-none tracking-tight",a),...n})});p.displayName=i.Dx.displayName;let j=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(i.dk,{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",a),...n})});j.displayName=i.dk.displayName},95186:function(e,t,a){"use strict";a.d(t,{I:function(){return l}});var s=a(57437),n=a(2265),i=a(94508);let l=n.forwardRef((e,t)=>{let{className:a,type:n,...l}=e;return(0,s.jsx)("input",{type:n,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...l})});l.displayName="Input"},16850:function(e,t,a){"use strict";a.d(t,{N:function(){return n}});var s=a(2265);function n(e,t){let[a,n]=(0,s.useState)(e);return(0,s.useEffect)(()=>{let a=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(a)}},[e,t]),a}},73247:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},83578:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]])},49663:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]])},37806:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},32489:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(79205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[3609,9015,6137,9388,5844,266,9027,4517,6008,9315,3073,2204,2971,2117,1744],function(){return e(e.s=52044)}),_N_E=e.O()}]);