(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3407],{34778:function(e,r,t){Promise.resolve().then(t.bind(t,98283))},98283:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return y}});var a=t(57437),s=t(2265),n=t(46413),i=t(35153),l=t(31623),o=t(99495),c=t(62869),d=t(66070),u=t(95186),m=t(26815),x=t(76818),h=t(26110),f=t(51817),p=t(83578),v=t(29659),g=t(91723),b=t(74991);let j=e=>{let{queueEntry:r,onTriageSubmit:t}=e,{toast:n}=(0,i.pm)(),[d,p]=(0,s.useState)({chiefComplaint:"",bloodPressure:"",temperature:"",heartRate:"",respiratoryRate:"",oxygenSaturation:"",notes:""}),[v,g]=(0,s.useState)(null),[j,y]=(0,s.useState)(!1),N=e=>{let{name:r,value:t}=e.target;p(e=>({...e,[r]:t}))},C=async()=>{if(!d.chiefComplaint){n({title:"Erro",description:"Queixa principal \xe9 obrigat\xf3ria.",variant:"destructive"});return}if(!v){n({title:"Erro",description:"Classifica\xe7\xe3o de risco \xe9 obrigat\xf3ria.",variant:"destructive"});return}y(!0);try{let e={...d,severity:v};await (0,l.Zw)(r.id,e),n({title:"Triagem Salva!",description:"Paciente ".concat(r.patientName," encaminhado para atendimento.")}),(0,o.B)({patientName:r.patientName,dob:"N/A",patientId:r.patientId,severity:v}),t()}catch(e){n({title:"Erro ao Salvar Triagem",description:e.message,variant:"destructive"})}finally{y(!1)}};return(0,a.jsxs)("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-4",children:[(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(m._,{htmlFor:"chiefComplaint",className:"text-base",children:"Queixa Principal"}),(0,a.jsx)(x.g,{id:"chiefComplaint",name:"chiefComplaint",value:d.chiefComplaint,onChange:N,rows:3})]}),(0,a.jsx)(m._,{className:"text-base",children:"Sinais Vitais"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(m._,{htmlFor:"bloodPressure",children:"P.A. (mmHg)"}),(0,a.jsx)(u.I,{id:"bloodPressure",name:"bloodPressure",value:d.bloodPressure,onChange:N})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(m._,{htmlFor:"temperature",children:"Temp. (\xb0C)"}),(0,a.jsx)(u.I,{id:"temperature",name:"temperature",value:d.temperature,onChange:N})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(m._,{htmlFor:"heartRate",children:"F.C. (bpm)"}),(0,a.jsx)(u.I,{id:"heartRate",name:"heartRate",value:d.heartRate,onChange:N})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(m._,{htmlFor:"respiratoryRate",children:"F.R. (rpm)"}),(0,a.jsx)(u.I,{id:"respiratoryRate",name:"respiratoryRate",value:d.respiratoryRate,onChange:N})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(m._,{htmlFor:"oxygenSaturation",children:"Sat Oâ‚‚ (%)"}),(0,a.jsx)(u.I,{id:"oxygenSaturation",name:"oxygenSaturation",value:d.oxygenSaturation,onChange:N})]})]}),(0,a.jsxs)("div",{className:"space-y-2 pt-4 border-t",children:[(0,a.jsx)(m._,{className:"text-base font-semibold",children:"Classifica\xe7\xe3o de Risco (Protocolo de Manchester)"}),(0,a.jsxs)(b.E,{onValueChange:e=>g(e),value:v||"",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-2 rounded border border-red-300 bg-red-50",children:[(0,a.jsx)(b.m,{value:"vermelho",id:"sev-vermelho"}),(0,a.jsx)(m._,{htmlFor:"sev-vermelho",className:"font-bold text-red-700",children:"Vermelho (Emerg\xeancia)"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-2 rounded border border-orange-300 bg-orange-50",children:[(0,a.jsx)(b.m,{value:"laranja",id:"sev-laranja"}),(0,a.jsx)(m._,{htmlFor:"sev-laranja",className:"font-bold text-orange-700",children:"Laranja (Muito Urgente)"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-2 rounded border border-yellow-300 bg-yellow-50",children:[(0,a.jsx)(b.m,{value:"amarelo",id:"sev-amarelo"}),(0,a.jsx)(m._,{htmlFor:"sev-amarelo",className:"font-bold text-yellow-700",children:"Amarelo (Urgente)"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-2 rounded border border-green-300 bg-green-50",children:[(0,a.jsx)(b.m,{value:"verde",id:"sev-verde"}),(0,a.jsx)(m._,{htmlFor:"sev-verde",className:"font-bold text-green-700",children:"Verde (Pouco Urgente)"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-2 rounded border border-blue-300 bg-blue-50",children:[(0,a.jsx)(b.m,{value:"azul",id:"sev-azul"}),(0,a.jsx)(m._,{htmlFor:"sev-azul",className:"font-bold text-blue-700",children:"Azul (N\xe3o Urgente)"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(m._,{htmlFor:"notes",children:"Anota\xe7\xf5es Adicionais"}),(0,a.jsx)(x.g,{id:"notes",name:"notes",value:d.notes,onChange:N,rows:2})]}),(0,a.jsx)(h.cN,{className:"pt-4 border-t",children:(0,a.jsxs)(c.z,{onClick:C,disabled:j||!v,className:"w-full",children:[j&&(0,a.jsx)(f.Z,{className:"mr-2 h-4 w-4 animate-spin"}),j?"A salvar...":"Salvar Triagem e Imprimir Pulseira"]})})]})};function y(){let{userProfile:e,loading:r}=(0,n.a)(),{toast:t}=(0,i.pm)(),[o,u]=(0,s.useState)([]),[m,x]=(0,s.useState)(!0),[b,y]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(r)return;if(!e||!e.hospitalId){x(!1);return}x(!0);let t=e.hospitalId,a=(0,l.Yn)(t,"Aguardando Triagem","Presencial",e=>{u(e),x(!1)});return()=>a()},[e,r,t]);let N=async r=>{if(!e){t({title:"Erro",description:"Perfil do enfermeiro n\xe3o carregado.",variant:"destructive"});return}try{await (0,l.E8)(r.id,e.uid),y(r)}catch(e){t({title:"Erro ao chamar paciente",description:e.message,variant:"destructive"})}};return r||m?(0,a.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,a.jsx)(f.Z,{className:"h-12 w-12 animate-spin text-blue-600"})}):e&&["admin","triage_nurse","hospital"].includes(e.userType)?(0,a.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:[(0,a.jsxs)(d.Zb,{children:[(0,a.jsxs)(d.Ol,{children:[(0,a.jsxs)(d.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(v.Z,{})," Fila de Triagem"]}),(0,a.jsx)(d.SZ,{children:"Pacientes que passaram pela recep\xe7\xe3o e aguardam a classifica\xe7\xe3o de risco."})]}),(0,a.jsx)(d.aY,{children:m?(0,a.jsx)("div",{className:"text-center p-8",children:(0,a.jsx)(f.Z,{className:"h-8 w-8 animate-spin"})}):o.length>0?(0,a.jsx)("div",{className:"divide-y",children:o.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xl font-bold text-blue-700",children:e.ticketNumber}),(0,a.jsx)("p",{className:"font-semibold",children:e.patientName}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(g.Z,{size:12})," Chegada: ",e.createdAt.toDate().toLocaleTimeString("pt-BR")]})]}),(0,a.jsx)(c.z,{onClick:()=>N(e),children:"Chamar para Triagem"})]},e.id))}):(0,a.jsx)("p",{className:"text-center text-muted-foreground py-12",children:"Nenhum paciente aguardando triagem no momento."})})]}),(0,a.jsx)(h.Vq,{open:!!b,onOpenChange:e=>!e&&y(null),children:(0,a.jsxs)(h.cZ,{className:"max-w-3xl",children:[(0,a.jsx)(h.fK,{children:(0,a.jsxs)(h.$N,{children:["Triagem de Paciente: ",null==b?void 0:b.patientName," (",null==b?void 0:b.ticketNumber,")"]})}),b&&(0,a.jsx)(j,{queueEntry:b,onTriageSubmit:()=>y(null)})]})})]}):(0,a.jsx)("div",{className:"container mx-auto flex h-screen items-center justify-center p-8 text-center",children:(0,a.jsx)(d.Zb,{className:"w-full max-w-md border-red-500 bg-red-50",children:(0,a.jsx)(d.Ol,{children:(0,a.jsxs)(d.ll,{className:"flex items-center justify-center gap-2 text-2xl text-red-700",children:[(0,a.jsx)(p.Z,{className:"h-8 w-8"}),"Acesso Negado"]})})})})}},74991:function(e,r,t){"use strict";t.d(r,{E:function(){return o},m:function(){return c}});var a=t(57437),s=t(2265),n=t(42325),i=t(40519),l=t(94508);let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(n.fC,{className:(0,l.cn)("grid gap-2",t),...s,ref:r})});o.displayName=n.fC.displayName;let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(n.ck,{ref:r,className:(0,l.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:(0,a.jsx)(n.z$,{className:"flex items-center justify-center",children:(0,a.jsx)(i.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})})});c.displayName=n.ck.displayName},76818:function(e,r,t){"use strict";t.d(r,{g:function(){return i}});var a=t(57437),s=t(2265),n=t(94508);let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});i.displayName="Textarea"},91723:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(79205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},29659:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(79205).Z)("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]])},83578:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(79205).Z)("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]])},99376:function(e,r,t){"use strict";var a=t(35475);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},48049:function(e,r,t){"use strict";var a=t(14397);function s(){}function n(){}n.resetWarningCache=s,e.exports=function(){function e(e,r,t,s,n,i){if(i!==a){var l=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function r(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:n,resetWarningCache:s};return t.PropTypes=t,t}},40718:function(e,r,t){e.exports=t(48049)()},14397:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},29114:function(e,r,t){"use strict";t.d(r,{gm:function(){return n}});var a=t(2265);t(57437);var s=a.createContext(void 0);function n(e){let r=a.useContext(s);return e||r||"ltr"}},6394:function(e,r,t){"use strict";t.d(r,{f:function(){return l}});var a=t(2265),s=t(66840),n=t(57437),i=a.forwardRef((e,r)=>(0,n.jsx)(s.WV.label,{...e,ref:r,onMouseDown:r=>{var t;r.target.closest("button, input, select, textarea")||(null===(t=e.onMouseDown)||void 0===t||t.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));i.displayName="Label";var l=i},6718:function(e,r,t){"use strict";t.d(r,{D:function(){return s}});var a=t(2265);function s(e){let r=a.useRef({value:e,previous:e});return a.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}},90420:function(e,r,t){"use strict";t.d(r,{t:function(){return n}});var a=t(2265),s=t(61188);function n(e){let[r,t]=a.useState(void 0);return(0,s.b)(()=>{if(e){t({width:e.offsetWidth,height:e.offsetHeight});let r=new ResizeObserver(r=>{let a,s;if(!Array.isArray(r)||!r.length)return;let n=r[0];if("borderBoxSize"in n){let e=n.borderBoxSize,r=Array.isArray(e)?e[0]:e;a=r.inlineSize,s=r.blockSize}else a=e.offsetWidth,s=e.offsetHeight;t({width:a,height:s})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}t(void 0)},[e]),r}}},function(e){e.O(0,[3609,9015,6137,9388,9733,793,4517,5740,5065,3073,8501,2971,2117,1744],function(){return e(e.s=34778)}),_N_E=e.O()}]);