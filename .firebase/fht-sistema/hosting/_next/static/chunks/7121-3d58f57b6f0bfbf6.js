"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7121],{35974:function(t,e,r){r.d(e,{C:function(){return i}});var a=r(57437);r(2265);var o=r(90535),n=r(94508);let s=(0,o.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(t){let{className:e,variant:r,...o}=t;return(0,a.jsx)("div",{className:(0,n.cn)(s({variant:r}),e),...o})}},62869:function(t,e,r){r.d(e,{d:function(){return d},z:function(){return c}});var a=r(57437),o=r(2265),n=r(37053),s=r(90535),i=r(94508);let d=(0,s.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef((t,e)=>{let{className:r,variant:o,size:s,asChild:c=!1,...u}=t,l=c?n.g7:"button";return(0,a.jsx)(l,{className:(0,i.cn)(d({variant:o,size:s,className:r})),ref:e,...u})});c.displayName="Button"},66070:function(t,e,r){r.d(e,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return s},aY:function(){return u},eW:function(){return l},ll:function(){return d}});var a=r(57437),o=r(2265),n=r(94508);let s=o.forwardRef((t,e)=>{let{className:r,...o}=t;return(0,a.jsx)("div",{ref:e,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...o})});s.displayName="Card";let i=o.forwardRef((t,e)=>{let{className:r,...o}=t;return(0,a.jsx)("div",{ref:e,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...o})});i.displayName="CardHeader";let d=o.forwardRef((t,e)=>{let{className:r,...o}=t;return(0,a.jsx)("div",{ref:e,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...o})});d.displayName="CardTitle";let c=o.forwardRef((t,e)=>{let{className:r,...o}=t;return(0,a.jsx)("div",{ref:e,className:(0,n.cn)("text-sm text-muted-foreground",r),...o})});c.displayName="CardDescription";let u=o.forwardRef((t,e)=>{let{className:r,...o}=t;return(0,a.jsx)("div",{ref:e,className:(0,n.cn)("p-6 pt-0",r),...o})});u.displayName="CardContent";let l=o.forwardRef((t,e)=>{let{className:r,...o}=t;return(0,a.jsx)("div",{ref:e,className:(0,n.cn)("flex items-center p-6 pt-0",r),...o})});l.displayName="CardFooter"},35153:function(t,e,r){r.d(e,{pm:function(){return f}});var a=r(2265);let o=0,n=new Map,s=t=>{if(n.has(t))return;let e=setTimeout(()=>{n.delete(t),u({type:"REMOVE_TOAST",toastId:t})},1e6);n.set(t,e)},i=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,1)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{let{toastId:r}=e;return r?s(r):t.toasts.forEach(t=>{s(t.id)}),{...t,toasts:t.toasts.map(t=>t.id===r||void 0===r?{...t,open:!1}:t)}}case"REMOVE_TOAST":if(void 0===e.toastId)return{...t,toasts:[]};return{...t,toasts:t.toasts.filter(t=>t.id!==e.toastId)}}},d=[],c={toasts:[]};function u(t){c=i(c,t),d.forEach(t=>{t(c)})}function l(t){let{...e}=t,r=(o=(o+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>u({type:"DISMISS_TOAST",toastId:r});return u({type:"ADD_TOAST",toast:{...e,id:r,open:!0,onOpenChange:t=>{t||a()}}}),{id:r,dismiss:a,update:t=>u({type:"UPDATE_TOAST",toast:{...t,id:r}})}}function f(){let[t,e]=a.useState(c);return a.useEffect(()=>(d.push(e),()=>{let t=d.indexOf(e);t>-1&&d.splice(t,1)}),[t]),{...t,toast:l,dismiss:t=>u({type:"DISMISS_TOAST",toastId:t})}}},87598:function(t,e,r){r.d(e,{LL:function(){return u},Sv:function(){return p},X3:function(){return d},c9:function(){return l},kb:function(){return f},vO:function(){return c},yj:function(){return i}});var a=r(5978),o=r(13491),n=r(738),s=r(17293);let i=async t=>{let e=(0,n.Mq)(),r=(0,o.$C)(e,"us-central1"),a=(0,o.V1)(r,"createTelemedicineRoom");try{console.log("Chamando a Cloud Function 'createTelemedicineRoom' para o contrato: ".concat(t));let e=(await a({contractId:t})).data;if(e.success&&e.roomUrl)return console.log("Sala de telemedicina criada com sucesso:",e.roomUrl),e.roomUrl;throw Error("A Cloud Function n\xe3o retornou uma URL v\xe1lida.")}catch(t){throw console.error("Erro ao chamar a fun\xe7\xe3o createTelemedicineRoom:",t),Error("N\xe3o foi poss\xedvel criar a sala de telemedicina.")}},d=async t=>{let e=(0,n.Mq)(),r=(0,o.$C)(e,"us-central1"),a=(0,o.V1)(r,"generateContractPdf");try{let e=(await a({contractId:t})).data;if(e.success&&e.pdfUrl)return e.pdfUrl;throw Error("A Cloud Function n\xe3o retornou uma URL de PDF v\xe1lida.")}catch(t){throw console.error("Erro ao chamar a fun\xe7\xe3o generateContractPdf:",t),Error("N\xe3o foi poss\xedvel gerar o documento do contrato.")}},c=async t=>{let e=s.I8.currentUser;if(!e||!t||0===t.length)return[];try{let r=(0,a.hJ)(s.db,"contracts"),o=(0,a.IO)(r,(0,a.ar)("doctorId","==",e.uid),(0,a.ar)("status","in",t),(0,a.Xo)("createdAt","desc"));return(await (0,a.PL)(o)).docs.map(t=>({id:t.id,...t.data()}))}catch(t){throw console.error("[getContractsForDoctor] Erro:",t),Error("Falha ao carregar os contratos do m\xe9dico.")}},u=async t=>{let e=s.I8.currentUser;if(!e||!t||0===t.length)return[];try{let r=(0,a.hJ)(s.db,"contracts"),o=(0,a.IO)(r,(0,a.ar)("hospitalId","==",e.uid),(0,a.ar)("status","in",t),(0,a.Xo)("createdAt","desc"));return(await (0,a.PL)(o)).docs.map(t=>({id:t.id,...t.data()}))}catch(t){throw console.error("[getContractsForHospital] Erro:",t),Error("Falha ao carregar os contratos do hospital.")}},l=async t=>{if(!s.I8.currentUser)throw Error("Usu\xe1rio n\xe3o autenticado.");let e=(0,a.JU)(s.db,"contracts",t);await (0,a.i3)(s.db,async r=>{var o;let n=await r.get(e);if(!n.exists()||"PENDING_DOCTOR_SIGNATURE"!==n.data().status)throw Error("Este contrato n\xe3o est\xe1 mais dispon\xedvel para assinatura.");let i=n.data().timeSlotId;if(!i)throw Error("ID da disponibilidade original n\xe3o encontrado no contrato.");let d=(0,a.JU)(s.db,"doctorTimeSlots",i),c=await r.get(d);if(c.exists()&&(null===(o=c.data())||void 0===o?void 0:o.status)!=="AVAILABLE")throw Error("Esta disponibilidade n\xe3o est\xe1 mais livre. A vaga pode ter sido preenchida.");r.update(e,{status:"PENDING_HOSPITAL_SIGNATURE",doctorSignature:{signedAt:(0,a.Bt)()},updatedAt:(0,a.Bt)()}),r.update(d,{status:"BOOKED",relatedContractId:t,updatedAt:(0,a.Bt)()})})},f=async t=>{let e=s.I8.currentUser;if(!e)throw Error("Hospital n\xe3o autenticado.");await (0,a.i3)(s.db,async r=>{let o=(0,a.JU)(s.db,"contracts",t),n=await r.get(o);if(!n.exists()||"PENDING_HOSPITAL_SIGNATURE"!==n.data().status)throw Error("Este contrato n\xe3o est\xe1 mais aguardando sua assinatura.");let i=n.data(),d=(0,a.JU)(s.db,"shiftRequirements",i.shiftRequirementId),c=(0,a.JU)(s.db,"users",i.doctorId),u=await r.get(c);if(r.update(o,{status:"ACTIVE_SIGNED",hospitalSignature:{signedAt:(0,a.Bt)(),signedByUID:e.uid},updatedAt:(0,a.Bt)()}),r.update(d,{status:"CONFIRMED",updatedAt:(0,a.Bt)()}),u.exists()){let t=u.data(),o=(0,a.JU)((0,a.hJ)(s.db,"users",e.uid,"hospitalDoctors"),i.doctorId);r.set(o,{name:t.displayName||"Nome n\xe3o informado",crm:t.professionalCrm||"N\xe3o informado",email:t.email||"N\xe3o informado",phone:t.phone||"N\xe3o informado",specialties:t.specialties||[],status:"ACTIVE_PLATFORM",source:"PLATFORM",addedAt:(0,a.Bt)()},{merge:!0})}})},p=async(t,e)=>{if(!t)throw Error("ID do contrato \xe9 obrigat\xf3rio.");if(!e||""===e.trim())throw Error("O motivo do cancelamento \xe9 obrigat\xf3rio.");let r=(0,a.JU)(s.db,"contracts",t);await (0,a.r7)(r,{status:"CANCELLED",cancellationReason:e,updatedAt:(0,a.Bt)()})}},17293:function(t,e,r){r.d(e,{I8:function(){return c},db:function(){return u},tO:function(){return l},wk:function(){return f}});var a=r(738),o=r(43301),n=r(5978),s=r(60062),i=r(13491);let d=(0,a.C6)().length?(0,a.Mq)():(0,a.ZF)({apiKey:"AIzaSyAyoX1YqAdqHuIvSoj0Yw_FYnhCBv-KfEA",authDomain:"fht-sistema.firebaseapp.com",projectId:"fht-sistema",storageBucket:"fht-sistema.firebasestorage.app",messagingSenderId:"583837273524",appId:"1:583837273524:web:1583addfce581e61ac76e1",measurementId:"G-6FJ2H3G32N"}),c=(0,o.v0)(d),u=(0,n.ad)(d),l=(0,s.cF)(d),f=(0,i.$C)(d,"us-central1")},94508:function(t,e,r){r.d(e,{Hq:function(){return c},bx:function(){return d},cn:function(){return n},rl:function(){return i},xG:function(){return s}});var a=r(61994),o=r(53335);function n(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return(0,o.m6)((0,a.W)(e))}let s=t=>null==t||isNaN(t)?"R$ -":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t),i=t=>null==t||isNaN(t)?"- %":"".concat(t.toFixed(1),"%"),d=t=>null==t||isNaN(t)?"- h":"".concat(t.toFixed(1)," h"),c=(t,e)=>{if(!t)return t;let r=t.replace(/[^\dX]/gi,"");if("cpf"===e&&11===r.length)return r.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4");if("cnpj"===e&&14===r.length)return r.replace(/^(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})$/,"$1.$2.$3/$4-$5");if("phone"===e)return r.length>10?r.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):r.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3");if("cep"===e&&8===r.length)return r.replace(/(\d{5})(\d{3})/,"$1-$2");if("rg"===e){if(9===r.length)return r.replace(/(\d{2})(\d{3})(\d{3})([\dX])$/,"$1.$2.$3-$4");if(8===r.length)return r.replace(/(\d{1})(\d{3})(\d{3})([\dX])$/,"$1.$2.$3-$4")}return t}}}]);