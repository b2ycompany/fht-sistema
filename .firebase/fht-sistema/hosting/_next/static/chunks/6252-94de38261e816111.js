"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6252],{65402:function(e,t,a){a.d(t,{K:function(){return m}});var r=a(57437),n=a(2265),s=a(18331),i=a(35153),o=a(26110),d=a(6596),l=a(35974),c=a(51817),u=a(76865),f=a(31047);let m=e=>{let{patientId:t,currentConsultationId:a}=e,{toast:m}=(0,i.pm)(),[p,x]=(0,n.useState)([]),[g,h]=(0,n.useState)(!0),[v,y]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(async()=>{if(t){h(!0),y(null);try{let e=await (0,s.Nb)(t);x(e.filter(e=>e.id!==a))}catch(e){y(e.message),m({title:"Erro ao buscar hist\xf3rico",description:e.message,variant:"destructive"})}finally{h(!1)}}})()},[t,a,m]),(0,r.jsxs)(o.cZ,{className:"max-w-3xl",children:[(0,r.jsxs)(o.fK,{children:[(0,r.jsx)(o.$N,{children:"Hist\xf3rico de Consultas do Paciente"}),(0,r.jsx)(o.Be,{children:"Visualize os atendimentos anteriores para uma melhor tomada de decis\xe3o cl\xednica."})]}),(0,r.jsxs)("div",{className:"max-h-[70vh] overflow-y-auto pr-4 py-4",children:[g&&(0,r.jsx)("div",{className:"flex justify-center items-center h-48",children:(0,r.jsx)(c.Z,{className:"h-8 w-8 animate-spin"})}),v&&(0,r.jsxs)("div",{className:"text-center text-red-600 p-8",children:[(0,r.jsx)(u.Z,{className:"mx-auto h-12 w-12 mb-4"}),(0,r.jsx)("p",{children:v})]}),!g&&!v&&0===p.length&&(0,r.jsx)("div",{className:"text-center text-muted-foreground p-12",children:(0,r.jsx)("p",{children:"Nenhuma consulta anterior encontrada para este paciente."})}),!g&&!v&&p.length>0&&(0,r.jsx)(d.UQ,{type:"single",collapsible:!0,className:"w-full",children:p.map(e=>{var t;return(0,r.jsxs)(d.Qd,{value:e.id,children:[(0,r.jsx)(d.o4,{children:(0,r.jsxs)("div",{className:"flex justify-between w-full pr-4 items-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4"}),e.createdAt.toDate().toLocaleDateString("pt-BR")]}),(0,r.jsx)(l.C,{variant:"Telemedicina"===e.type?"default":"secondary",children:e.type})]})}),(0,r.jsxs)(d.vF,{className:"space-y-3 text-sm",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{className:"font-medium",children:"M\xe9dico:"})," ",e.doctorName]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{className:"font-medium",children:"Queixa Principal (Triagem):"})," ",(null===(t=e.triageData)||void 0===t?void 0:t.chiefComplaint)||"N\xe3o registada"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"font-medium",children:"Hip\xf3tese Diagn\xf3stica:"}),(0,r.jsx)("p",{className:"pl-2 mt-1 border-l-2 ml-1 text-muted-foreground whitespace-pre-wrap",children:e.diagnosticHypothesis||"N\xe3o registada"})]})]})]},e.id)})})]})]})}},6596:function(e,t,a){a.d(t,{Qd:function(){return l},UQ:function(){return d},o4:function(){return c},vF:function(){return u}});var r=a(57437),n=a(2265),s=a(13134),i=a(40875),o=a(94508);let d=s.fC,l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.ck,{ref:t,className:(0,o.cn)("border-b",a),...n})});l.displayName="AccordionItem";let c=n.forwardRef((e,t)=>{let{className:a,children:n,...d}=e;return(0,r.jsx)(s.h4,{className:"flex",children:(0,r.jsxs)(s.xz,{ref:t,className:(0,o.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",a),...d,children:[n,(0,r.jsx)(i.Z,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});c.displayName=s.xz.displayName;let u=n.forwardRef((e,t)=>{let{className:a,children:n,...i}=e;return(0,r.jsx)(s.VY,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...i,children:(0,r.jsx)("div",{className:(0,o.cn)("pb-4 pt-0",a),children:n})})});u.displayName=s.VY.displayName},35974:function(e,t,a){a.d(t,{C:function(){return o}});var r=a(57437);a(2265);var n=a(90535),s=a(94508);let i=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:a,...n}=e;return(0,r.jsx)("div",{className:(0,s.cn)(i({variant:a}),t),...n})}},62869:function(e,t,a){a.d(t,{d:function(){return d},z:function(){return l}});var r=a(57437),n=a(2265),s=a(37053),i=a(90535),o=a(94508);let d=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=n.forwardRef((e,t)=>{let{className:a,variant:n,size:i,asChild:l=!1,...c}=e,u=l?s.g7:"button";return(0,r.jsx)(u,{className:(0,o.cn)(d({variant:n,size:i,className:a})),ref:t,...c})});l.displayName="Button"},66070:function(e,t,a){a.d(t,{Ol:function(){return o},SZ:function(){return l},Zb:function(){return i},aY:function(){return c},eW:function(){return u},ll:function(){return d}});var r=a(57437),n=a(2265),s=a(94508);let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...n})});i.displayName="Card";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",a),...n})});o.displayName="CardHeader";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",a),...n})});d.displayName="CardTitle";let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...n})});l.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",a),...n})});c.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",a),...n})});u.displayName="CardFooter"},26110:function(e,t,a){a.d(t,{$N:function(){return g},Be:function(){return h},GG:function(){return u},Vq:function(){return d},cN:function(){return x},cZ:function(){return m},fK:function(){return p},hg:function(){return l}});var r=a(57437),n=a(2265),s=a(49027),i=a(32489),o=a(94508);let d=s.fC,l=s.xz,c=s.h_,u=s.x8,f=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n})});f.displayName=s.aV.displayName;let m=n.forwardRef((e,t)=>{let{className:a,children:n,...d}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(f,{}),(0,r.jsxs)(s.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[n,(0,r.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=s.VY.displayName;let p=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};p.displayName="DialogHeader";let x=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};x.displayName="DialogFooter";let g=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",a),...n})});g.displayName=s.Dx.displayName;let h=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...n})});h.displayName=s.dk.displayName},26815:function(e,t,a){a.d(t,{_:function(){return l}});var r=a(57437),n=a(2265),s=a(6394),i=a(90535),o=a(94508);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.f,{ref:t,className:(0,o.cn)(d(),a),...n})});l.displayName=s.f.displayName},12339:function(e,t,a){a.d(t,{SP:function(){return l},dr:function(){return d},mQ:function(){return o},nU:function(){return c}});var r=a(57437),n=a(2265),s=a(20271),i=a(94508);let o=s.fC,d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.aV,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...n})});d.displayName=s.aV.displayName;let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...n})});l.displayName=s.xz.displayName;let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...n})});c.displayName=s.VY.displayName},76818:function(e,t,a){a.d(t,{g:function(){return i}});var r=a(57437),n=a(2265),s=a(94508);let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});i.displayName="Textarea"},35153:function(e,t,a){a.d(t,{pm:function(){return f}});var r=a(2265);let n=0,s=new Map,i=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],l={toasts:[]};function c(e){l=o(l,e),d.forEach(e=>{e(l)})}function u(e){let{...t}=e,a=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function f(){let[e,t]=r.useState(l);return r.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},18331:function(e,t,a){a.d(t,{KO:function(){return c},Nb:function(){return l},hC:function(){return i},xr:function(){return d},yd:function(){return o}});var r=a(5978),n=a(17293);let s=(0,a(1850).V1)(n.wk,"createConsultationRoom"),i=async(e,t,a)=>{let i=(0,r.qs)(n.db),o=(0,r.JU)((0,r.hJ)(n.db,"consultations")),d={patientId:e.patientId,patientName:e.patientName,queueId:e.id,doctorId:t.uid,doctorName:t.displayName,hospitalId:e.unitId,hospitalName:e.hospitalName,status:"IN_PROGRESS",type:e.type,createdAt:(0,r.Bt)(),triageData:e.triageData||{},generatedDocuments:[]};if("Telemedicina"===e.type)try{let e=await s({consultationId:o.id});e.data.success&&(d.telemedicineLink=e.data.roomUrl)}catch(e){console.error("Falha ao criar a sala de telemedicina:",e)}i.set(o,d);let l=(0,r.JU)(n.db,"serviceQueue",e.id);return i.update(l,{status:"Em Atendimento",doctorId:t.uid}),await i.commit(),o.id},o=async e=>{let t=(0,r.qs)(n.db),a=(0,r.JU)(n.db,"consultations",e.id);if(t.update(a,{status:"COMPLETED"}),e.queueId){let a=(0,r.JU)(n.db,"serviceQueue",e.queueId);t.update(a,{status:"Finalizado"})}await t.commit()},d=async e=>{if(!e)return null;let t=(0,r.JU)(n.db,"consultations",e);try{let e=await (0,r.QT)(t);return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("Falha ao carregar dados da consulta:",e),Error("Falha ao carregar os dados da consulta.")}},l=async e=>{let t=(0,r.hJ)(n.db,"consultations"),a=(0,r.IO)(t,(0,r.ar)("patientId","==",e),(0,r.Xo)("createdAt","desc"));return(await (0,r.PL)(a)).docs.map(e=>({id:e.id,...e.data()}))},c=async(e,t)=>{if(!e)throw Error("ID da consulta \xe9 obrigat\xf3rio.");let a=(0,r.JU)(n.db,"consultations",e);try{await (0,r.r7)(a,{clinicalEvolution:t.clinicalEvolution,diagnosticHypothesis:t.diagnosticHypothesis})}catch(e){throw console.error("Erro ao salvar dados do prontu\xe1rio:",e),Error("N\xe3o foi poss\xedvel salvar os dados do prontu\xe1rio.")}}}}]);